<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Schema Design for Distributed Systems: Why Data Placement Matters</title>
    <link rel="stylesheet" href="/js/vendor/hystmodal/hystmodal.min.css?ver=0.9" />
    <link rel="stylesheet" href="/css/utils.css?ver=0.9" />
    <link rel="stylesheet" href="/css/site.css?ver=0.9" />
    <link rel="stylesheet" href="../css/blog.css?ver=0.9" />
    <link rel="stylesheet" href="/css/media.css?ver=0.9" media="only screen and (max-width:1199px)" />
    <link rel="icon" type="image/png" href="/img/favicon.png" />
    <!-- Matomo -->
    <script>
      var _paq = (window._paq = window._paq || []);
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['setDoNotTrack', true]);
      _paq.push(['disableCookies']);
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function () {
        var u = 'https://analytics.apache.org/';
        _paq.push(['setTrackerUrl', u + 'matomo.php']);
        _paq.push(['setSiteId', '77']);
        var d = document,
          g = d.createElement('script'),
          s = d.getElementsByTagName('script')[0];
        g.async = true;
        g.src = u + 'matomo.js';
        s.parentNode.insertBefore(g, s);
      })();
    </script>
    <!-- End Matomo Code -->
  </head>
  <body>
    <!-- MOBILE MENU START-->
    <div class="hystmodal" id="jsMenuModal" aria-hidden="true">
      <div class="hystmodal__wrap">
        <div class="hystmodal__window mobmenu" role="dialog" aria-modal="true">
          <button class="hystmodal__close" data-hystclose="">Close</button>
          <div class="mobmenu__wrap">
            <a class="mobmenu__logo" href="/"><img src="/img/logo.svg" alt="Logo" /></a>
            <div class="mobmenu__menu">
              <ul>
                <li><a href="/docs/latest/">Quick Start</a></li>
                <li><a href="/resources.html#learning">Learning resources</a></li>
                <li><a href="/resources.html#training">Training and Courses</a></li>
                <li><a href="/faq.html">FAQ</a></li>
                <li>
                  <span class="mobmenu__parent"><a href="/use-cases.html">Use Cases</a><button class="mobmenu__opener"></button></span>
                  <ul>
                    <li><a href="/use-cases/in-memory-cache.html">In-Memory Cache</a></li>
                    <li><a href="/use-cases/in-memory-data-grid.html">In-Memory Data Grid</a></li>
                    <li><a href="/use-cases/in-memory-database.html">In-Memory Database</a></li>
                    <li><a href="/use-cases/key-value-store.html">Key-Value Store</a></li>
                    <li><a href="/use-cases/high-performance-computing.html">High Performance Computing</a></li>
                    <li><a href="/use-cases/digital-integration-hub.html">Digital Integration Hub</a></li>
                    <li><a href="/use-cases/spark-acceleration.html">Spark Acceleration</a></li>
                    <li><a href="/use-cases/hadoop-acceleration.html">Hadoop Acceleration</a></li>
                    <li><a href="/use-cases.html">View All</a></li>
                  </ul>
                </li>
                <li>
                  <span class="mobmenu__parent"><a href="/features/">Features</a><button class="mobmenu__opener"></button></span>
                  <ul>
                    <li><a href="/arch/multi-tier-storage.html">Multi-Tier Storage</a></li>
                    <li><a href="/arch/native-persistence.html">Native Persistence</a></li>
                    <li><a href="/features/sql.html">Distributed SQL</a></li>
                    <li><a href="/features/key-value-apis.html">Key-Value APIs</a></li>
                    <li><a href="/features/acid-transactions.html">ACID Transactions</a></li>
                    <li><a href="/features/compute-apis.html">Compute APIs</a></li>
                    <li><a href="/features/service-apis.html">Services</a></li>
                    <li><a href="/features/machinelearning.html">Machine Learning</a></li>
                    <li><a href="/features/streaming.html">Real-Time Streaming APIs</a></li>
                    <li><a href="/docs/latest/messaging">Messaging</a></li>
                    <li><a href="/docs/latest/key-value-api/continuous-queries">Continuous Queries</a></li>
                    <li><a href="/features/index.html">View All</a></li>
                  </ul>
                </li>
                <li>
                  <a href="/community.html">Community</a>
                  <ul class="isdefault">
                    <li><a href="/community.html">Project Info</a></li>
                    <li><a href="/events.html">Events</a></li>
                  </ul>
                </li>
                <li><a href="/use-cases/provenusecases.html">Powered by</a></li>
                <li><a href="/resources.html">Resources</a></li>
                <li><a href="/blog/">Blog</a></li>
                <li><a href="/docs/latest/">Docs</a></li>
              </ul>
              <a class="button mobmenu__button" href="/download.cgi">Download Ignite</a>
            </div>
            <!-- //mobmenu__menu-->
          </div>
          <!-- //mobmenu__wrap-->
        </div>
        <!-- //mobmenu-->
      </div>
    </div>
    <!-- MOBILE MENU END-->
    <header class="hdr hdr__white jsHdrBase">
      <div class="jsHdrLine">
        <div id="promotion-bar">
          <a
            href="https://ignite-summit.org/2025/?utm_medium=website-direct&amp;utm_source=apache_ignite&amp;utm_term=ignite-summit&amp;utm_content=event-hosted&amp;utm_campaign=2023-06-06-ignite-summit-nam"
            target="_blank"
            title="Ignite Summit 2025"
            rel="noopener noreferrer"
            >Ignite Summit 2025 — Watch on demand &nbsp;<span class="more d-none d-lg-block"><img src="/images/promos/arrow-white.svg" /></span
          ></a>
        </div>
        <div class="hdr__wrap flexi">
          <button class="hdr__burger" data-menumodal="#jsMenuModal"><img src="/img/menu.svg" alt="" /></button
          ><a class="hdr__logo" href="/"><img class="hdr__logoimg hdr__logo--white" src="/img/logo-white.svg" alt="" /><img class="hdr__logoimg hdr__logo--black" src="/img/logo.svg" alt="" /></a
          ><a class="button hdr__button" href="/download.cgi">Download Ignite</a>
          <nav class="hdrmenu">
            <ul class="flexi">
              <li class="js-hasdrop"><a class="hdrmenu--expanded" href="/" data-panel="getStarted">Get Started</a></li>
              <li class="js-hasdrop"><a class="hdrmenu--expanded" href="/features" data-panel="features">Features</a></li>
              <li class="js-hasdrop"><a class="hdrmenu--expanded" href="/community.html" data-panel="community">Community</a></li>
              <li><a href="/use-cases/provenusecases.html" data-panel="">Powered By</a></li>
              <li class="js-hasdrop"><a class="hdrmenu--expanded" href="/resources.html" data-panel="resources">Resources</a></li>
              <li><a href="///ignite.apache.org/docs/latest/" data-panel="">Docs</a></li>
            </ul>
          </nav>
          <div class="dropmenu">
            <div class="dropmenu__panel" data-menupanel="getStarted">
              <div class="container dropmenu1__grid">
                <div class="dropmenu1__buttonwrap">&nbsp;</div>
                <div class="dropmenu__box dropmenu__box--buttonin">
                  <a class="dropmenu__redbutton" href="https://ignite.apache.org/docs/latest/"> <img src="/img/menu/icon-red-rocket.svg" alt="" /><span>Quick Start Guide</span></a>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#learning"><span>Learning resources</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#training"><span>Training and Courses</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/faq.html"><span>FAQ</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box">
                  <p class="capstext"><a class="dropmenu__capslink" href="/use-cases.html">USE CASES</a></p>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/in-memory-cache.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>In-Memory Cache</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/in-memory-data-grid.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>In-Memory Data Grid</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/in-memory-database.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>In-Memory Database</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/key-value-store.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>Key-Value Store</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box no-border">
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/high-performance-computing.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>High-Performance Computing</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/digital-integration-hub.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>Digital Integration Hub</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/spark-acceleration.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>Spark Acceleration</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/use-cases/hadoop-acceleration.html"><img src="/img/menu/icon-folder.svg" alt="" /><span>Hadoop Acceleration</span></a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- /.dropmenu1__grid-->
              <div class="panelmorelinkwrap panelmorelinkwrap--end container"><a class="panellink" href="/use-cases.html">View all</a></div>
            </div>
            <!-- /.dropmenu__panel-->
            <div class="dropmenu__panel" data-menupanel="features">
              <div class="container dropmenu2__grid">
                <div class="dropmenu__box">
                  <div class="capstext">MULTI-TIER STORAGE</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/arch/multi-tier-storage.html"><img src="/img/menu/icon-db.svg" alt="" /><span>Multi-Tier Storage</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/arch/native-persistence.html"><img src="/img/menu/icon-db.svg" alt="" /><span>Native Persistence</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box">
                  <div class="capstext">ESSENTIAL Developer APIs</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/features/sql.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Distributed SQL</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/features/key-value-apis.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Key-Value APIs</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/features/acid-transactions.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>ACID Transactions</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box">
                  <div class="capstext">High-Performance <br />Computing APIs</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/features/compute-apis.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Compute APIs</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/features/service-apis.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Services</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/features/machinelearning.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Machine Learning</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box">
                  <div class="capstext">Real-Streaming APIs</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/features/streaming.html"><img src="/img/menu/icon-cube.svg" alt="" /><span>Real-Time Streaming APIs</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="https://ignite.apache.org/docs/latest/messaging"><img src="/img/menu/icon-cube.svg" alt="" /><span>Messaging</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="https://ignite.apache.org/docs/latest/key-value-api/continuous-queries"><img src="/img/menu/icon-cube.svg" alt="" /><span>Continuous Queries</span></a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- /.dropmenu2__grid-->
              <div class="panelmorelinkwrap"><a class="panellink" href="/features/">View all</a></div>
            </div>
            <!-- /.dropmenu__panel-2-->
            <div class="dropmenu__panel" data-menupanel="community">
              <div class="container dropmenu3__grid">
                <div class="dropmenu__box">
                  <div class="capstext"><a class="dropmenu__capslink" href="/community.html">Project Info</a></div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/community.html#story"><img src="/img/menu/icon-clip.svg" alt="" /><span>Apache Ignite Story</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/community.html#community"><img src="/img/menu/icon-comment.svg" alt="" /><span>Meet The Community</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box no-border">
                  <div class="capstext">&nbsp;</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/community.html#contributing"><img src="/img/menu/icon-puzzle.svg" alt="" /><span>Start Contributing</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/community.html#faq"><img src="/img/menu/icon-question.svg" alt="" /><span>Ask Questions</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box">
                  <div class="capstext"><a class="dropmenu__capslink" href="/events.html">Events</a></div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/events.html#summit"><img src="/img/menu/icon-calendar.svg" alt="" /><span>Apache Ignite Summit</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/events.html#meetups"><img src="/img/menu/icon-calendar.svg" alt="" /><span>Meetups</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box no-border">
                  <div class="capstext">&nbsp;</div>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/events.html#upcoming"><img src="/img/menu/icon-calendar.svg" alt="" /><span>Upcoming Events</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/events.html#past"><img src="/img/menu/icon-calendar.svg" alt="" /><span>Past Events</span></a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- /.dropmenu3__grid-->
            </div>
            <!-- /.dropmenu__panel-->
            <div class="dropmenu__panel" data-menupanel="resources">
              <div class="container dropmenu1__grid">
                <div class="dropmenu1__buttonwrap">&nbsp;</div>
                <div class="dropmenu__box dropmenu__box--buttonin">
                  <a class="dropmenu__redbutton blog" href="/blog/"><img src="/img/menu/icon-blog.svg" alt="" /><span>Blog</span></a>
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#technical"><span>Technical resources</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#learning"><span>Learning resources</span></a>
                    </li>
                  </ul>
                </div>
                <div class="dropmenu__box blog">
                  <ul class="dropmenu__menu">
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#training"><span>Training and Courses</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#book"><span>Apache Ignite Book</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/resources.html#mail"><span>Mailing Lists, Forums And Discussion Archives</span></a>
                    </li>
                    <li>
                      <a class="dropmenu__iconitem" href="/faq.html"><span>FAQ</span></a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- /.dropmenu1__grid-->
            </div>
            <!-- /.dropmenu__panel-->
          </div>
          <!-- /.dropmeu-->
        </div>
      </div>
    </header>
    <div class="dropmenu__back"></div>
    <header class="hdrfloat hdr__white jsHdrFloatBase"></header>
    <div class="container blog">
      <section class="blog__header post_page__header">
        <a href="/blog/">← Apache Ignite Blog</a>
        <h1>Schema Design for Distributed Systems: Why Data Placement Matters</h1>
        <p>
          November 18, 2025 by <strong>Michael Aglietti. Share in </strong><a href="http://www.facebook.com/sharer.php?u=https://ignite.apache.org/blog/undefined">Facebook</a><span>, </span
          ><a href="http://twitter.com/home?status= Schema Design for Distributed Systems: Why Data Placement Matters%20https://ignite.apache.org/blog/undefined">Twitter</a>
        </p>
      </section>
      <div class="blog__content">
        <main class="blog_main">
          <section class="blog__posts">
            <article class="post">
              <div>
                <p>Discover how Apache Ignite 3 keeps related data together with schema-driven colocation, cutting cross-node traffic and making distributed queries fast, local and predictable.</p>
                <!-- end -->
                <h3>Schema Design for Distributed Systems: Why Data Placement Matters</h3>
                <p>
                  You can scale out your database, add more nodes, and tune every index, but if your data isn’t in the right place, performance still hits a wall. Every distributed system eventually runs into this: joins that cross the
                  network, caches that can’t keep up, and queries that feel slower the larger your cluster gets.
                </p>
                <p>
                  Most distributed SQL databases claim to solve scalability. They partition data evenly, replicate it across nodes, and promise linear performance. But <em>how</em> data is distributed and <em>which</em> records end up
                  together matters more than most people realize. If related data lands on different nodes, every query has to travel the network to fetch it, and each millisecond adds up.
                </p>
                <p>
                  That’s where <strong>data placement</strong> becomes the real scaling strategy. Apache Ignite 3 takes a different path with <strong>schema-driven colocation</strong> — a way to keep related data physically together.
                  Instead of spreading rows randomly across nodes, Ignite uses your schema relationships to decide where data lives. The result: a 200 ms cross-node query becomes a 5 ms local read.
                </p>
                <hr />
                <h3>How Ignite 3 Differs from Other Distributed Databases</h3>
                <p><strong>Traditional Distributed SQL Databases:</strong></p>
                <ul>
                  <li>Hash-based partitioning ignores data relationships</li>
                  <li>Related data scattered across nodes by default</li>
                  <li>Cross-node joins create network bottlenecks</li>
                  <li>Millisecond latencies due to disk-first architecture</li>
                </ul>
                <p><strong>Ignite 3 Schema-Driven Approach:</strong></p>
                <ul>
                  <li>Colocation configuration in schema definitions</li>
                  <li>Related data automatically placed together</li>
                  <li>Local queries eliminate network overhead</li>
                  <li>Microsecond latencies through memory-first storage</li>
                </ul>
                <hr />
                <h3>The Distributed Data Placement Problem</h3>
                <p>You’ve tuned indexes, optimized queries, and scaled your cluster—but latency still creeps in. The problem isn’t your SQL — it’s where your data lives.</p>
                <p>
                  Traditional hash-based partitioning distributes records randomly across nodes based on primary key values. While this ensures even data distribution, it scatters related records that applications frequently access
                  together. It’s a clever approach — until you need to join data that doesn’t share the same key. Then every query turns into a distributed operation, and your network becomes the bottleneck.
                </p>
                <p>
                  Ignite 3 provides automatic colocation based on schema relationships. You define relationships directly in your schema, and Ignite automatically places related data on the same nodes using the specified colocation keys.
                </p>
                <p>Using a <a href="https://github.com/maglietti/ignite3-chinook-demo">music catalog example</a>, we’ll demonstrate how schema-driven data placement reduces query latency from 200 ms to 5 ms.</p>
                <blockquote>
                  <p>
                    This post assumes you have a basic understanding of how to get an Ignite 3 cluster running and have worked with the Ignite 3 Java API. If you’re new to Ignite 3, start with the
                    <a href="https://ignite.apache.org/docs/ignite3/latest/quick-start/java-api">Java API quick start guide</a> to set up your development environment.
                  </p>
                </blockquote>
                <hr />
                <h3>How Ignite 3 Places Data Differently</h3>
                <p>
                  Tables are distributed across multiple nodes using consistent hashing, but with a key difference: your schema definitions control data placement. Instead of accepting random distribution of related records, you declare
                  relationships in your schema and let Ignite handle placement automatically.
                </p>
                <p><strong>Partitioning Fundamentals:</strong></p>
                <ul>
                  <li>Each table is divided into partitions (typically 64–1024 per table)</li>
                  <li>Primary key hash determines which partition data goes into</li>
                  <li>Partitions are distributed evenly across available nodes</li>
                  <li>Each partition has configurable replicas for fault tolerance</li>
                </ul>
                <p><strong>Data Placement Concepts:</strong></p>
                <ul>
                  <li><strong>Affinity</strong> – the algorithm that determines which nodes store which partitions</li>
                  <li><strong>Colocation</strong> – ensuring related data from different tables gets placed on the same nodes</li>
                </ul>
                <p>
                  The diagram below shows how colocation works in practice. Artist and Album tables use different primary keys, but colocation strategy ensures albums are partitioned by <code>ArtistId</code> rather than
                  <code>AlbumId</code>:
                </p>
                <p><img src="/assets/images/schema-design.png" alt="Data colocation diagram showing how Artist and Album tables are partitioned across a 3-node cluster" style="max-width: 100%; height: auto" /></p>
                <p>
                  Colocation configuration in your schema ensures that Album records use the <code>ArtistId</code> value (not <code>AlbumId</code>) for partition assignment. This guarantees that Artist 1 and all albums with
                  <code>ArtistId = 1</code> hash to the same partition and therefore live on the same nodes.
                </p>
                <hr />
                <h3>Distribution Zones and Data Placement</h3>
                <p>Distribution zones are cluster-level configurations that define how data is distributed and replicated.</p>
                <blockquote>
                  <p>
                    <strong>Zone Creation Options:</strong> Ignite 3 supports multiple approaches:
                    <br />
                    1. <strong>SQL DDL</strong> – <code>CREATE ZONE</code> statements
                    <br />
                    2. <strong>Java Builder API</strong> – programmatic <code>ZoneDefinition.builder()</code>
                    <br />
                    <br />
                    We use the Java Builder API here for consistency with our programmatic schema examples.
                  </p>
                </blockquote>
                <p>A distribution zone specifies:</p>
                <ul>
                  <li><strong>Partition count</strong> – how many partitions your data is divided into (typically 64–1024 per table)</li>
                  <li><strong>Replica count</strong> – how many copies of each partition exist for fault tolerance</li>
                  <li><strong>Node filters</strong> – which nodes can store data for this zone</li>
                </ul>
                <p>First, create the distribution zones:</p>
                <pre><code>// Create the standard zone for frequently updated data
ignite.catalog().create(ZoneDefinition.builder("MusicStore")
.replicas(2)
.storageProfiles("default")
.build()).execute();

// Create the replicated zone for reference data (replicas = cluster size)
ignite.catalog().create(ZoneDefinition.builder("MusicStoreReplicated")
.replicas(clusterNodes().size())
.storageProfiles("default")
.build()).execute();
</code></pre>
                <hr />
                <h3>Building Your Music Platform Schema</h3>
                <blockquote>
                  <p>
                    <strong>Schema Creation:</strong> Ignite 3 supports three approaches:
                    <br />
                    1. <strong>SQL DDL</strong> – traditional <code>CREATE TABLE</code> statements
                    <br />
                    2. <strong>Java Annotations API</strong> – POJO markup with <code>@Table</code>, <code>@Column</code>, etc.
                    <br />
                    3. <strong>Java Builder API</strong> – programmatic <code>TableDefinition.builder()</code>
                    <br />
                    <br />
                    We use the Annotations API here for its clarity and type safety.
                  </p>
                </blockquote>
                <p>The Artist table establishes the partitioning strategy that dependent tables will follow through colocation:</p>
                <pre><code>@Table(zone = @Zone(value = "MusicStore", storageProfiles = "default"))
public class Artist {
    @Id
    @Column(value = "ArtistId", nullable = false)
    private Integer ArtistId;

    @Column(value = "Name", nullable = false, length = 120)
    private String Name;

    public Artist() {}

    public Artist(Integer artistId, String name) {
        this.ArtistId = artistId;
        this.Name = name;
    }

    public Integer getArtistId() { return ArtistId; }
    public void setArtistId(Integer artistId) { this.ArtistId = artistId; }
    public String getName() { return Name; }
    public void setName(String name) { this.Name = name; }
}
</code></pre>
                <hr />
                <h3>Parent–Child Colocation Implementation</h3>
                <p>When users search for "The Beatles", they expect both artist details and album listings in the same query. Without colocation, this requires cross-node joins that can take 40–200 ms.</p>
                <p>We solve this by setting<code>colocateBy</code>in the<code>@Table</code>annotation:</p>
                <pre><code>@Table(
    zone = @Zone(value = "MusicStore", storageProfiles = "default"),
    colocateBy = @ColumnRef("ArtistId")
)
public class Album {
    @Id
    @Column(value = "AlbumId", nullable = false)
    private Integer AlbumId;

    @Id
    @Column(value = "ArtistId", nullable = false)
    private Integer ArtistId;

    @Column(value = "Title", nullable = false, length = 160)
    private String Title;

    @Column(value = "ReleaseDate", nullable = true)
    private LocalDate ReleaseDate;

    // Constructors and getters/setters...
}
</code></pre>
                <p>
                  The colocation field (<code>ArtistId</code>) must be part of the composite primary key. Ignite uses the<code>ArtistId</code>value to ensure albums with the same artist live on the same nodes as their corresponding artist
                  record.
                </p>
                <hr />
                <h3>Performance Impact: Memory-First + Colocation</h3>
                <p>Let’s quantify the effect of combining memory-first storage with schema-driven colocation.</p>
                <p><strong>Without Colocation – Data Scattered:</strong></p>
                <pre><code>Artist artist = artistView.get(null, artistKey);              // Node 2
Collection&lt;Album&gt; albums = albumView.getAll(null, albumKeys); // Nodes 1,2,3
// Result: 3 network operations for related data
// Query time: 40–200 ms (network latency × nodes involved)
</code></pre>
                <p><strong>With Memory-First + Colocation – Data Local:</strong></p>
                <pre><code>Artist artist = artistView.get(null, artistKey);              // Node 2
Collection&lt;Album&gt; albums = albumView.getAll(null, albumKeys); // Node 2
// Result: 1 node involved, local memory access
// Query time: 1–5 ms (memory access + no network hops)
</code></pre>
                <ul>
                  <li><strong>Query latency reduction:</strong> 200 ms → 5 ms (memory access + no network hops)</li>
                  <li><strong>Network traffic elimination:</strong> related data queries become local operations</li>
                  <li><strong>Resource efficiency:</strong> CPU focuses on serving requests instead of moving data</li>
                </ul>
                <hr />
                <h3>Colocation Enables Compute-to-Data Processing</h3>
                <p>Schema-driven colocation doesn’t just optimize queries—it enables processing where data lives:</p>
                <pre><code>// Process all albums for an artist locally
ComputeJob&lt;RecommendationResult&gt; job = ComputeJob.colocated("Artist", artistId,
AlbumRecommendationJob.class);

// Runs on the same node where artist and album data live
CompletableFuture&lt;RecommendationResult&gt; result = ignite.compute()
.submitAsync(job, preferences);

</code></pre>
                <p>Instead of moving gigabytes of album data to a compute cluster, you move kilobytes of logic to where the data already resides.</p>
                <hr />
                <h3>Implementation Guide</h3>
                <p>Deploy tables in dependency order to avoid colocation reference errors:</p>
                <pre><code>try (IgniteClient client = IgniteClient.builder()
        .addresses("127.0.0.1:10800")
        .build()) {

    // 1. Reference tables with no dependencies
    client.catalog().createTable(Genre.class);

    // 2. Root entities
    client.catalog().createTable(Artist.class);

    // 3. Dependent entities in hierarchy order
    client.catalog().createTable(Album.class);      // References Artist
    client.catalog().createTable(Track.class);      // References Album
}
</code></pre>
                <hr />
                <h3>Accessing Your Distributed Data</h3>
                <p>Ignite 3 provides multiple views of the same colocated data:</p>
                <pre><code>// RecordView for entity operations
RecordView&lt;Artist&gt; artists = client.tables()
.table("Artist")
.recordView(Artist.class);

// Operations with partition keys route to single nodes
Artist beatles = new Artist(1, "The Beatles");
artists.upsert(null, beatles);

Album abbeyRoad = new Album(1, 1, "Abbey Road", LocalDate.of(1969, 9, 26));
albums.upsert(null, abbeyRoad);  // Automatically colocated with artist

</code></pre>
                <hr />
                <h3>Summary</h3>
                <p>
                  Data placement is where distributed performance is won or lost. With <strong>schema-driven colocation</strong>, Apache Ignite 3 keeps related data together on the same nodes, so your queries stay local, fast, and
                  predictable.
                </p>
                <p>Instead of tuning around network latency, you design for it once at the schema level. Your joins stay local, your compute jobs run where the data lives, and scaling stops being a tradeoff between performance and size.</p>
                <ul>
                  <li><strong>Memory-first + colocation</strong> → microsecond access to related data</li>
                  <li><strong>Schema-driven placement</strong> → predictable performance at scale</li>
                  <li><strong>Compute-to-data</strong> → logic runs with data, not across the network</li>
                  <li><strong>Unified platform</strong> → transactions, analytics, and compute together</li>
                </ul>
                <p>When data lives together, your system scales naturally — without complexity creeping in.</p>
                <p>Explore the <a href="https://ignite.apache.org/docs/ignite3/latest/">Ignite 3 documentation</a> for detailed examples and API references.</p>
              </div>
            </article>
            <section class="blog__footer">
              <ul class="pagination post_page">
                <li><a href="/blog/apache">apache</a></li>
                <li><a href="/blog/ignite">ignite</a></li>
              </ul>
            </section>
          </section>
        </main>
        <aside class="blog__sidebar">
          <ul>
            <li><a href="/blog/apache">apache</a></li>
            <li><a href="/blog/ignite">ignite</a></li>
            <li><a href="/blog/release">release</a></li>
            <li><a href="/blog/database">database</a></li>
            <li><a href="/blog/in">in</a></li>
            <li><a href="/blog/memory">memory</a></li>
            <li><a href="/blog/open">open</a></li>
            <li><a href="/blog/source">source</a></li>
            <li><a href="/blog/.NET">.NET</a></li>
            <li><a href="/blog/security">security</a></li>
            <li><a href="/blog/Intel">Intel</a></li>
            <li><a href="/blog/CET">CET</a></li>
            <li><a href="/blog/linq">linq</a></li>
            <li><a href="/blog/SQL">SQL</a></li>
            <li><a href="/blog/performance">performance</a></li>
            <li><a href="/blog/csharp">csharp</a></li>
            <li><a href="/blog/in-memory">in-memory</a></li>
            <li><a href="/blog/open-source">open-source</a></li>
            <li><a href="/blog/log4j2">log4j2</a></li>
            <li><a href="/blog/bigdata">bigdata</a></li>
            <li><a href="/blog/computing">computing</a></li>
            <li><a href="/blog/two">two</a></li>
            <li><a href="/blog/learning">learning</a></li>
            <li><a href="/blog/machine">machine</a></li>
            <li><a href="/blog/spark">spark</a></li>
            <li><a href="/blog/sql">sql</a></li>
            <li><a href="/blog/data">data</a></li>
            <li><a href="/blog/fast">fast</a></li>
            <li><a href="/blog/nodal">nodal</a></li>
            <li><a href="/blog/meltdown">meltdown</a></li>
            <li><a href="/blog/spectre">spectre</a></li>
            <li><a href="/blog/key-value">key-value</a></li>
            <li><a href="/blog/store">store</a></li>
            <li><a href="/blog/meetup">meetup</a></li>
            <li><a href="/blog/biodata">biodata</a></li>
            <li><a href="/blog/rdbms">rdbms</a></li>
            <li><a href="/blog/grid">grid</a></li>
            <li><a href="/blog/imdb">imdb</a></li>
          </ul>
        </aside>
      </div>
    </div>
    <footer class="footer">
      <div class="container footer__top">
        <section class="footer1">
          <a class="footer__title" href="/features/">Features</a>
          <ul class="footer__menu">
            <li><a href="/arch/multi-tier-storage.html">Multi-Tier Storage</a></li>
            <li><a href="/arch/native-persistence.html">Native Persistence</a></li>
            <li><a href="/features/sql.html">Distributed SQL</a></li>
            <li><a href="/features/acid-transactions.html">ACID Transactions</a></li>
            <li><a href="/features/key-value-apis.html">Key Value APIs</a></li>
            <li><a href="/features/compute-apis.html">Compute APIs</a></li>
            <li><a href="/features/machinelearning.html">Machine Learning</a></li>
            <li><a href="/features/service-apis.html">Services</a></li>
            <li><a href="/features/streaming.html">Real-Streaming APIs</a></li>
            <li><a href="https://ignite.apache.org/docs/latest/key-value-api/continuous-queries">Continuous Queries</a></li>
            <li><a href="https://ignite.apache.org/docs/latest/messaging">Messaging</a></li>
          </ul>
        </section>
        <section class="footer2">
          <a class="footer__title" href="/use-cases/">Use Cases</a>
          <ul class="footer__menu">
            <li><a href="/use-cases/in-memory-cache.html">In-Memory Cache</a></li>
            <li><a href="/use-cases/in-memory-data-grid.html">In-Memory Data Grid</a></li>
            <li><a href="/use-cases/in-memory-database.html">In-Memory Database</a></li>
            <li><a href="/use-cases/high-performance-computing.html">High-Performance Computing</a></li>
            <li><a href="/use-cases/digital-integration-hub.html">Digital Integration Hub</a></li>
            <li><a href="/use-cases/key-value-store.html">Key-Value Store</a></li>
            <li><a href="/use-cases/spark-acceleration.html">Apache Spark Acceleration</a></li>
            <li><a href="/use-cases/hadoop-acceleration.html">Apache Hadoop Acceleration</a></li>
          </ul>
        </section>
        <section class="footer3"><a class="footer__title" href="/our-community.html">Community</a><a class="footer__title" href="/resources.html">Resources</a><a class="footer__title" href="/events.html">Events</a></section>
        <section class="footer4">
          <div class="footer4__item">Join Our <a href="mailto:dev@ignite.apache.org">Dev Mailing List</a></div>
          <div class="footer4__item pt-2">Or write your question</div>
          <div class="footer4__item pt-1">user@ignite.apache.org</div>
          <div class="footer4__item pt-5">Follow Us:</div>
          <div class="footer4__socwrap flexi pt-2">
            <a class="footer4__soc" href="https://github.com/apache/ignite" target="_blank"><img src="/img/icon-github.svg" alt="" /></a
            ><a class="footer4__soc" href="https://www.linkedin.com/showcase/apache-ignite/" target="_blank"><img src="/img/icon-linkedin.svg" alt="" /></a
            ><a class="footer4__soc" href="https://twitter.com/apacheignite" target="_blank"><img src="/img/icon-twitter.svg" alt="" /></a
            ><a class="footer4__soc" href="https://www.meetup.com/Apache-Ignite-Virtual-Meetup/" target="_blank"><img src="/img/icon-meetup-black.png" alt="" /></a>
          </div>
          <a class="footer4__button button" href="https://ignite.apache.org/docs/latest/index">Start Using Apache Ignite </a>
        </section>
      </div>
      <div class="container footer__bot">
        <p>© 2015 - 2024 <a href="http://www.apache.org/">The Apache Software Foundation.</a></p>
        <p class="pt-1x">Apache, Apache Ignite, the Apache feather and the Apache Ignite logo are either registered trademarks or trademarks of The Apache Software Foundation</p>
        <p class="pt-1x"><a href="http://apache.org/foundation/policies/privacy.html">Privacy Policy</a></p>
      </div>
    </footer>
    <a class="scrollTop" href="#"
      ><svg class="feather feather-chevron-up" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="18 15 12 9 6 15"></polyline></svg
    ></a>
    <script src="/js/vendor/hystmodal/hystmodal.min.js"></script>
    <script src="/js/vendor/smoothscroll.js"></script>
    <script src="/js/vendor/mermaid/mermaid.min.js"></script>
    <script src="/js/main.js?ver=0.9"></script>
  </body>
</html>

"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[4253],{21151:e=>{e.exports=JSON.parse('{"permalink":"/blog/2022/04/28/apache-ignite-2-13-0","editUrl":"https://github.com/apache/ignite-website/tree/master/blog/2022-04-28-apache-ignite-2-13-0.mdx","source":"@site/blog/2022-04-28-apache-ignite-2-13-0.mdx","title":"Apache Ignite 2.13.0: new Apache Calcite-based SQL engine","description":"As of April 26, 2022, Apache Ignite 2.13 has been released. You can directly check the full list of resolved Important JIRA tasks but here let\'s briefly overview some valuable improvements.","date":"2022-04-28T00:00:00.000Z","tags":[{"inline":true,"label":"database","permalink":"/blog/tags/database"},{"inline":true,"label":"ignite2","permalink":"/blog/tags/ignite-2"},{"inline":true,"label":"in-memory","permalink":"/blog/tags/in-memory"},{"inline":true,"label":"open-source","permalink":"/blog/tags/open-source"},{"inline":true,"label":"release","permalink":"/blog/tags/release"},{"inline":true,"label":"archived","permalink":"/blog/tags/archived"}],"readingTime":3.02,"hasTruncateMarker":true,"authors":[{"name":"Nikita Amelchev","title":"Apache Ignite Committer","url":"https://github.com/NSAmelchev","imageURL":"/img/authors/nsamelchev.png","key":"nikita","page":null}],"frontMatter":{"title":"Apache Ignite 2.13.0: new Apache Calcite-based SQL engine","authors":["nikita"],"date":"2022-04-28T00:00:00.000Z","tags":["database","ignite2","in-memory","open-source","release","archived"]},"unlisted":false,"prevItem":{"title":"Dynamic LINQ performance and usability with Ignite.NET and System.Linq.Dynamic","permalink":"/blog/2023/05/22/apache-ignite-net-dynamic-linq"},"nextItem":{"title":"Apache Ignite 2.12.0: CDC, Index Query API, Vulnerabilities Fixes","permalink":"/blog/2022/01/14/apache-ignite-2-12-0"}}')},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var a=i(96540);const t={},s=a.createContext(t);function r(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(s.Provider,{value:n},e.children)}},52085:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var a=i(21151),t=i(74848),s=i(28453);const r={title:"Apache Ignite 2.13.0: new Apache Calcite-based SQL engine",authors:["nikita"],date:new Date("2022-04-28T00:00:00.000Z"),tags:["database","ignite2","in-memory","open-source","release","archived"]},l=void 0,c={authorsImageUrls:[void 0]},o=[{value:"This is a breaking change release: The legacy service grid implementation was removed.",id:"this-is-a-breaking-change-release-the-legacy-service-grid-implementation-was-removed",level:4},{value:"New Apache Calcite-based SQL engine",id:"new-apache-calcite-based-sql-engine",level:3},{value:"Read Repair strategies",id:"read-repair-strategies",level:3},{value:"Array type in Binary Object",id:"array-type-in-binary-object",level:3},{value:"CDC for in-memory caches",id:"cdc-for-in-memory-caches",level:3},{value:"Other improvements and changes",id:"other-improvements-and-changes",level:3},{value:"Anything else?",id:"anything-else",level:3}];function h(e){const n={a:"a",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["As of April 26, 2022, ",(0,t.jsx)(n.a,{href:"https://ignite.apache.org/",children:"Apache Ignite"})," 2.13 has been released. You can directly check the full list of resolved ",(0,t.jsx)(n.a,{href:"https://s.apache.org/x8u49",children:"Important JIRA tasks"})," but here let's briefly overview some valuable improvements."]}),"\n",(0,t.jsx)(n.h4,{id:"this-is-a-breaking-change-release-the-legacy-service-grid-implementation-was-removed",children:"This is a breaking change release: The legacy service grid implementation was removed."}),"\n",(0,t.jsx)(n.h3,{id:"new-apache-calcite-based-sql-engine",children:"New Apache Calcite-based SQL engine"}),"\n",(0,t.jsx)(n.p,{children:"We've implemented a new experimental SQL engine based on Apache Calcite. Now it's possible to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Get rid of some ",(0,t.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/display/IGNITE/IEP-37%3A+New+query+execution+engine#IEP37:Newqueryexecutionengine-Motivation",children:"H2 limitations"}),";"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/display/IGNITE/IEP-37%3A+New+query+execution+engine#IEP37:Newqueryexecutionengine-Implementationdetails",children:"Optimize"})," some query execution."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The current H2-based engine has fundamental limitations. For example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"some queries should be splitted into 2 phases (map subquery and reduce subquery), but some of them cannot be effectively executed in 2 phases."}),"\n",(0,t.jsx)(n.li,{children:"H2 is a third-party database product with not-ASF license."}),"\n",(0,t.jsx)(n.li,{children:"The optimizer and other internal things are not supposed to work in a distributed environment."}),"\n",(0,t.jsx)(n.li,{children:"It's hard to make Ignite-specific changes to the H2 code, patches are often declined."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Apache Calcite is a SQL engine with customizable modules. Requests can be splitted into more than 2 phases."}),"\n",(0,t.jsx)(n.p,{children:"A query engine can be set before query execution. Here is an example for SQL:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"SELECT /*+ QUERY_ENGINE('h2') */ fld FROM table;\n"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"SELECT /*+ QUERY_ENGINE('calcite') */ fld FROM table;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["See JDBC and ODBC examples ",(0,t.jsx)(n.a,{href:"https://github.com/apache/ignite/blob/master/modules/calcite/README.txt",children:"here"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"The new engine requires the ignite-indexing module (which depends on H2) to be included to the classpath to support queries infrastructure."}),"\n",(0,t.jsxs)(n.p,{children:["See more technical details about the new engine in the ",(0,t.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=130028084",children:"IEP-37"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"read-repair-strategies",children:"Read Repair strategies"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://ignite.apache.org/docs/latest/read-repair",children:'"Read Repair"'})," refers to a technique of repairing inconsistencies between primary and backup copies of data during normal read operations. When a specific key (or keys) is read by a user operation, Ignite checks the values for the given key in all backup copies."]}),"\n",(0,t.jsx)(n.p,{children:"We've implemented the new Read Repair strategies as follows:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"LWW (Last Write Wins) - Last write (the newest entry) wins."}),"\n",(0,t.jsx)(n.li,{children:"PRIMARY - Value from the primary node wins."}),"\n",(0,t.jsx)(n.li,{children:"RELATIVE_MAJORITY - The relative majority: a value found more often than any other wins."}),"\n",(0,t.jsx)(n.li,{children:"REMOVE - Inconsistent entries will be removed."}),"\n",(0,t.jsx)(n.li,{children:"CHECK_ONLY - Only check will be performed."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"array-type-in-binary-object",children:"Array type in Binary Object"}),"\n",(0,t.jsx)(n.p,{children:"In previous versions Ignite did not save information about array type. Now it can be stored in a binary object:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cache.put(1, new Person[] {new Person(1), new Person(2)});\n\nPerson[] obj = cache.get(1);\n\nassertEquals(Person[].class, obj.getClass());\n"})}),"\n",(0,t.jsx)(n.p,{children:"The feature is disabled by default due to compatibility issues. Set the IGNITE_USE_BINARY_ARRAYS system property to true to enable it."}),"\n",(0,t.jsx)(n.h3,{id:"cdc-for-in-memory-caches",children:"CDC for in-memory caches"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://ignite.apache.org/docs/latest/persistence/change-data-capture",children:"Change Data Capture"})," now can be configured for in-memory caches. From now on, only CDC needed records for such caches will be logged to WAL."]}),"\n",(0,t.jsx)(n.h3,{id:"other-improvements-and-changes",children:"Other improvements and changes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The C++ thin client implemented continuous queries and asynchronous network events handling. See the updated thin clients features list ",(0,t.jsx)(n.a,{href:"https://cwiki.apache.org/confluence/display/IGNITE/Thin+clients+features",children:"here"}),";"]}),"\n",(0,t.jsxs)(n.li,{children:["Implemented NUMA-aware ",(0,t.jsx)(n.a,{href:"https://github.com/apache/ignite/tree/master/modules/numa-allocator",children:"allocator"})," for data regions;"]}),"\n",(0,t.jsx)(n.li,{children:"Ignite maven BOM;"}),"\n",(0,t.jsx)(n.li,{children:"Removed the legacy service grid implementation;"}),"\n",(0,t.jsx)(n.li,{children:"100+ small improvements and bug fixes."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"anything-else",children:"Anything else?"}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"https://ignite.apache.org/releases/ignite2/2.13.0/release_notes.html",children:"release notes"})," to learn about all of the new features and improvements."]}),"\n",(0,t.jsx)(n.p,{children:"Reach out to us on the community user list for more questions, details, and feedback."}),"\n",(0,t.jsx)(n.p,{children:"Sincerely yours,\nIgnite contributors and committers"})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2272],{28453:(e,r,i)=>{i.d(r,{R:()=>o,x:()=>s});var n=i(96540);const t={},a=n.createContext(t);function o(e){const r=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(a.Provider,{value:r},e.children)}},40582:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"api-reference/native-clients/java/criteria-api","title":"Criteria API","description":"The Criteria API builds type-safe query predicates for table operations. Applications construct queries using Java code instead of string-based SQL. This approach provides compile-time validation and IDE support for query construction.","source":"@site/docs/api-reference/native-clients/java/criteria-api.md","sourceDirName":"api-reference/native-clients/java","slug":"/api-reference/native-clients/java/criteria-api","permalink":"/suggested-site/docs/3.1.0/api-reference/native-clients/java/criteria-api","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ignite-3/tree/main/docs/docs/api-reference/native-clients/java/criteria-api.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"title":"Criteria API","id":"criteria-api","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Catalog API","permalink":"/suggested-site/docs/3.1.0/api-reference/native-clients/java/catalog-api"},"next":{"title":"Network API","permalink":"/suggested-site/docs/3.1.0/api-reference/native-clients/java/network-api"}}');var t=i(74848),a=i(28453);const o={title:"Criteria API",id:"criteria-api",sidebar_position:9},s="Criteria API",l={},c=[{value:"Key Concepts",id:"key-concepts",level:2},{value:"Basic Criteria Queries",id:"basic-criteria-queries",level:2},{value:"Comparison Conditions",id:"comparison-conditions",level:2},{value:"Null Checks",id:"null-checks",level:2},{value:"IN Conditions",id:"in-conditions",level:2},{value:"AND Conditions",id:"and-conditions",level:2},{value:"OR Conditions",id:"or-conditions",level:2},{value:"Complex Predicates",id:"complex-predicates",level:2},{value:"Typed Criteria Queries",id:"typed-criteria-queries",level:2},{value:"Key-Value View Queries",id:"key-value-view-queries",level:2},{value:"Query Options",id:"query-options",level:2},{value:"Asynchronous Queries",id:"asynchronous-queries",level:2},{value:"Transaction Integration",id:"transaction-integration",level:2},{value:"Range Queries",id:"range-queries",level:2},{value:"Multiple Column Conditions",id:"multiple-column-conditions",level:2},{value:"Cursor Iteration",id:"cursor-iteration",level:2},{value:"Reference",id:"reference",level:2},{value:"Criteria Factory Methods",id:"criteria-factory-methods",level:3},{value:"Condition Factory Methods",id:"condition-factory-methods",level:3},{value:"CriteriaQuerySource Methods",id:"criteriaquerysource-methods",level:3},{value:"CriteriaQueryOptions Configuration",id:"criteriaqueryoptions-configuration",level:3},{value:"Cursor Operations",id:"cursor-operations",level:3}];function u(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"criteria-api",children:"Criteria API"})}),"\n",(0,t.jsx)(r.p,{children:"The Criteria API builds type-safe query predicates for table operations. Applications construct queries using Java code instead of string-based SQL. This approach provides compile-time validation and IDE support for query construction."}),"\n",(0,t.jsx)(r.h2,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,t.jsx)(r.p,{children:"Criteria queries filter table data using predicates. Predicates combine column conditions with logical operators. The API supports common comparison operations including equality, ranges, null checks, and pattern matching."}),"\n",(0,t.jsx)(r.p,{children:"Both RecordView and KeyValueView implement CriteriaQuerySource, enabling criteria queries on any view type. Results stream through cursors that must be closed to release resources."}),"\n",(0,t.jsx)(r.h2,{id:"basic-criteria-queries",children:"Basic Criteria Queries"}),"\n",(0,t.jsx)(r.p,{children:"Query with simple equality conditions:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'RecordView<Tuple> view = table.recordView();\n\nCriteria criteria = Criteria.columnValue(\n    "age",\n    Condition.equalTo(30)\n);\n\ntry (Cursor<Tuple> cursor = view.query(null, criteria, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Always close cursors to free server resources."}),"\n",(0,t.jsx)(r.h2,{id:"comparison-conditions",children:"Comparison Conditions"}),"\n",(0,t.jsx)(r.p,{children:"Use various comparison operators:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'// Greater than\nCriteria criteria1 = Criteria.columnValue("age", Condition.greaterThan(25));\n\n// Greater or equal\nCriteria criteria2 = Criteria.columnValue("age", Condition.greaterThanOrEqualTo(25));\n\n// Less than\nCriteria criteria3 = Criteria.columnValue("age", Condition.lessThan(65));\n\n// Less or equal\nCriteria criteria4 = Criteria.columnValue("age", Condition.lessThanOrEqualTo(65));\n\n// Not equal\nCriteria criteria5 = Criteria.columnValue("status", Condition.notEqualTo("inactive"));\n'})}),"\n",(0,t.jsx)(r.h2,{id:"null-checks",children:"Null Checks"}),"\n",(0,t.jsx)(r.p,{children:"Check for null or non-null values:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'// IS NULL\nCriteria nullCriteria = Criteria.columnValue("middleName", Condition.nullValue());\n\ntry (Cursor<Tuple> cursor = view.query(null, nullCriteria, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n\n// IS NOT NULL\nCriteria notNullCriteria = Criteria.columnValue("email", Condition.notNullValue());\n'})}),"\n",(0,t.jsx)(r.h2,{id:"in-conditions",children:"IN Conditions"}),"\n",(0,t.jsx)(r.p,{children:"Match against multiple values:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria criteria = Criteria.columnValue(\n    "category",\n    Condition.in("electronics", "appliances", "gadgets")\n);\n\ntry (Cursor<Tuple> cursor = view.query(null, criteria, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n\n// NOT IN\nCriteria notInCriteria = Criteria.columnValue(\n    "status",\n    Condition.notIn("deleted", "archived")\n);\n'})}),"\n",(0,t.jsx)(r.h2,{id:"and-conditions",children:"AND Conditions"}),"\n",(0,t.jsx)(r.p,{children:"Combine multiple conditions with AND:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria ageCriteria = Criteria.columnValue("age", Condition.greaterThan(25));\nCriteria statusCriteria = Criteria.columnValue("status", Condition.equalTo("active"));\n\nCriteria combined = Criteria.and(ageCriteria, statusCriteria);\n\ntry (Cursor<Tuple> cursor = view.query(null, combined, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"All conditions must match for records to satisfy AND criteria."}),"\n",(0,t.jsx)(r.h2,{id:"or-conditions",children:"OR Conditions"}),"\n",(0,t.jsx)(r.p,{children:"Combine conditions with OR:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria junior = Criteria.columnValue("age", Condition.lessThan(30));\nCriteria senior = Criteria.columnValue("age", Condition.greaterThan(60));\n\nCriteria combined = Criteria.or(junior, senior);\n\ntry (Cursor<Tuple> cursor = view.query(null, combined, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name") + ": " +\n            record.intValue("age"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Records matching any condition satisfy OR criteria."}),"\n",(0,t.jsx)(r.h2,{id:"complex-predicates",children:"Complex Predicates"}),"\n",(0,t.jsx)(r.p,{children:"Nest AND and OR conditions:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria youngActive = Criteria.and(\n    Criteria.columnValue("age", Condition.lessThan(30)),\n    Criteria.columnValue("status", Condition.equalTo("active"))\n);\n\nCriteria seniorActive = Criteria.and(\n    Criteria.columnValue("age", Condition.greaterThan(60)),\n    Criteria.columnValue("status", Condition.equalTo("active"))\n);\n\nCriteria combined = Criteria.or(youngActive, seniorActive);\n\ntry (Cursor<Tuple> cursor = view.query(null, combined, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"typed-criteria-queries",children:"Typed Criteria Queries"}),"\n",(0,t.jsx)(r.p,{children:"Query typed views with criteria:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class User {\n    public int id;\n    public String name;\n    public int age;\n    public String status;\n}\n\nRecordView<User> view = table.recordView(User.class);\n\nCriteria criteria = Criteria.and(\n    Criteria.columnValue("age", Condition.greaterThan(25)),\n    Criteria.columnValue("status", Condition.equalTo("active"))\n);\n\ntry (Cursor<User> cursor = view.query(null, criteria, null, null)) {\n    for (User user : cursor) {\n        System.out.println(user.name + " is " + user.age + " years old");\n    }\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"key-value-view-queries",children:"Key-Value View Queries"}),"\n",(0,t.jsx)(r.p,{children:"Query key-value views with criteria:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'KeyValueView<Tuple, Tuple> view = table.keyValueView();\n\nCriteria criteria = Criteria.columnValue("category", Condition.equalTo("electronics"));\n\ntry (Cursor<Entry<Tuple, Tuple>> cursor = view.query(null, criteria, null, null)) {\n    for (Entry<Tuple, Tuple> entry : cursor) {\n        Tuple key = entry.getKey();\n        Tuple value = entry.getValue();\n        System.out.println("Product " + key.intValue("id") + ": " +\n            value.stringValue("name"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Key-value queries return Entry instances containing keys and values."}),"\n",(0,t.jsx)(r.h2,{id:"query-options",children:"Query Options"}),"\n",(0,t.jsx)(r.p,{children:"Configure query behavior:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:"CriteriaQueryOptions options = CriteriaQueryOptions.builder()\n    .pageSize(100)\n    .build();\n\ntry (Cursor<Tuple> cursor = view.query(null, criteria, null, options)) {\n    for (Tuple record : cursor) {\n        // Process records\n    }\n}\n"})}),"\n",(0,t.jsx)(r.p,{children:"Query options control result pagination and fetching behavior."}),"\n",(0,t.jsx)(r.h2,{id:"asynchronous-queries",children:"Asynchronous Queries"}),"\n",(0,t.jsx)(r.p,{children:"Execute criteria queries asynchronously:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria criteria = Criteria.columnValue("age", Condition.greaterThan(30));\n\nCompletableFuture<AsyncCursor<Tuple>> cursorFuture =\n    view.queryAsync(null, criteria, null, null);\n\ncursorFuture.thenAccept(cursor -> {\n    for (Tuple record : cursor.currentPage()) {\n        System.out.println(record.stringValue("name"));\n    }\n    cursor.closeAsync();\n});\n'})}),"\n",(0,t.jsx)(r.p,{children:"Asynchronous queries return immediately without blocking. Use currentPage() to access results and closeAsync() to release resources."}),"\n",(0,t.jsx)(r.h2,{id:"transaction-integration",children:"Transaction Integration"}),"\n",(0,t.jsx)(r.p,{children:"Execute queries within transactions:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'ignite.transactions().runInTransaction(tx -> {\n    RecordView<Tuple> view = table.recordView();\n\n    Criteria criteria = Criteria.columnValue("balance", Condition.greaterThan(1000));\n\n    try (Cursor<Tuple> cursor = view.query(tx, criteria, null, null)) {\n        for (Tuple record : cursor) {\n            int balance = record.intValue("balance");\n            record.set("balance", balance * 1.05);\n            view.upsert(tx, record);\n        }\n    }\n});\n'})}),"\n",(0,t.jsx)(r.p,{children:"Queries within transactions see consistent data snapshots."}),"\n",(0,t.jsx)(r.h2,{id:"range-queries",children:"Range Queries"}),"\n",(0,t.jsx)(r.p,{children:"Combine conditions for range queries:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria rangeCriteria = Criteria.and(\n    Criteria.columnValue("price", Condition.greaterThanOrEqualTo(10.0)),\n    Criteria.columnValue("price", Condition.lessThanOrEqualTo(50.0))\n);\n\ntry (Cursor<Tuple> cursor = view.query(null, rangeCriteria, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name") + ": $" +\n            record.doubleValue("price"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"multiple-column-conditions",children:"Multiple Column Conditions"}),"\n",(0,t.jsx)(r.p,{children:"Query on multiple columns:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria criteria = Criteria.and(\n    Criteria.columnValue("category", Condition.equalTo("electronics")),\n    Criteria.columnValue("inStock", Condition.equalTo(true)),\n    Criteria.columnValue("price", Condition.lessThan(1000.0)),\n    Criteria.columnValue("rating", Condition.greaterThanOrEqualTo(4.0))\n);\n\ntry (Cursor<Tuple> cursor = view.query(null, criteria, null, null)) {\n    for (Tuple record : cursor) {\n        System.out.println(record.stringValue("name"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"cursor-iteration",children:"Cursor Iteration"}),"\n",(0,t.jsx)(r.p,{children:"Process cursor results:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'Criteria criteria = Criteria.columnValue("status", Condition.equalTo("pending"));\n\ntry (Cursor<Tuple> cursor = view.query(null, criteria, null, null)) {\n    while (cursor.hasNext()) {\n        Tuple record = cursor.next();\n        System.out.println(record.stringValue("orderId"));\n    }\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"Cursors implement Iterator for standard iteration patterns."}),"\n",(0,t.jsx)(r.h2,{id:"reference",children:"Reference"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["Criteria builder: ",(0,t.jsx)(r.code,{children:"org.apache.ignite.table.criteria.Criteria"})]}),"\n",(0,t.jsxs)(r.li,{children:["Conditions: ",(0,t.jsx)(r.code,{children:"org.apache.ignite.table.criteria.Condition"})]}),"\n",(0,t.jsxs)(r.li,{children:["Query source: ",(0,t.jsx)(r.code,{children:"org.apache.ignite.table.criteria.CriteriaQuerySource<R>"})]}),"\n",(0,t.jsxs)(r.li,{children:["Query options: ",(0,t.jsx)(r.code,{children:"org.apache.ignite.table.criteria.CriteriaQueryOptions"})]}),"\n",(0,t.jsxs)(r.li,{children:["Column reference: ",(0,t.jsx)(r.code,{children:"org.apache.ignite.table.criteria.Column"})]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"criteria-factory-methods",children:"Criteria Factory Methods"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Criteria columnValue(String, Condition)"})," - Create column condition"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Criteria and(Criteria...)"})," - Combine with AND"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Criteria or(Criteria...)"})," - Combine with OR"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"condition-factory-methods",children:"Condition Factory Methods"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition equalTo(Object)"})," - Equality comparison"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition notEqualTo(Object)"})," - Inequality comparison"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition greaterThan(Object)"})," - Greater than"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition greaterThanOrEqualTo(Object)"})," - Greater or equal"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition lessThan(Object)"})," - Less than"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition lessThanOrEqualTo(Object)"})," - Less or equal"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition in(Object...)"})," - IN clause"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition notIn(Object...)"})," - NOT IN clause"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition nullValue()"})," - IS NULL"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"static Condition notNullValue()"})," - IS NOT NULL"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"criteriaquerysource-methods",children:"CriteriaQuerySource Methods"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"Cursor<R> query(Transaction, Criteria, String, CriteriaQueryOptions)"})," - Execute query"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"CompletableFuture<AsyncCursor<R>> queryAsync(Transaction, Criteria, String, CriteriaQueryOptions)"})," - Async query"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"criteriaqueryoptions-configuration",children:"CriteriaQueryOptions Configuration"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"pageSize(int)"})," - Set result page size"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"build()"})," - Build options"]}),"\n"]}),"\n",(0,t.jsx)(r.h3,{id:"cursor-operations",children:"Cursor Operations"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"boolean hasNext()"})," - Check for more results"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"R next()"})," - Get next result"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"void close()"})," - Close cursor and release resources"]}),"\n"]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);
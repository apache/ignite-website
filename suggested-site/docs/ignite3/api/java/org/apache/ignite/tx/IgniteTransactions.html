<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>IgniteTransactions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.apache.ignite.tx, interface: IgniteTransactions">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.ignite.tx</a></div>
<h1 title="Interface IgniteTransactions" class="title">Interface IgniteTransactions</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">IgniteTransactions</span></div>
<div class="block">The Ignite Transactions facade that supports distributed transactions when working with tables.
 This interface provides the ability to perform transactions in both synchronous and asynchronous ways.
 <pre><code>
     // Synchronous transactional API to update the balance.
     client.transactions().runInTransaction(tx -&gt; {
          Account account = accounts.get(tx, key);

          account.balance += 200.0d;

          accounts.put(tx, key, account);
      });
 </code></pre>
 There is no need to call <a href="Transaction.html#commit()"><code>Transaction.commit()</code></a> explicitly.
 The transaction is automatically committed when the closure is successfully executed.

 <pre><code>
     // Using asynchronous transactional API to update the balance.
     CompletableFuture&lt;Void&gt; fut = client.transactions().beginAsync().thenCompose(tx -&gt;
             accounts
                 .getAsync(tx, key)
                 .thenCompose(account -&gt; {
                     account.balance += 200.0d;

                     return accounts.putAsync(tx, key, account);
                 })
                 .thenCompose(ignored -&gt; tx.commitAsync())
     );

     // Wait for completion.
     fut.join();
 </code></pre></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../table/Table.html" title="interface in org.apache.ignite.table"><code>Table</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#begin()" class="member-name-link">begin</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Begins a transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#begin(org.apache.ignite.tx.TransactionOptions)" class="member-name-link">begin</a><wbr>(@Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Begins a transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#beginAsync()" class="member-name-link">beginAsync</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Begins a transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#beginAsync(org.apache.ignite.tx.TransactionOptions)" class="member-name-link">beginAsync</a><wbr>(@Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Begins an asynchronous transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransaction(java.util.function.Consumer)" class="member-name-link">runInTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;&nbsp;clo)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransaction(java.util.function.Consumer,org.apache.ignite.tx.TransactionOptions)" class="member-name-link">runInTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;&nbsp;clo,
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default &lt;T&gt;&nbsp;T</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransaction(java.util.function.Function)" class="member-name-link">runInTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr>T&gt;&nbsp;clo)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction and returns a result.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default &lt;T&gt;&nbsp;T</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransaction(java.util.function.Function,org.apache.ignite.tx.TransactionOptions)" class="member-name-link">runInTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr>T&gt;&nbsp;clo,
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction and returns a result.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default &lt;T&gt;&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransactionAsync(java.util.function.Function)" class="member-name-link">runInTransactionAsync</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;&gt;&nbsp;clo)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction asynchronously.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default &lt;T&gt;&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#runInTransactionAsync(java.util.function.Function,org.apache.ignite.tx.TransactionOptions)" class="member-name-link">runInTransactionAsync</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;&gt;&nbsp;clo,
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Executes a closure within a transaction asynchronously.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="begin()">
<h3>begin</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a></span>&nbsp;<span class="element-name">begin</span>()</div>
<div class="block">Begins a transaction.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The started transaction.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="begin(org.apache.ignite.tx.TransactionOptions)">
<h3>begin</h3>
<div class="member-signature"><span class="return-type"><a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a></span>&nbsp;<span class="element-name">begin</span><wbr><span class="parameters">(@Nullable
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</span></div>
<div class="block">Begins a transaction.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - Transaction options.</dd>
<dt>Returns:</dt>
<dd>The started transaction.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="beginAsync()">
<h3>beginAsync</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;</span>&nbsp;<span class="element-name">beginAsync</span>()</div>
<div class="block">Begins a transaction.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Started transaction.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="beginAsync(org.apache.ignite.tx.TransactionOptions)">
<h3>beginAsync</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;</span>&nbsp;<span class="element-name">beginAsync</span><wbr><span class="parameters">(@Nullable
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</span></div>
<div class="block">Begins an asynchronous transaction.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - Transaction options.</dd>
<dt>Returns:</dt>
<dd>The future holding the started transaction.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransaction(java.util.function.Consumer)">
<h3>runInTransaction</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runInTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;&nbsp;clo)</span>
                       throws <span class="exceptions"><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></span></div>
<div class="block">Executes a closure within a transaction.

 <p>This method expects that all transaction operations are completed before the closure returns. The safest way to achieve that is
 to use synchronous table API.

 <p>Take care then using the asynchronous operations inside the closure. For example, the following snippet is <b>incorrect</b>,
 because the last operation goes out of the scope of the closure unfinished:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     var key = Tuple.create().set("accountId", 1);
     Tuple acc = view.get(tx, key);
     view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100));
 });
 </code>
 </pre>

 <p>The <b>correct</b> variant will be:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(acc -&gt;
         view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))).join();
 });
 </code>
 </pre>

 <p>If the closure is executed normally (no exceptions) the transaction is automatically committed. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>clo</code> - The closure.</dd>
<dt>Throws:</dt>
<dd><code><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></code> - If a transaction can't be finished successfully.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransaction(java.util.function.Consumer,org.apache.ignite.tx.TransactionOptions)">
<h3>runInTransaction</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runInTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Consumer.html" title="class or interface in java.util.function" class="external-link">Consumer</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>&gt;&nbsp;clo,
 @Nullable
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</span>
                       throws <span class="exceptions"><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></span></div>
<div class="block">Executes a closure within a transaction.

 <p>This method expects that all transaction operations are completed before the closure returns. The safest way to achieve that is
 to use synchronous table API.

 <p>Take care then using the asynchronous operations inside the closure. For example, the following snippet is <b>incorrect</b>,
 because the last operation goes out of the scope of the closure unfinished:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     var key = Tuple.create().set("accountId", 1);
     Tuple acc = view.get(tx, key);
     view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100));
 });
 </code>
 </pre>

 <p>The <b>correct</b> variant will be:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(acc -&gt;
         view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))).join();
 });
 </code>
 </pre>

 <p>If the closure is executed normally (no exceptions) the transaction is automatically committed. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>options</code> - Transaction options.</dd>
<dd><code>clo</code> - The closure.</dd>
<dt>Throws:</dt>
<dd><code><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></code> - If a transaction can't be finished successfully.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransaction(java.util.function.Function)">
<h3>runInTransaction</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type">T</span>&nbsp;<span class="element-name">runInTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr>T&gt;&nbsp;clo)</span>
                        throws <span class="exceptions"><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></span></div>
<div class="block">Executes a closure within a transaction and returns a result.

 <p>This method expects that all transaction operations are completed before the closure returns. The safest way to achieve that is
 to use synchronous table API.

 <p>Take care then using the asynchronous operations inside the closure. For example, the following snippet is <b>incorrect</b>,
 because the last operation goes out of the scope of the closure unfinished:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     var key = Tuple.create().set("accountId", 1);
     Tuple acc = view.get(tx, key);
     view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100));
 });
 </code>
 </pre>

 <p>The <b>correct</b> variant will be:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(acc -&gt;
         view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))).join();
 });
 </code>
 </pre>

 <p>If the closure is executed normally (no exceptions) the transaction is automatically committed. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Closure result type.</dd>
<dt>Parameters:</dt>
<dd><code>clo</code> - Closure.</dd>
<dt>Returns:</dt>
<dd>Result.</dd>
<dt>Throws:</dt>
<dd><code><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></code> - If a transaction can't be finished successfully.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransaction(java.util.function.Function,org.apache.ignite.tx.TransactionOptions)">
<h3>runInTransaction</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type">T</span>&nbsp;<span class="element-name">runInTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr>T&gt;&nbsp;clo,
 @Nullable
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</span>
                        throws <span class="exceptions"><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></span></div>
<div class="block">Executes a closure within a transaction and returns a result.

 <p>This method expects that all transaction operations are completed before the closure returns. The safest way to achieve that is
 to use synchronous table API.

 <p>Take care then using the asynchronous operations inside the closure. For example, the following snippet is <b>incorrect</b>,
 because the last operation goes out of the scope of the closure unfinished:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     var key = Tuple.create().set("accountId", 1);
     Tuple acc = view.get(tx, key);
     view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100));
 });
 </code>
 </pre>

 <p>The <b>correct</b> variant will be:
 <pre>
 <code>
 igniteTransactions.runInTransaction(tx -&gt; {
     view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(acc -&gt;
         view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))).join();
 });
 </code>
 </pre>

 <p>If the closure is executed normally (no exceptions) the transaction is automatically committed. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Closure result type.</dd>
<dt>Parameters:</dt>
<dd><code>clo</code> - The closure.</dd>
<dd><code>options</code> - Transaction options.</dd>
<dt>Returns:</dt>
<dd>The result.</dd>
<dt>Throws:</dt>
<dd><code><a href="TransactionException.html" title="class in org.apache.ignite.tx">TransactionException</a></code> - If a transaction can't be finished successfully.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransactionAsync(java.util.function.Function)">
<h3>runInTransactionAsync</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;</span>&nbsp;<span class="element-name">runInTransactionAsync</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;&gt;&nbsp;clo)</span></div>
<div class="block">Executes a closure within a transaction asynchronously.

 <p>A returned future must be the last in the asynchronous chain. This means all transaction operations happen before the future
 is completed.

 <p>Consider the example:
 <pre>
 <code>
     igniteTransactions.runInTransactionAsync(tx -&gt; view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(
         acc -&gt; view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))));
 </code>
 </pre>

 <p>If the asynchronous chain resulted with no exception, the commitAsync will be automatically called. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Closure result type.</dd>
<dt>Parameters:</dt>
<dd><code>clo</code> - The closure.</dd>
<dt>Returns:</dt>
<dd>The result.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runInTransactionAsync(java.util.function.Function,org.apache.ignite.tx.TransactionOptions)">
<h3>runInTransactionAsync</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;</span>&nbsp;<span class="element-name">runInTransactionAsync</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Function.html" title="class or interface in java.util.function" class="external-link">Function</a>&lt;<a href="Transaction.html" title="interface in org.apache.ignite.tx">Transaction</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html" title="class or interface in java.util.concurrent" class="external-link">CompletableFuture</a>&lt;T&gt;&gt;&nbsp;clo,
 @Nullable
 @Nullable <a href="TransactionOptions.html" title="class in org.apache.ignite.tx">TransactionOptions</a>&nbsp;options)</span></div>
<div class="block">Executes a closure within a transaction asynchronously.

 <p>A returned future must be the last in the asynchronous chain. This means all transaction operations happen before the future
 is completed.

 <p>Consider the example:
 <pre>
 <code>
     igniteTransactions.runInTransactionAsync(tx -&gt; view.getAsync(tx, Tuple.create().set("accountId", 1)).thenCompose(
         acc -&gt; view.upsertAsync(tx, Tuple.create().set("accountId", 1).set("balance", acc.longValue("balance") + 100))));
 </code>
 </pre>

 <p>If the asynchronous chain resulted with no exception, the commitAsync will be automatically called. In a case of exception, the
 closure will be retried automatically within the transaction timeout, so it must be pure function. If the transaction timeout
 expires before the closure completes successfully and the transaction has been committed, the transaction is rolled back instead.
 <br>
 The closure is retried only in cases of "expected" exceptions, like <code>LockException</code>, <code>TimeoutException</code>,
 exceptions related to the primary replica change, etc.</div>
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - Closure result type.</dd>
<dt>Parameters:</dt>
<dd><code>clo</code> - The closure.</dd>
<dd><code>options</code> - Transaction options.</dd>
<dt>Returns:</dt>
<dd>The result.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><table width="100%" border="0" cellspacing=0 cellpadding=0 style="padding: 5px"><tr><td><table style="padding-left: 0; margin: 0"><tbody style="padding: 0; margin: 0"><tr style="padding: 0; margin: 0"><td><a target=_blank href="https://ignite.apache.org"><nobr>2025 Copyright &#169; Apache Software Foundation</nobr></a></td></tr></tbody></table></td><td width="100%" align="right" valign="center"><a href="https://twitter.com/ApacheIgnite" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @ApacheIgnite</a></td></tr><tr><td colspan="2" valign="top" align="left"><table style="padding-left: 0; margin: 0"><tbody style="padding: 0; margin: 0"><tr style="padding: 0; margin: 0"><td><b>Ignite Database and Caching Platform</b></td><td>:&nbsp;&nbsp;ver. <strong>3.1.0-SNAPSHOT</strong></td></tr><tr style="padding: 0; margin: 0"><td><b>Release Date</b></td><td>:&nbsp;&nbsp;2025-10-16</td></tr></tbody></table></td></tr></table></small></p>
</footer>
</div>
</div>
</body>
</html>

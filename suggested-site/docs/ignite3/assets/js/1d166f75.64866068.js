"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[965],{28453:(t,e,i)=>{i.d(e,{R:()=>r,x:()=>a});var s=i(96540);const n={},h=s.createContext(n);function r(t){const e=s.useContext(h);return s.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:r(t.components),s.createElement(h.Provider,{value:e},t.children)}},63367:(t,e,i)=>{i.d(e,{A:()=>V});var s=i(96540);const n={},h=!1,r=8,a=10,o="railroad-diagram",d=!0,l="center",c=8.5,w=7;class m{constructor(t,e,i){this.children=i||[],this.tagName=t,this.attrs=O(e,{})}format(t,e,i){}addTo(t){if(t instanceof m)return t.children.push(this),this;var e=this.toSVG();return t.appendChild(e),e}toSVG(){var t=function(t,e,i){e=e||{},i=i||"";var s=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)"xlink:href"===n?s.setAttributeNS("http://www.w3.org/1999/xlink","href",e[n]):s.setAttribute(n,e[n]);return s.textContent=i,s}(this.tagName,this.attrs);return"string"==typeof this.children?t.textContent=this.children:this.children.forEach(function(e){t.appendChild(e.toSVG())}),t}toString(){var t="<"+this.tagName,e="g"==this.tagName||"svg"==this.tagName;for(var i in this.attrs)t+=" "+i+'="'+(this.attrs[i]+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")+'"';return t+=">",e&&(t+="\n"),"string"==typeof this.children?t+=this.children.replace(/[*_\`\[\]<&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}):this.children.forEach(function(e){t+=e}),t+="</"+this.tagName+">\n"}walk(t){t(this)}}class u extends m{constructor(t,e){super("path"),this.attrs.d="M"+t+" "+e}m(t,e){return this.attrs.d+="m"+t+" "+e,this}h(t){return this.attrs.d+="h"+t,this}right(t){return this.h(Math.max(0,t))}left(t){return this.h(-Math.max(0,t))}v(t){return this.attrs.d+="v"+t,this}down(t){return this.v(Math.max(0,t))}up(t){return this.v(-Math.max(0,t))}arc(t){var e,i=a,s=a;return"e"!=t[0]&&"w"!=t[1]||(i*=-1),"s"!=t[0]&&"n"!=t[1]||(s*=-1),e="ne"==t||"es"==t||"sw"==t||"wn"==t?1:0,this.attrs.d+="a"+a+" "+a+" 0 0 "+e+" "+i+" "+s,this}arc_8(t,e){const i=a,s=1/Math.sqrt(2)*i,n=i-s;let h="a "+i+" "+i+" 0 0 "+("cw"==e?"1":"0")+" ";const r=t+e;return h+=("ncw"==r?[s,n]:"necw"==r?[n,s]:"ecw"==r?[-n,s]:"secw"==r?[-s,n]:"scw"==r?[-s,-n]:"swcw"==r?[-n,-s]:"wcw"==r?[n,-s]:"nwcw"==r?[s,-n]:"nccw"==r?[-s,n]:"nwccw"==r?[-n,s]:"wccw"==r?[n,s]:"swccw"==r?[s,n]:"sccw"==r?[s,-n]:"seccw"==r?[n,-s]:"eccw"==r?[-n,-s]:"neccw"==r?[-s,-n]:null).join(" "),this.attrs.d+=h,this}l(t,e){return this.attrs.d+="l"+t+" "+e,this}format(){return this.attrs.d+="h.5",this}}class p extends m{constructor(t,e,i,s){super(t,i,s),this.items=e.map(L)}walk(t){t(this),this.items.forEach(e=>e.walk(t))}}class g extends p{constructor(...t){super("svg",t,{class:o}),this.items[0]instanceof y||this.items.unshift(new y),this.items[this.items.length-1]instanceof P||this.items.push(new P),this.up=this.down=this.height=this.width=0;for(const e of this.items)this.width+=e.width+(e.needsSpace?20:0),this.up=Math.max(this.up,e.up-this.height),this.height+=e.height,this.down=Math.max(this.down-e.height,e.down);this.formatted=!1}format(t,e,i,s){t=O(t,20),e=O(e,t,20),i=O(i,t,20);var n=s=O(s,e,20),h=t;h+=this.up;for(var r=new m("g",d?{transform:"translate(.5 .5)"}:{}),a=0;a<this.items.length;a++){var o=this.items[a];o.needsSpace&&(new u(n,h).h(10).addTo(r),n+=10),o.format(n,h,o.width).addTo(r),n+=o.width,h+=o.height,o.needsSpace&&(new u(n,h).h(10).addTo(r),n+=10)}return this.attrs.width=this.width+s+e,this.attrs.height=this.up+this.height+this.down+t+i,this.attrs.viewBox="0 0 "+this.attrs.width+" "+this.attrs.height,r.addTo(this),this.formatted=!0,this}addTo(t){if(!t){var e=document.getElementsByTagName("script");t=(e=e[e.length-1]).parentNode}return super.addTo.call(this,t)}toSVG(){return this.formatted||this.format(),super.toSVG.call(this)}toString(){return this.formatted||this.format(),super.toString.call(this)}toStandalone(t){this.formatted||this.format();const e=new m("style",{},t||"\n\tsvg {\n\t\tbackground-color: hsl(30,20%,95%);\n\t}\n\tpath {\n\t\tstroke-width: 3;\n\t\tstroke: black;\n\t\tfill: rgba(0,0,0,0);\n\t}\n\ttext {\n\t\tfont: bold 14px monospace;\n\t\ttext-anchor: middle;\n\t\twhite-space: pre;\n\t}\n\ttext.diagram-text {\n\t\tfont-size: 12px;\n\t}\n\ttext.diagram-arrow {\n\t\tfont-size: 16px;\n\t}\n\ttext.label {\n\t\ttext-anchor: start;\n\t}\n\ttext.comment {\n\t\tfont: italic 12px monospace;\n\t}\n\tg.non-terminal text {\n\t\t/*font-style: italic;*/\n\t}\n\trect {\n\t\tstroke-width: 3;\n\t\tstroke: black;\n\t\tfill: hsl(120,100%,90%);\n\t}\n\trect.group-box {\n\t\tstroke: gray;\n\t\tstroke-dasharray: 10 5;\n\t\tfill: none;\n\t}\n\tpath.diagram-text {\n\t\tstroke-width: 3;\n\t\tstroke: black;\n\t\tfill: white;\n\t\tcursor: help;\n\t}\n\tg.diagram-text:hover path.diagram-text {\n\t\tfill: #eee;\n\t}");this.children.push(e),this.attrs.xmlns="http://www.w3.org/2000/svg",this.attrs["xmlns:xlink"]="http://www.w3.org/1999/xlink";const i=super.toString.call(this);return this.children.pop(),delete this.attrs.xmlns,i}}n.Diagram=(...t)=>new g(...t);class x extends m{constructor(...t){var e=new g(...t);return e.items[0]=new y({type:"complex"}),e.items[e.items.length-1]=new P({type:"complex"}),e}}n.ComplexDiagram=(...t)=>new x(...t);class f extends p{constructor(...t){super("g",t);this.items.length;this.needsSpace=!0,this.up=this.down=this.height=this.width=0;for(var e=0;e<this.items.length;e++){var i=this.items[e];this.width+=i.width+(i.needsSpace?20:0),this.up=Math.max(this.up,i.up-this.height),this.height+=i.height,this.down=Math.max(this.down-i.height,i.down)}this.items[0].needsSpace&&(this.width-=10),this.items[this.items.length-1].needsSpace&&(this.width-=10),h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="sequence")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0];for(var n=0;n<this.items.length;n++){var h=this.items[n];h.needsSpace&&n>0&&(new u(t,e).h(10).addTo(this),t+=10),h.format(t,e,h.width).addTo(this),t+=h.width,e+=h.height,h.needsSpace&&n<this.items.length-1&&(new u(t,e).h(10).addTo(this),t+=10)}return this}}n.Sequence=(...t)=>new f(...t);class T extends p{constructor(...t){if(super("g",t),0===t.length)throw new RangeError("Stack() must have at least one child.");this.width=Math.max.apply(null,this.items.map(function(t){return t.width+(t.needsSpace?20:0)})),this.items.length>1&&(this.width+=2*a),this.needsSpace=!0,this.up=this.items[0].up,this.down=this.items[this.items.length-1].down,this.height=0;for(var e=this.items.length-1,i=0;i<this.items.length;i++){var s=this.items[i];this.height+=s.height,i>0&&(this.height+=Math.max(2*a,s.up+r)),i<e&&(this.height+=Math.max(2*a,s.down+r))}h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="stack")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this);var n=t+=s[0];this.items.length>1&&(new u(t,e).h(a).addTo(this),t+=a);for(var h=0;h<this.items.length;h++){var o=this.items[h],d=this.width-(this.items.length>1?2*a:0);o.format(t,e,d).addTo(this),t+=d,e+=o.height,h!==this.items.length-1&&(new u(t,e).arc("ne").down(Math.max(0,o.down+r-2*a)).arc("es").left(d).arc("nw").down(Math.max(0,this.items[h+1].up+r-2*a)).arc("ws").addTo(this),e+=Math.max(o.down+r,2*a)+Math.max(this.items[h+1].up+r,2*a),t=n+a)}return this.items.length>1&&(new u(t,e).h(a).addTo(this),t+=a),new u(t,e).h(s[1]).addTo(this),this}}n.Stack=(...t)=>new T(...t);class E extends p{constructor(...t){if(super("g",t),0===t.length)throw new RangeError("OptionalSequence() must have at least one child.");if(1===t.length)return new f(t);var e=a;this.needsSpace=!1,this.width=0,this.up=0,this.height=q(this.items,function(t){return t.height}),this.down=this.items[0].down;for(var i=0,s=0;s<this.items.length;s++){var n=this.items[s];this.up=Math.max(this.up,Math.max(2*e,n.up+r)-i),i+=n.height,s>0&&(this.down=Math.max(this.height+this.down,i+Math.max(2*e,n.down+r))-this.height);var o=(n.needsSpace?10:0)+n.width;this.width+=0===s?e+Math.max(o,e):2*e+Math.max(o,e)+e}h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="optseq")}format(t,e,i){var s=a,n=_(i,this.width);new u(t,e).right(n[0]).addTo(this),new u(t+n[0]+this.width,e+this.height).right(n[1]).addTo(this),t+=n[0];for(var h=e-this.up,o=this.items.length-1,d=0;d<this.items.length;d++){var l=this.items[d],c=l.needsSpace?10:0,w=l.width+c;0===d?(new u(t,e).arc("se").up(e-h-2*s).arc("wn").right(w-s).arc("ne").down(e+l.height-h-2*s).arc("ws").addTo(this),new u(t,e).right(c+s).addTo(this),l.format(t+c+s,e,l.width).addTo(this),t+=w+s,e+=l.height):d<o?(new u(t,h).right(2*s+Math.max(w,s)+s).arc("ne").down(e-h+l.height-2*s).arc("ws").addTo(this),new u(t,e).right(2*s).addTo(this),l.format(t+2*s,e,l.width).addTo(this),new u(t+l.width+2*s,e+l.height).right(c+s).addTo(this),new u(t,e).arc("ne").down(l.height+Math.max(l.down+r,2*s)-2*s).arc("ws").right(w-s).arc("se").up(l.down+r-2*s).arc("wn").addTo(this),t+=2*s+Math.max(w,s)+s,e+=l.height):(new u(t,e).right(2*s).addTo(this),l.format(t+2*s,e,l.width).addTo(this),new u(t+2*s+l.width,e+l.height).right(c+s).addTo(this),new u(t,e).arc("ne").down(l.height+Math.max(l.down+r,2*s)-2*s).arc("ws").right(w-s).arc("se").up(l.down+r-2*s).arc("wn").addTo(this))}return this}}n.OptionalSequence=(...t)=>new E(...t);class j extends p{constructor(...t){if(super("g",t),1===t.length)return new f(t);if(2!==t.length)throw new RangeError("AlternatingSequence() must have one or two children.");this.needsSpace=!1;const e=a,i=r,s=Math.max,n=this.items[0],o=this.items[1],d=1/Math.sqrt(2)*e*2,l=(1-1/Math.sqrt(2))*e*2,c=Math.max(e,r),w=c-l+d,m=s(e+e,c/2+e+e,c/2+i+n.down);this.up=m+n.height+n.up;const u=s(e+e,c/2+e+e,c/2+i+o.up);this.down=u+o.height+o.down,this.height=0;const p=2*(n.needsSpace?10:0)+n.width,g=2*(o.needsSpace?10:0)+o.width;this.width=2*e+s(p,w,g)+2*e,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="altseq")}format(t,e,i){const s=a,n=_(i,this.width);new u(t,e).right(n[0]).addTo(this),t+=n[0],new u(t+this.width,e).right(n[1]).addTo(this);const h=this.items[0],o=this.items[1],d=this.up-h.up,l=this.up-h.up-h.height;new u(t,e).arc("se").up(d-2*s).arc("wn").addTo(this),h.format(t+2*s,e-d,this.width-4*s).addTo(this),new u(t+this.width-2*s,e-l).arc("ne").down(l-2*s).arc("ws").addTo(this);const c=this.down-o.down-o.height,w=this.down-o.down;new u(t,e).arc("ne").down(c-2*s).arc("ws").addTo(this),o.format(t+2*s,e+c,this.width-4*s).addTo(this),new u(t+this.width-2*s,e+w).arc("se").up(w-2*s).arc("wn").addTo(this);const m=1/Math.sqrt(2)*s*2,p=(1-1/Math.sqrt(2))*s*2,g=Math.max(s,r),x=g-p+m,f=(this.width-4*s-x)/2;return new u(t+s,e-g/2-s).arc("ws").right(f).arc_8("n","cw").l(x-m,g-p).arc_8("sw","ccw").right(f).arc("ne").addTo(this),new u(t+s,e+g/2+s).arc("wn").right(f).arc_8("s","ccw").l(x-m,-(g-p)).arc_8("nw","cw").right(f).arc("se").addTo(this),this}}n.AlternatingSequence=(...t)=>new j(...t);class S extends p{constructor(t,...e){if(super("g",e),"number"!=typeof t||t!==Math.floor(t))throw new TypeError("The first argument of Choice() must be an integer.");if(t<0||t>=e.length)throw new RangeError("The first argument of Choice() must be an index for one of the items.");this.normal=t;var i,s=e.length-1;this.width=Math.max.apply(null,this.items.map(function(t){return t.width}))+4*a,this.height=this.items[t].height,this.up=this.items[0].up;for(var n=0;n<t;n++)i=n==t-1?2*a:a,this.up+=Math.max(i,this.items[n].height+this.items[n].down+r+this.items[n+1].up);for(this.down=this.items[s].down,n=t+1;n<=s;n++)i=n==t+1?2*a:a,this.down+=Math.max(i,this.items[n-1].height+this.items[n-1].down+r+this.items[n].up);this.down-=this.items[t].height,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="choice")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0];for(var n,h=this.items.length-1,o=this.width-4*a,d=this.normal-1;d>=0;d--){let i=this.items[d];d==this.normal-1&&(n=Math.max(2*a,this.items[this.normal].up+r+i.down+i.height)),new u(t,e).arc("se").up(n-2*a).arc("wn").addTo(this),i.format(t+2*a,e-n,o).addTo(this),new u(t+2*a+o,e-n+i.height).arc("ne").down(n-i.height+this.height-2*a).arc("ws").addTo(this),n+=Math.max(a,i.up+r+(0===d?0:this.items[d-1].down+this.items[d-1].height))}for(new u(t,e).right(2*a).addTo(this),this.items[this.normal].format(t+2*a,e,o).addTo(this),new u(t+2*a+o,e+this.height).right(2*a).addTo(this),d=this.normal+1;d<=h;d++){let i=this.items[d];d==this.normal+1&&(n=Math.max(2*a,this.height+this.items[this.normal].down+r+i.up)),new u(t,e).arc("ne").down(n-2*a).arc("ws").addTo(this),i.format(t+2*a,e+n,o).addTo(this),new u(t+2*a+o,e+n+i.height).arc("se").up(n-2*a+i.height-this.height).arc("wn").addTo(this),n+=Math.max(a,i.height+i.down+r+(d==h?0:this.items[d+1].up))}return this}}n.Choice=(...t)=>new S(...t);class v extends p{constructor(...t){if(super("g",t),0===t.length)throw new RangeError("HorizontalChoice() must have at least one child.");if(1===t.length)return new f(t);const e=this.items.slice(0,-1),i=this.items.slice(1,-1),s=this.items[0],n=this.items[this.items.length-1];this.needsSpace=!1,this.width=a,this.width+=2*a*(this.items.length-1),this.width+=q(this.items,t=>t.width+(t.needsSpace?20:0)),this.width+=n.height>0?a:0,this.width+=a,this.height=0,this._upperTrack=Math.max(2*a,r,F(e,t=>t.up)+r),this.up=Math.max(this._upperTrack,n.up),this._lowerTrack=Math.max(r,F(i,t=>t.height+Math.max(t.down+r,2*a)),n.height+n.down+r),s.height<this._lowerTrack&&(this._lowerTrack=Math.max(this._lowerTrack,s.height+2*a)),this.down=Math.max(this._lowerTrack,s.height+s.down),h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="horizontalchoice")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0];const n=this.items[0],h=this.items[this.items.length-1],r=this.items.slice(1);var o=q(this.items.slice(0,-1),t=>t.width+(t.needsSpace?20:0))+(this.items.length-2)*a*2-a;new u(t,e).arc("se").v(-(this._upperTrack-2*a)).arc("wn").h(o).addTo(this);var d=q(r,t=>t.width+(t.needsSpace?20:0))+(this.items.length-2)*a*2+(h.height>0?a:0)-a,l=t+a+n.width+(n.needsSpace?20:0)+2*a;new u(l,e+this._lowerTrack).h(d).arc("se").v(-(this._lowerTrack-2*a)).arc("wn").addTo(this);for(const[w,m]of function*(t){var e=0;for(const i of t)yield[e,i],e++}(this.items)){0===w?(new u(t,e).h(a).addTo(this),t+=a):(new u(t,e-this._upperTrack).arc("ne").v(this._upperTrack-2*a).arc("ws").addTo(this),t+=2*a);var c=m.width+(m.needsSpace?20:0);m.format(t,e,c).addTo(this),t+=c,w===this.items.length-1?0===m.height?new u(t,e).h(a).addTo(this):new u(t,e+m.height).arc("se").addTo(this):0===w&&m.height>this._lowerTrack?m.height-this._lowerTrack>=2*a?new u(t,e+m.height).arc("se").v(this._lowerTrack-m.height+2*a).arc("wn").addTo(this):new u(t,e+m.height).l(2*a,this._lowerTrack-m.height).addTo(this):new u(t,e+m.height).arc("ne").v(this._lowerTrack-m.height-2*a).arc("ws").addTo(this)}return this}}n.HorizontalChoice=(...t)=>new v(...t);class R extends p{constructor(t,e,...i){if(super("g",i),"number"!=typeof t||t!==Math.floor(t))throw new TypeError("The first argument of MultipleChoice() must be an integer.");if(t<0||t>=i.length)throw new RangeError("The first argument of MultipleChoice() must be an index for one of the items.");if(this.normal=t,"any"!=e&&"all"!=e)throw new SyntaxError("The second argument of MultipleChoice must be 'any' or 'all'.");this.type=e,this.needsSpace=!0,this.innerWidth=F(this.items,function(t){return t.width}),this.width=30+a+this.innerWidth+a+20,this.up=this.items[0].up,this.down=this.items[this.items.length-1].down,this.height=this.items[t].height;for(var s=0;s<this.items.length;s++){let e,i=this.items[s];e=s==t-1||s==t+1?10+a:a,s<t?this.up+=Math.max(e,i.height+i.down+r+this.items[s+1].up):s>t&&(this.down+=Math.max(e,i.up+r+this.items[s-1].down+this.items[s-1].height))}this.down-=this.items[t].height,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="multiplechoice")}format(t,e,i){var s=_(i,this.width);new u(t,e).right(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).right(s[1]).addTo(this),t+=s[0];for(var n,h=this.items[this.normal],o=this.normal-1;o>=0;o--){var d=this.items[o];o==this.normal-1&&(n=Math.max(10+a,h.up+r+d.down+d.height)),new u(t+30,e).up(n-a).arc("wn").addTo(this),d.format(t+30+a,e-n,this.innerWidth).addTo(this),new u(t+30+a+this.innerWidth,e-n+d.height).arc("ne").down(n-d.height+this.height-a-10).addTo(this),0!==o&&(n+=Math.max(a,d.up+r+this.items[o-1].down+this.items[o-1].height))}for(new u(t+30,e).right(a).addTo(this),h.format(t+30+a,e,this.innerWidth).addTo(this),new u(t+30+a+this.innerWidth,e+this.height).right(a).addTo(this),o=this.normal+1;o<this.items.length;o++){let i=this.items[o];o==this.normal+1&&(n=Math.max(10+a,h.height+h.down+r+i.up)),new u(t+30,e).down(n-a).arc("ws").addTo(this),i.format(t+30+a,e+n,this.innerWidth).addTo(this),new u(t+30+a+this.innerWidth,e+n+i.height).arc("se").up(n-a+i.height-h.height).addTo(this),o!=this.items.length-1&&(n+=Math.max(a,i.height+i.down+r+this.items[o+1].up))}var l=new m("g",{class:"diagram-text"}).addTo(this);return new m("title",{},"any"==this.type?"take one or more branches, once each, in any order":"take all branches, once each, in any order").addTo(l),new m("path",{d:"M "+(t+30)+" "+(e-10)+" h -26 a 4 4 0 0 0 -4 4 v 12 a 4 4 0 0 0 4 4 h 26 z",class:"diagram-text"}).addTo(l),new m("text",{x:t+15,y:e+4,class:"diagram-text"},"any"==this.type?"1+":"all").addTo(l),new m("path",{d:"M "+(t+this.width-20)+" "+(e-10)+" h 16 a 4 4 0 0 1 4 4 v 12 a 4 4 0 0 1 -4 4 h -16 z",class:"diagram-text"}).addTo(l),new m("path",{d:"M "+(t+this.width-13)+" "+(e-2)+" a 4 4 0 1 0 6 -1 m 2.75 -1 h -4 v 4 m 0 -3 h 2",style:"stroke-width: 1.75"}).addTo(l),this}}n.MultipleChoice=(...t)=>new R(...t);class b extends m{constructor(t,e){if(void 0===e)return new S(1,new D,t);if("skip"===e)return new S(0,new D,t);throw"Unknown value for Optional()'s 'skip' argument."}}n.Optional=(...t)=>new b(...t);class N extends m{constructor(t,e){super("g"),e=e||new D,this.item=L(t),this.rep=L(e),this.width=Math.max(this.item.width,this.rep.width)+2*a,this.height=this.item.height,this.up=this.item.up,this.down=Math.max(2*a,this.item.down+r+this.rep.up+this.rep.height+this.rep.down),this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="oneormore")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0],new u(t,e).right(a).addTo(this),this.item.format(t+a,e,this.width-2*a).addTo(this),new u(t+this.width-a,e+this.height).right(a).addTo(this);var n=Math.max(2*a,this.item.height+this.item.down+r+this.rep.up);return new u(t+a,e).arc("nw").down(n-2*a).arc("ws").addTo(this),this.rep.format(t+a,e+n,this.width-2*a).addTo(this),new u(t+this.width-a,e+n+this.rep.height).arc("se").up(n-2*a+this.rep.height-this.item.height).arc("en").addTo(this),this}walk(t){t(this),this.item.walk(t),this.rep.walk(t)}}n.OneOrMore=(...t)=>new N(...t);class M extends m{constructor(t,e,i){return new b(new N(t,e),i)}}n.ZeroOrMore=(...t)=>new M(...t);class I extends m{constructor(t,e){super("g"),this.item=L(t),this.label=e instanceof m?e:e?new C(e):void 0,this.width=Math.max(this.item.width+(this.item.needsSpace?20:0),this.label?this.label.width:0,2*a),this.height=this.item.height,this.boxUp=this.up=Math.max(this.item.up+r,a),this.label&&(this.up+=this.label.up+this.label.height+this.label.down),this.down=Math.max(this.item.down+r,a),this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="group")}format(t,e,i){var s=_(i,this.width);return new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0],new m("rect",{x:t,y:e-this.boxUp,width:this.width,height:this.boxUp+this.height+this.down,rx:a,ry:a,class:"group-box"}).addTo(this),this.item.format(t,e,this.width).addTo(this),this.label&&this.label.format(t,e-(this.boxUp+this.label.down+this.label.height),this.label.width).addTo(this),this}walk(t){t(this),this.item.walk(t),this.label.walk(t)}}n.Group=(...t)=>new I(...t);class y extends m{constructor({type:t="simple",label:e}={}){super("g"),this.width=20,this.height=0,this.up=10,this.down=10,this.type=t,e&&(this.label=""+e,this.width=Math.max(20,this.label.length*c+10)),h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="start")}format(t,e){let i=new u(t,e-10);return"complex"===this.type?i.down(20).m(0,-10).right(this.width).addTo(this):i.down(20).m(10,-20).down(20).m(-10,-10).right(this.width).addTo(this),this.label&&new m("text",{x:t,y:e-15,style:"text-anchor:start"},this.label).addTo(this),this}}n.Start=(...t)=>new y(...t);class P extends m{constructor({type:t="simple"}={}){super("path"),this.width=20,this.height=0,this.up=10,this.down=10,this.type=t,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="end")}format(t,e){return"complex"===this.type?this.attrs.d="M "+t+" "+e+" h 20 m 0 -10 v 20":this.attrs.d="M "+t+" "+e+" h 20 m -10 -10 v 20 m 10 -20 v 20",this}}n.End=(...t)=>new P(...t);class U extends m{constructor(t,{href:e,title:i,cls:s}={}){super("g",{class:["terminal",s].join(" ")}),this.text=""+t,this.href=e,this.title=i,this.cls=s,this.width=this.text.length*c+20,this.height=0,this.up=11,this.down=11,this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="terminal")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e).h(s[1]).addTo(this),t+=s[0],new m("rect",{x:t,y:e-11,width:this.width,height:this.up+this.down,rx:10,ry:10}).addTo(this);var n=new m("text",{x:t+this.width/2,y:e+4},this.text);return this.href?new m("a",{"xlink:href":this.href},[n]).addTo(this):n.addTo(this),this.title&&new m("title",{},[this.title]).addTo(this),this}}n.Terminal=(...t)=>new U(...t);class A extends m{constructor(t,{href:e,title:i,cls:s=""}={}){super("g",{class:["non-terminal",s].join(" ")}),this.text=""+t,this.href=e,this.title=i,this.cls=s,this.width=this.text.length*c+20,this.height=0,this.up=11,this.down=11,this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="nonterminal")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e).h(s[1]).addTo(this),t+=s[0],new m("rect",{x:t,y:e-11,width:this.width,height:this.up+this.down}).addTo(this);var n=new m("text",{x:t+this.width/2,y:e+4},this.text);return this.href?new m("a",{"xlink:href":this.href},[n]).addTo(this):n.addTo(this),this.title&&new m("title",{},[this.title]).addTo(this),this}}n.NonTerminal=(...t)=>new A(...t);class C extends m{constructor(t,{href:e,title:i,cls:s=""}={}){super("g",{class:["comment",s].join(" ")}),this.text=""+t,this.href=e,this.title=i,this.cls=s,this.width=this.text.length*w+10,this.height=0,this.up=8,this.down=8,this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="comment")}format(t,e,i){var s=_(i,this.width);new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e+this.height).h(s[1]).addTo(this),t+=s[0];var n=new m("text",{x:t+this.width/2,y:e+5,class:"comment"},this.text);return this.href?new m("a",{"xlink:href":this.href},[n]).addTo(this):n.addTo(this),this.title&&new m("title",{},this.title).addTo(this),this}}n.Comment=(...t)=>new C(...t);class D extends m{constructor(){super("g"),this.width=0,this.height=0,this.up=0,this.down=0,this.needsSpace=!1,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="skip")}format(t,e,i){return new u(t,e).right(i).addTo(this),this}}n.Skip=(...t)=>new D(...t);class k extends m{constructor({width:t=50,up:e=15,height:i=25,down:s=15,needsSpace:n=!0}={}){super("g"),this.width=t,this.height=i,this.up=e,this.down=s,this.needsSpace=!0,h&&(this.attrs["data-updown"]=this.up+" "+this.height+" "+this.down,this.attrs["data-type"]="block")}format(t,e,i){var s=_(i,this.width);return new u(t,e).h(s[0]).addTo(this),new u(t+s[0]+this.width,e).h(s[1]).addTo(this),t+=s[0],new m("rect",{x:t,y:e-this.up,width:this.width,height:this.up+this.height+this.down}).addTo(this),this}}function O(...t){return t.reduce(function(t,e){return void 0!==t?t:e})}function _(t,e){var i=t-e;switch(l){case"left":return[0,i];case"right":return[i,0];default:return[i/2,i/2]}}function L(t){return t instanceof m?t:new U(""+t)}function q(t,e){return e||(e=function(t){return t}),t.map(e).reduce(function(t,e){return t+e},0)}function F(t,e){return e||(e=function(t){return t}),Math.max.apply(null,t.map(e))}n.Block=(...t)=>new k(...t);var W=i(74848);function V({children:t}){const e=(0,s.useRef)(null),i=(0,s.useRef)(null),[n,h]=(0,s.useState)(!1),r=e=>{if(e.current)try{const s=(...t)=>new g(...t),n=(...t)=>new U(...t),h=(...t)=>new A(...t),r=(...t)=>new b(...t),a=(...t)=>new f(...t),o=(...t)=>new S(...t),d=(...t)=>new D(...t),l=(...t)=>new C(...t),c=(...t)=>new N(...t),w=(...t)=>new M(...t),m=t.replace(/ComplexDiagram\(/g,"Diagram(").replace(/Start\([^)]*\),?\s*/g,"").replace(/,?\s*End\([^)]*\)/g,"").trim();try{const t=new Function("Diagram","Terminal","NonTerminal","Optional","Sequence","Choice","Skip","Comment","OneOrMore","ZeroOrMore",`'use strict'; return ${m};`)(s,n,h,r,a,o,d,l,c,w);if(!t||"function"!=typeof t.toSVG)throw new Error("Diagram function did not return a valid diagram object");e.current.innerHTML="";const i=t.toSVG();i.querySelectorAll("a[*|href]").forEach(t=>{const e=t.getAttributeNS("http://www.w3.org/1999/xlink","href");if(e&&e.startsWith("./")){const i=e.replace(/^\.\//,"../sql-reference/");t.setAttributeNS("http://www.w3.org/1999/xlink","href",i)}}),e.current.appendChild(i)}catch(i){throw console.error("Error in diagram generation:",i),i}}catch(s){console.error("Error rendering railroad diagram:",s),e.current.innerHTML='<p style="color: red;">Error rendering diagram. Check console for details.</p>'}};(0,s.useEffect)(()=>{r(e)},[t]),(0,s.useEffect)(()=>{if(n){r(i);const t=t=>{"Escape"===t.key&&h(!1)};return document.addEventListener("keydown",t),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",t),document.body.style.overflow=""}}},[n,t]);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)("div",{className:"railroad-diagram-wrapper",children:[(0,W.jsx)("button",{className:"railroad-expand-button",onClick:()=>h(!0),"aria-label":"Expand diagram",title:"View full size",children:(0,W.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:(0,W.jsx)("path",{d:"M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"})})}),(0,W.jsx)("div",{ref:e,className:"railroad-diagram-container"})]}),n&&(0,W.jsx)("div",{className:"railroad-modal-overlay",onClick:t=>{t.target===t.currentTarget&&h(!1)},children:(0,W.jsxs)("div",{className:"railroad-modal-content",children:[(0,W.jsx)("button",{className:"railroad-modal-close",onClick:()=>h(!1),"aria-label":"Close",title:"Close (ESC)",children:"\xd7"}),(0,W.jsx)("div",{ref:i,className:"railroad-diagram-container railroad-diagram-modal"})]})})]})}},93213:(t,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>w,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"sql/advanced/explain-statement","title":"EXPLAIN Statement","description":"The EXPLAIN command is used to display the execution plan of an SQL query, showing how the query will be processed by the SQL engine.","source":"@site/docs/sql/advanced/explain-statement.mdx","sourceDirName":"sql/advanced","slug":"/sql/advanced/explain-statement","permalink":"/docs/ignite3/3.1.0/sql/advanced/explain-statement","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ignite-3/tree/main/docs/docs/sql/advanced/explain-statement.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"explain-statement","title":"EXPLAIN Statement","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Advanced SQL","permalink":"/docs/ignite3/3.1.0/sql/advanced/"},"next":{"title":"Performance Tuning","permalink":"/docs/ignite3/3.1.0/sql/advanced/performance-tuning"}}');var n=i(74848),h=i(28453),r=i(63367);const a={id:"explain-statement",title:"EXPLAIN Statement",sidebar_position:2},o="EXPLAIN Command",d={},l=[{value:"Syntax",id:"syntax",level:2},{value:"Understanding The Output",id:"understanding-the-output",level:2},{value:"Operator Naming",id:"operator-naming",level:3},{value:"Hierarchical Plan Structure",id:"hierarchical-plan-structure",level:3},{value:"Examples",id:"examples",level:2},{value:"Example: Complex Join",id:"example-complex-join",level:3},{value:"Example: Query Mapping",id:"example-query-mapping",level:3}];function c(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,h.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"explain-command",children:"EXPLAIN Command"})}),"\n",(0,n.jsxs)(e.p,{children:["The ",(0,n.jsx)(e.code,{children:"EXPLAIN"})," command is used to display the execution plan of an SQL query, showing how the query will be processed by the SQL engine.\nIt provides insights into the relational operators used, their configuration, and the estimated number of rows processed at each step.\nThis information is essential for diagnosing performance bottlenecks and understanding query optimization decisions."]}),"\n",(0,n.jsx)(e.h2,{id:"syntax",children:"Syntax"}),"\n",(0,n.jsx)(r.A,{children:"\nDiagram(\nTerminal('EXPLAIN'),\nOptional(\nSequence(\nChoice(\n0,\nTerminal('PLAN'),\nTerminal('MAPPING')\n),\nTerminal('FOR')\n)\n),\nNonTerminal('query_or_dml')\n)\n"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sql",children:"EXPLAIN [PLAN | MAPPING FOR] query_or_dml\n"})}),"\n",(0,n.jsxs)(e.p,{children:["If neither ",(0,n.jsx)(e.code,{children:"PLAN"})," nor ",(0,n.jsx)(e.code,{children:"MAPPING"})," is specified, then ",(0,n.jsx)(e.code,{children:"PLAN"})," is implicit."]}),"\n",(0,n.jsx)(e.p,{children:"Parameters:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"PLAN"})," - explains query in terms of relational operators tree.\nThis representation is suitable for investigation of performance issues related to the optimizer."]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"MAPPING"})," - explains query in terms of mapping of query fragment to a particular node of the cluster.\nThis representation is suitable for investigation of performance issues related to the data colocation."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Examples:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sql",children:"EXPLAIN SELECT * FROM lineitem;\nEXPLAIN PLAN FOR SELECT * FROM lineitem;\nEXPLAIN MAPPING FOR SELECT * FROM lineitem;\n"})}),"\n",(0,n.jsx)(e.h2,{id:"understanding-the-output",children:"Understanding The Output"}),"\n",(0,n.jsxs)(e.p,{children:["Each query plan is represented as a tree-like structure composed of ",(0,n.jsx)(e.a,{href:"/3.1.0/understand/performance/explain-operators",children:(0,n.jsx)(e.strong,{children:"relational operators"})}),"."]}),"\n",(0,n.jsx)(e.p,{children:"A node in the plan includes:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"name"}),", indicating the relational operator (e.g., ",(0,n.jsx)(e.code,{children:"TableScan"}),", ",(0,n.jsx)(e.code,{children:"IndexScan"}),", ",(0,n.jsx)(e.code,{children:"Sort"}),", ",(0,n.jsx)(e.code,{children:"Join"})," types)"]}),"\n",(0,n.jsxs)(e.li,{children:["A set of ",(0,n.jsx)(e.strong,{children:"attributes"}),", relevant to that specific operator"]}),"\n"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:"OperatorName\n    attribute1: value1\n    attribute2: value2\n"})}),"\n",(0,n.jsx)(e.p,{children:"Examples:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:"TableScan                        // Full table access\n    table: PUBLIC.EMP\n    fieldNames: [NAME, SALARY]\n    est: (rows=1)\n\nIndexScan                        // Index-based access\n    table: PUBLIC.EMP\n    index: EMP_NAME_DESC_IDX\n    type: SORTED\n    fields: [NAME]\n    collation: [NAME DESC]\n    est: (rows=1)\n\nSort                             // Sort rows\n    collation: [NAME DESC NULLS LAST]\n    est: (rows=1)\n"})}),"\n",(0,n.jsx)(e.h3,{id:"operator-naming",children:"Operator Naming"}),"\n",(0,n.jsx)(e.p,{children:"The operator name reflects the specific algorithm or strategy used.\nFor example:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"TableScan"})," \u2013 Full scan of a base table."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"IndexScan"})," \u2013 Access via index, possibly sorted."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"Sort"})," \u2013 Explicit sorting step."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"HashJoin"}),", ",(0,n.jsx)(e.code,{children:"MergeJoin"}),", ",(0,n.jsx)(e.code,{children:"NestedLoopJoin"})," \u2013 Types of join algorithms."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"Limit"}),", ",(0,n.jsx)(e.code,{children:"Project"}),", ",(0,n.jsx)(e.code,{children:"Exchange"})," \u2013 Execution-related transformations and controls."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:"hierarchical-plan-structure",children:"Hierarchical Plan Structure"}),"\n",(0,n.jsxs)(e.p,{children:["The plan is structured as a ",(0,n.jsx)(e.strong,{children:"tree"}),", where:"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Leaf nodes"})," represent data sources (e.g., ",(0,n.jsx)(e.code,{children:"TableScan"}),")"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Internal nodes"})," represent data transformations (e.g., ",(0,n.jsx)(e.code,{children:"Join"}),", ",(0,n.jsx)(e.code,{children:"Sort"}),")"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"The root node"})," (topmost) is the final operator that produces the result"]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(e.h3,{id:"example-complex-join",children:"Example: Complex Join"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sql",children:"EXPLAIN PLAN FOR\n SELECT\n      U.UserName, P.ProductName, R.ReviewText, R.Rating\n   FROM Users U, Reviews R, Products P\n  WHERE U.UserID = R.UserID\n    AND R.ProductID = P.ProductID\n    AND P.ProductName = 'Product_' || ?::varchar\n"})}),"\n",(0,n.jsx)(e.p,{children:"The resulting output is:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:"Project\n    fieldNames: [USERNAME, PRODUCTNAME, REVIEWTEXT, RATING]\n    projection: [USERNAME, PRODUCTNAME, REVIEWTEXT, RATING]\n    est: (rows=16650)\n  HashJoin\n      predicate: =(USERID$0, USERID)\n      fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING, PRODUCTID$0, PRODUCTNAME, USERID$0, USERNAME]\n      type: inner\n      est: (rows=16650)\n    HashJoin\n        predicate: =(PRODUCTID, PRODUCTID$0)\n        fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING, PRODUCTID$0, PRODUCTNAME]\n        type: inner\n        est: (rows=16650)\n      Exchange\n          distribution: single\n          est: (rows=50000)\n        TableScan\n            table: PUBLIC.REVIEWS\n            fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING]\n            est: (rows=50000)\n      Exchange\n          distribution: single\n          est: (rows=1665)\n        TableScan\n            table: PUBLIC.PRODUCTS\n            predicate: =(PRODUCTNAME, ||(_UTF-8'Product_', CAST(?0):VARCHAR CHARACTER SET \"UTF-8\"))\n            fieldNames: [PRODUCTID, PRODUCTNAME]\n            est: (rows=1665)\n    Exchange\n        distribution: single\n        est: (rows=10000)\n      TableScan\n          table: PUBLIC.USERS\n          fieldNames: [USERID, USERNAME]\n          est: (rows=10000)\n"})}),"\n",(0,n.jsxs)(e.p,{children:["This execution plan represents a query that joins three tables: ",(0,n.jsx)(e.code,{children:"USERS"}),", ",(0,n.jsx)(e.code,{children:"REVIEWS"}),", and ",(0,n.jsx)(e.code,{children:"PRODUCTS"}),", and selects four fields after filtering by product name."]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Project"})," (root node):\nOutputs the final selected fields: ",(0,n.jsx)(e.code,{children:"USERNAME"}),", ",(0,n.jsx)(e.code,{children:"PRODUCTNAME"}),", ",(0,n.jsx)(e.code,{children:"REVIEWTEXT"}),", and ",(0,n.jsx)(e.code,{children:"RATING"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"HashJoins"})," (two levels):\nPerform the inner joins."]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["The first (bottom-most) joins ",(0,n.jsx)(e.code,{children:"REVIEWS"})," with ",(0,n.jsx)(e.code,{children:"PRODUCTS"})," on ",(0,n.jsx)(e.code,{children:"PRODUCTID"}),"."]}),"\n",(0,n.jsxs)(e.li,{children:["The second joins the result with ",(0,n.jsx)(e.code,{children:"USERS"})," on ",(0,n.jsx)(e.code,{children:"USERID"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"TableScans"}),":\nEach table is scanned:"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"REVIEWS"})," is fully scanned."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"PRODUCTS"})," is scanned with a filter on ",(0,n.jsx)(e.code,{children:"PRODUCTNAME"}),"."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"USERS"})," is fully scanned."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:"Exchange"})," nodes:\nIndicate data redistribution between operators."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Each node includes:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"fieldNames"}),": Output columns at that stage."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"predicate"}),": Join or filter condition."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"est"}),": Estimated number of rows at that point in the plan."]}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:"example-query-mapping",children:"Example: Query Mapping"}),"\n",(0,n.jsx)(e.p,{children:"A result of the EXPLAIN MAPPING command includes additional metadata providing insight into how the query is mapped on cluster topology.\nSo, for the command like below:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-sql",children:"EXPLAIN MAPPING FOR\n SELECT\n      U.UserName, P.ProductName, R.ReviewText, R.Rating\n   FROM Users U, Reviews R, Products P\n  WHERE U.UserID = R.UserID\n    AND R.ProductID = P.ProductID\n    AND P.ProductName = 'Product_' || ?::varchar\n"})}),"\n",(0,n.jsx)(e.p,{children:"The resulting output is:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-text",children:'Fragment#0 root\n  distribution: single\n  executionNodes: [node_1]\n  tree:\n    Project\n        fieldNames: [USERNAME, PRODUCTNAME, REVIEWTEXT, RATING]\n        projection: [USERNAME, PRODUCTNAME, REVIEWTEXT, RATING]\n        est: (rows=1)\n      HashJoin\n          predicate: =(USERID$0, USERID)\n          fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING, PRODUCTID$0, PRODUCTNAME, USERID$0, USERNAME]\n          type: inner\n          est: (rows=1)\n        HashJoin\n            predicate: =(PRODUCTID, PRODUCTID$0)\n            fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING, PRODUCTID$0, PRODUCTNAME]\n            type: inner\n            est: (rows=1)\n          Receiver\n              fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING]\n              sourceFragmentId: 1\n              est: (rows=1)\n          Receiver\n              fieldNames: [PRODUCTID, PRODUCTNAME]\n              sourceFragmentId: 2\n              est: (rows=1)\n        Receiver\n            fieldNames: [USERID, USERNAME]\n            sourceFragmentId: 3\n            est: (rows=1)\n\nFragment#1\n  distribution: random\n  executionNodes: [node_1, node_2, node_3]\n  partitions: [REVIEWS=[node_1={0, 2, 5, 6, 7, 8, 9, 10, 12, 13, 20}, node_2={1, 3, 11, 19, 21, 22, 23, 24}, node_3={4, 14, 15, 16, 17, 18}]]\n  tree:\n    Sender\n        distribution: single\n        targetFragmentId: 0\n        est: (rows=50000)\n      TableScan\n          table: PUBLIC.REVIEWS\n          fieldNames: [PRODUCTID, USERID, REVIEWTEXT, RATING]\n          est: (rows=50000)\n\nFragment#2\n  distribution: table PUBLIC.PRODUCTS in zone "Default"\n  executionNodes: [node_1, node_2, node_3]\n  partitions: [PRODUCTS=[node_1={0, 2, 5, 6, 7, 8, 9, 10, 12, 13, 20}, node_2={1, 3, 11, 19, 21, 22, 23, 24}, node_3={4, 14, 15, 16, 17, 18}]]\n  tree:\n    Sender\n        distribution: single\n        targetFragmentId: 0\n        est: (rows=1665)\n      TableScan\n          table: PUBLIC.PRODUCTS\n          predicate: =(PRODUCTNAME, ||(_UTF-8\'Product_\', CAST(?0):VARCHAR CHARACTER SET "UTF-8"))\n          fieldNames: [PRODUCTID, PRODUCTNAME]\n          est: (rows=1665)\n\nFragment#3\n  distribution: table PUBLIC.USERS in zone "Default"\n  executionNodes: [node_1, node_2, node_3]\n  partitions: [USERS=[node_1={0, 2, 5, 6, 7, 8, 9, 10, 12, 13, 20}, node_2={1, 3, 11, 19, 21, 22, 23, 24}, node_3={4, 14, 15, 16, 17, 18}]]\n  tree:\n    Sender\n        distribution: single\n        targetFragmentId: 0\n        est: (rows=10000)\n      TableScan\n          table: PUBLIC.USERS\n          fieldNames: [USERID, USERNAME]\n          est: (rows=10000)\n'})}),"\n",(0,n.jsx)(e.p,{children:"where:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:"Fragment#0"})," means fragment with id=0"]}),"\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"root"})," marks a fragment which is considered as root fragment, i.e. a fragment which represents user's cursor"]}),"\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"distribution"})," attribute provides an insight into which mapping strategy was applied to this particular fragment"]}),"\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"executionNodes"})," attribute provides a list of nodes this fragment will be executed on"]}),"\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"partitions"})," attribute provides an insight into which partitions of which tables will be read from which nodes"]}),"\n",(0,n.jsxs)(e.li,{children:["A ",(0,n.jsx)(e.strong,{children:"tree"})," attribute specifies which part of the relational tree corresponds to this fragment"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"The output above shows how the query is broken into multiple execution fragments and distributed across the cluster. It gives insight into both the logical execution plan and how it maps to the physical topology."}),"\n",(0,n.jsxs)(e.p,{children:["The query starts execution in ",(0,n.jsx)(e.em,{children:"Fragment#0"}),", which serves as the root of the plan. This is where the final result is produced. It runs on a single node (",(0,n.jsx)(e.code,{children:"node_1"}),") and contains the main logic of the query, including the projection and two nested hash joins. Instead of scanning tables directly, it receives data from other fragments through ",(0,n.jsx)(e.code,{children:"Receiver"})," operators. These incoming streams correspond to the ",(0,n.jsx)(e.code,{children:"REVIEWS"}),", ",(0,n.jsx)(e.code,{children:"PRODUCTS"}),", and ",(0,n.jsx)(e.code,{children:"USERS"})," tables."]}),"\n",(0,n.jsxs)(e.p,{children:["The actual table scans happen in ",(0,n.jsx)(e.em,{children:"Fragments 1 through 3"}),", each responsible for one of the involved tables. These fragments operate in parallel across the cluster. Each performs a scan on its respective table and then sends the results back to Fragment#0."]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.em,{children:"Fragment#1"})," handles the ",(0,n.jsx)(e.code,{children:"REVIEWS"})," table. It runs on all nodes and uses a random distribution strategy. Data is partitioned across nodes, and after scanning the table, results are sent upstream."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.em,{children:"Fragment#2"})," is in charge of the ",(0,n.jsx)(e.code,{children:"PRODUCTS"})," table. It also spans all nodes but follows a zone-based distribution linked to the table's partitioning. There's a filter applied to ",(0,n.jsx)(e.code,{children:"PRODUCTNAME"}),", which limits the amount of data sent to the root."]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.em,{children:"Fragment#3"})," covers the ",(0,n.jsx)(e.code,{children:"USERS"})," table. Like the others, it's distributed and reads from table partitions spread across the cluster."]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"Each fragment includes metadata such as the nodes it's executed on, how data is partitioned, and how results are sent between fragments. This layout provides a clear view of not only how the query is logically processed, but also how the workload is split and coordinated in a distributed environment."})]})}function w(t={}){const{wrapper:e}={...(0,h.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(c,{...t})}):c(t)}}}]);
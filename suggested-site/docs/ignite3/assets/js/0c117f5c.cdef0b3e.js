"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3001],{27183:(e,i,o)=>{o.r(i),o.d(i,{assets:()=>l,contentTitle:()=>s,default:()=>g,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"configure-and-operate/configuration/config-storage","title":"Storage Profiles","description":"What is a Storage Profile?","source":"@site/docs/configure-and-operate/configuration/storage.md","sourceDirName":"configure-and-operate/configuration","slug":"/configure-and-operate/configuration/config-storage","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/config-storage","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ignite-3/tree/main/docs/docs/configure-and-operate/configuration/storage.md","tags":[],"version":"current","frontMatter":{"id":"config-storage","title":"Storage Profiles","sidebar_label":"Storage Profiles"},"sidebar":"tutorialSidebar","previous":{"title":"Storage Overview","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/config-storage-overview"},"next":{"title":"Volatile Storage","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/config-storage-volatile"}}');var t=o(74848),r=o(28453);const a={id:"config-storage",title:"Storage Profiles",sidebar_label:"Storage Profiles"},s=void 0,l={},c=[{value:"What is a Storage Profile?",id:"what-is-a-storage-profile",level:2},{value:"Storage Profiles and Distribution Zones",id:"storage-profiles-and-distribution-zones",level:2},{value:"Default Storage Profile",id:"default-storage-profile",level:2},{value:"Creating and Using Storage Profiles",id:"creating-and-using-storage-profiles",level:2},{value:"Defining Tables With Storage Profiles",id:"defining-tables-with-storage-profiles",level:2}];function d(e){const i={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h2,{id:"what-is-a-storage-profile",children:"What is a Storage Profile?"}),"\n",(0,t.jsx)(i.p,{children:"Storage profiles are Apache Ignite node entities that define a Storage Engine and its configuration parameters. They create a bridge between tables and the underlying storage engines that store data."}),"\n",(0,t.jsx)(i.p,{children:"A storage profile defines:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"What storage engine is used to store data"}),"\n",(0,t.jsx)(i.li,{children:"Configuration values for a particular Storage Engine's configuration properties"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Each node in an Apache Ignite cluster can have multiple storage profiles defined, and a table can only have a single storage profile defined."}),"\n",(0,t.jsx)(i.h2,{id:"storage-profiles-and-distribution-zones",children:"Storage Profiles and Distribution Zones"}),"\n",(0,t.jsx)(i.p,{children:"A Distribution Zone must be configured to use a set of declared Storage Profiles, which can be used to parameterize tables created in this Zone with different Storage Engines. When creating a distribution zone, you specify which storage profiles it can use:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sql",children:"CREATE ZONE exampleZone (PARTITIONS 2, REPLICAS 3) STORAGE PROFILES ['profile1, profile3'];\n"})}),"\n",(0,t.jsxs)(i.p,{children:["In this case, the tables created in this distribution zone can only use ",(0,t.jsx)(i.code,{children:"profile1"})," or ",(0,t.jsx)(i.code,{children:"profile3"}),"."]}),"\n",(0,t.jsx)(i.h2,{id:"default-storage-profile",children:"Default Storage Profile"}),"\n",(0,t.jsxs)(i.p,{children:["Apache Ignite creates a ",(0,t.jsx)(i.code,{children:"default"})," storage profile that uses the persistent Apache Ignite storage engine (",(0,t.jsx)(i.code,{children:"aipersist"}),") to store data. Unless otherwise specified, distribution zones will use this storage profile to store data."]}),"\n",(0,t.jsx)(i.p,{children:"To check the currently available profiles on the node, use the following command:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"node config show ignite.storage.profiles\n"})}),"\n",(0,t.jsx)(i.h2,{id:"creating-and-using-storage-profiles",children:"Creating and Using Storage Profiles"}),"\n",(0,t.jsxs)(i.p,{children:["By default, only the ",(0,t.jsx)(i.code,{children:"default"})," storage profile is created, however a node can have any number of storage profiles on it. To create a new profile, pass the profile configuration to the ",(0,t.jsx)(i.code,{children:"storage.profiles"})," parameter:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:'node config update "ignite.storage.profiles:{rocksProfile{engine:rocksdb,size:10000}}"\n'})}),"\n",(0,t.jsx)(i.p,{children:"After the configuration is updated, make sure to restart the node. The created storage profile will be available for use by a distribution zone after the restart."}),"\n",(0,t.jsx)(i.h2,{id:"defining-tables-with-storage-profiles",children:"Defining Tables With Storage Profiles"}),"\n",(0,t.jsx)(i.p,{children:"After you have defined your storage profiles and distribution zones, you can create tables in it by using SQL or from code. Both zone and storage profile cannot be changed after the table has been created."}),"\n",(0,t.jsx)(i.p,{children:"For example, here is how you create a simple table:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-sql",children:"CREATE TABLE exampleTable (key INT PRIMARY KEY, my_value VARCHAR) ZONE exampleZone STORAGE PROFILE 'profile1';\n"})}),"\n",(0,t.jsxs)(i.p,{children:["In this case, the ",(0,t.jsx)(i.code,{children:"exampleTable"})," table will be using the storage engine with the parameters specified in the ",(0,t.jsx)(i.code,{children:"profile1"})," storage profile. If the node does not have the ",(0,t.jsx)(i.code,{children:"profile1"}),", the table will not be stored on it. Each node may have different configuration for ",(0,t.jsx)(i.code,{children:"profile1"}),", and data will be stored according to local configuration."]})]})}function g(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,i,o)=>{o.d(i,{R:()=>a,x:()=>s});var n=o(96540);const t={},r=n.createContext(t);function a(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);
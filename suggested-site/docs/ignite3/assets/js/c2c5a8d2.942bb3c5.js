"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2521],{28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>a});var n=t(96540);const s={},r=n.createContext(s);function o(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(r.Provider,{value:i},e.children)}},39715:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"administrators-guide/storage/engines/aipersist","title":"Persistent Storage","description":"{/*","source":"@site/versioned_docs/version-3.0.0/administrators-guide/storage/engines/aipersist.md","sourceDirName":"administrators-guide/storage/engines","slug":"/administrators-guide/storage/engines/aipersist","permalink":"/suggested-site/docs/ignite3/3.0.0/administrators-guide/storage/engines/aipersist","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ignite-3/tree/main/docs/versioned_docs/version-3.0.0/administrators-guide/storage/engines/aipersist.md","tags":[],"version":"3.0.0","frontMatter":{"title":"Persistent Storage","sidebar_label":"Persistent Storage"},"sidebar":"tutorialSidebar","previous":{"title":"Storage Engines and Profiles","permalink":"/suggested-site/docs/ignite3/3.0.0/administrators-guide/storage/engines/"},"next":{"title":"RocksDB Storage","permalink":"/suggested-site/docs/ignite3/3.0.0/administrators-guide/storage/engines/rocksdb"}}');var s=t(74848),r=t(28453);const o={title:"Persistent Storage",sidebar_label:"Persistent Storage"},a=void 0,d={},c=[{value:"Overview",id:"overview",level:2},{value:"Profile Configuration",id:"profile-configuration",level:2},{value:"Checkpointing",id:"checkpointing",level:2},{value:"Write Throttling",id:"write-throttling",level:2},{value:"Storage Configuration",id:"storage-configuration",level:2}];function g(e){const i={a:"a",code:"code",em:"em",h2:"h2",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:["\n",(0,s.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(i.p,{children:"Apache Ignite Persistence is designed to provide a quick and responsive persistent storage.\nWhen using the persistent storage, Apache Ignite stores all the data on disk, and loads as much data as it can into RAM for processing."}),"\n",(0,s.jsx)(i.p,{children:"When persistence is enabled, Apache Ignite stores each partition in a separate file on disk. In addition to data partitions, Apache Ignite stores indexes and metadata."}),"\n",(0,s.jsx)(i.h2,{id:"profile-configuration",children:"Profile Configuration"}),"\n",(0,s.jsx)(i.p,{children:"Each Apache Ignite storage engine can have several storage profiles."}),"\n",(0,s.jsx)(i.h2,{id:"checkpointing",children:"Checkpointing"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:"Checkpointing"})," is the process of copying dirty pages from RAM to partition files on disk. A dirty page is a page that was updated in RAM but was not written to the respective partition file."]}),"\n",(0,s.jsx)(i.p,{children:"After a checkpoint is created, all changes are persisted to disk and will be available if the node crashes and is restarted."}),"\n",(0,s.jsx)(i.p,{children:"Checkpointing is designed to ensure durability of data and recovery in case of a node failure."}),"\n",(0,s.jsx)(i.p,{children:"This process helps you utilize disk space frugally by keeping pages in the most up-to-date state on disk."}),"\n",(0,s.jsxs)(i.p,{children:["You can fine-tune checkpoint settings in the ",(0,s.jsx)(i.a,{href:"/suggested-site/docs/ignite3/3.0.0/administrators-guide/config/node-config#storage-configuration",children:"aipersist"})," storage engine configuration."]}),"\n",(0,s.jsx)(i.h2,{id:"write-throttling",children:"Write Throttling"}),"\n",(0,s.jsxs)(i.p,{children:["If a dirty page, scheduled for checkpointing, is updated before being written to disk, its previous state is copied to a special region called a checkpointing buffer. If the buffer overflows, Apache Ignite would have to stop processing all updates until the ",(0,s.jsx)(i.a,{href:"#checkpointing",children:"Checkpointing"})," is over. As a result, write performance would drop to zero until the checkpointing cycle is completed."]}),"\n",(0,s.jsx)(i.p,{children:"To avoid the scenario where all updates are stopped, Apache Ignite always performs write throttling once the checkpoint buffer is two thirds full. Once the threshold is reached, checkpoint writer priority is increased, and more priority is given to checkpointing over new updates as the buffer fills more. This prevents buffer overflow while also slowing down update rate."}),"\n",(0,s.jsxs)(i.p,{children:["In most cases, write throttling is caused by a slow drive, or a high update rate, and should not be a part of normal node operation. You can track write throttling by using the ",(0,s.jsx)(i.code,{children:"storage.aipersist"})," metrics in the ",(0,s.jsx)(i.a,{href:"/suggested-site/docs/ignite3/3.0.0/administrators-guide/metrics/metrics-list",children:"Available Metrics"})," reference."]}),"\n",(0,s.jsx)(i.h2,{id:"storage-configuration",children:"Storage Configuration"}),"\n",(0,s.jsxs)(i.p,{children:["In Apache Ignite 3, all storage configuration is consolidated under ",(0,s.jsx)(i.code,{children:"ignite.storage"})," ",(0,s.jsx)(i.a,{href:"/suggested-site/docs/ignite3/3.0.0/administrators-guide/config/node-config#storage-configuration",children:"node configuration"}),". For more information on how storage is configured, see ",(0,s.jsx)(i.a,{href:"/suggested-site/docs/ignite3/3.0.0/administrators-guide/storage/",children:"Storage Profiles and Engines"})," documentation."]})]})}function l(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}}}]);
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8178],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>s});var t=i(96540);const a={},r=t.createContext(a);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(r.Provider,{value:n},e.children)}},63264:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/key-value-api","title":"Using Java API","description":"This guide walks you through creating a Java application that connects to an Ignite 3 cluster, demonstrating key patterns for working with data using Ignite Java API.","source":"@site/docs/getting-started/key-value-api.md","sourceDirName":"getting-started","slug":"/getting-started/key-value-api","permalink":"/docs/ignite3/3.1.0/getting-started/key-value-api","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/ignite-3/tree/main/docs/docs/getting-started/key-value-api.md","tags":[],"version":"current","frontMatter":{"title":"Using Java API"},"sidebar":"tutorialSidebar","previous":{"title":"Working with SQL","permalink":"/docs/ignite3/3.1.0/getting-started/work-with-sql"},"next":{"title":"Embedded Mode","permalink":"/docs/ignite3/3.1.0/getting-started/embedded-mode"}}');var a=i(74848),r=i(28453);const l={title:"Using Java API"},s=void 0,o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setting Up Ignite 3 Cluster",id:"setting-up-ignite-3-cluster",level:2},{value:"Starting and Initializing the Cluster",id:"starting-and-initializing-the-cluster",level:3},{value:"Setting Up Your Java Project",id:"setting-up-your-java-project",level:2},{value:"Create a Maven Project",id:"create-a-maven-project",level:3},{value:"Configure Maven Dependencies",id:"configure-maven-dependencies",level:3},{value:"Building Your Java Application",id:"building-your-java-application",level:2},{value:"Main Application Class",id:"main-application-class",level:3},{value:"Running the Application",id:"running-the-application",level:2},{value:"Expected Output",id:"expected-output",level:2},{value:"Understanding Table Views in Ignite 3",id:"understanding-table-views-in-ignite-3",level:2},{value:"RecordView Pattern",id:"recordview-pattern",level:3},{value:"KeyValueView Pattern",id:"keyvalueview-pattern",level:3},{value:"Cleaning Up",id:"cleaning-up",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"This guide walks you through creating a Java application that connects to an Ignite 3 cluster, demonstrating key patterns for working with data using Ignite Java API."}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"JDK 17 or later"}),"\n",(0,a.jsx)(n.li,{children:"Maven"}),"\n",(0,a.jsx)(n.li,{children:"Up-to-date versions of Docker and Docker Compose"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-ignite-3-cluster",children:"Setting Up Ignite 3 Cluster"}),"\n",(0,a.jsx)(n.p,{children:"Create a Docker Compose file to run a three-node Ignite cluster:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yml\nname: ignite3\n\nx-ignite-def: &ignite-def\n  image: apacheignite/ignite:3.0.0\n  environment:\n    JVM_MAX_MEM: "4g"\n    JVM_MIN_MEM: "4g"\n  configs:\n    - source: node_config\n      target: /opt/ignite/etc/ignite-config.conf\n\nservices:\n  node1:\n    <<: *ignite-def\n    command: --node-name node1\n    ports:\n      - "10300:10300"  # REST API port\n      - "10800:10800"  # Client port\n  node2:\n    <<: *ignite-def\n    command: --node-name node2\n    ports:\n      - "10301:10300"\n      - "10801:10800"\n  node3:\n    <<: *ignite-def\n    command: --node-name node3\n    ports:\n      - "10302:10300"\n      - "10802:10800"\n\nconfigs:\n  node_config:\n    content: |\n      ignite {\n        network {\n          port: 3344\n          nodeFinder.netClusterNodes = ["node1:3344", "node2:3344", "node3:3344"]\n        }\n      }\n'})}),"\n",(0,a.jsx)(n.h3,{id:"starting-and-initializing-the-cluster",children:"Starting and Initializing the Cluster"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Start the cluster:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Run the Ignite CLI and initialize the cluster:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker run --rm -it --network=host -e LANG=C.UTF-8 -e LC_ALL=C.UTF-8 apacheignite/ignite:3.0.0 cli\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Inside the CLI, confirm the connection to the default node."}),"\n",(0,a.jsx)(n.li,{children:"Initialize the cluster:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cluster init --name=ignite3 --metastorage-group=node1,node2,node3\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"5",children:["\n",(0,a.jsx)(n.li,{children:"Enter the SQL mode:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sql\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"6",children:["\n",(0,a.jsx)(n.li,{children:"Create a sample table and insert data:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"CREATE TABLE Person (id INT PRIMARY KEY, name VARCHAR);\nINSERT INTO Person (id, name) VALUES (1, 'John');\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"7",children:["\n",(0,a.jsx)(n.li,{children:"Exit the SQL mode and CLI tool:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"exit;\nexit\n"})}),"\n",(0,a.jsx)(n.h2,{id:"setting-up-your-java-project",children:"Setting Up Your Java Project"}),"\n",(0,a.jsx)(n.h3,{id:"create-a-maven-project",children:"Create a Maven Project"}),"\n",(0,a.jsx)(n.p,{children:"First, create a simple Maven project. Below is the example of the project we will be using:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"ignite3-java-demo/\n\u251c\u2500\u2500 pom.xml\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 main/\n        \u2514\u2500\u2500 java/\n            \u2514\u2500\u2500 com/\n                \u2514\u2500\u2500 example/\n                    \u2514\u2500\u2500 Main.java\n"})}),"\n",(0,a.jsx)(n.h3,{id:"configure-maven-dependencies",children:"Configure Maven Dependencies"}),"\n",(0,a.jsxs)(n.p,{children:["Include the Ignite client dependency in your ",(0,a.jsx)(n.code,{children:"pom.xml"})," file:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependencies>\n    \x3c!-- Ignite 3 Client --\x3e\n    <dependency>\n        <groupId>org.apache.ignite</groupId>\n        <artifactId>ignite-client</artifactId>\n        <version>3.0.0</version>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"building-your-java-application",children:"Building Your Java Application"}),"\n",(0,a.jsx)(n.p,{children:"Now, let's create a Java application that connects to our Ignite cluster and performs various data operations."}),"\n",(0,a.jsx)(n.h3,{id:"main-application-class",children:"Main Application Class"}),"\n",(0,a.jsxs)(n.p,{children:["Create a ",(0,a.jsx)(n.code,{children:"Main.java"})," file with the following code:"]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"See the structure example above for the expected file location. This example contains the full class file."})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package com.example;\n\nimport org.apache.ignite.catalog.ColumnType;\nimport org.apache.ignite.catalog.definitions.ColumnDefinition;\nimport org.apache.ignite.catalog.definitions.TableDefinition;\nimport org.apache.ignite.client.IgniteClient;\nimport org.apache.ignite.table.KeyValueView;\nimport org.apache.ignite.table.RecordView;\nimport org.apache.ignite.table.Table;\nimport org.apache.ignite.table.Tuple;\n\n/**\n * This example demonstrates connecting to an Ignite 3 cluster\n * and working with data using different table view patterns.\n */\npublic class Main {\n    public static void main(String[] args) {\n        // Create an array of connection addresses for fault tolerance\n        String[] addresses = {\n                "localhost:10800",\n                "localhost:10801",\n                "localhost:10802"\n        };\n\n        // Connect to the Ignite cluster using the client builder pattern\n        try (IgniteClient client = IgniteClient.builder()\n                .addresses(addresses)\n                .build()) {\n\n            System.out.println("Connected to the cluster: " + client.connections());\n\n            // Demonstrate querying existing data using SQL API\n            queryExistingTable(client);\n\n            // Create a new table using Java API\n            Table table = createTable(client);\n\n            // Demonstrate different ways to interact with tables\n            populateTableWithDifferentViews(table);\n\n            // Query the new table using SQL API\n            queryNewTable(client);\n        }\n    }\n\n    /**\n     * Queries the pre-created Person table using SQL\n     */\n    private static void queryExistingTable(IgniteClient client) {\n        System.out.println("\\n--- Querying Person table ---");\n        client.sql().execute(null, "SELECT * FROM Person")\n                .forEachRemaining(row -> System.out.println("Person: " + row.stringValue("name")));\n    }\n\n    /**\n     * Creates a new table using the Java API\n     */\n    private static Table createTable(IgniteClient client) {\n        System.out.println("\\n--- Creating Person2 table ---");\n        return client.catalog().createTable(\n                TableDefinition.builder("Person2")\n                        .ifNotExists()\n                        .columns(\n                                ColumnDefinition.column("ID", ColumnType.INT32),\n                                ColumnDefinition.column("NAME", ColumnType.VARCHAR))\n                        .primaryKey("ID")\n                        .build());\n    }\n\n    /**\n     * Demonstrates different ways to interact with tables\n     */\n    private static void populateTableWithDifferentViews(Table table) {\n        System.out.println("\\n--- Populating Person2 table using different views ---");\n\n        // 1. Using RecordView with Tuples\n        RecordView<Tuple> recordView = table.recordView();\n        recordView.upsert(null, Tuple.create().set("id", 2).set("name", "Jane"));\n        System.out.println("Added record using RecordView with Tuple");\n\n        // 2. Using RecordView with POJOs\n        RecordView<Person> pojoView = table.recordView(Person.class);\n        pojoView.upsert(null, new Person(3, "Jack"));\n        System.out.println("Added record using RecordView with POJO");\n\n        // 3. Using KeyValueView with Tuples\n        KeyValueView<Tuple, Tuple> keyValueView = table.keyValueView();\n        keyValueView.put(null, Tuple.create().set("id", 4), Tuple.create().set("name", "Jill"));\n        System.out.println("Added record using KeyValueView with Tuples");\n\n        // 4. Using KeyValueView with Native Types\n        KeyValueView<Integer, String> keyValuePojoView = table.keyValueView(Integer.class, String.class);\n        keyValuePojoView.put(null, 5, "Joe");\n        System.out.println("Added record using KeyValueView with Native Types");\n    }\n\n    /**\n     * Queries the newly created Person2 table using SQL\n     */\n    private static void queryNewTable(IgniteClient client) {\n        System.out.println("\\n--- Querying Person2 table ---");\n        client.sql().execute(null, "SELECT * FROM Person2")\n                .forEachRemaining(row -> System.out.println("Person2: " + row.stringValue("name")));\n    }\n\n    /**\n     * POJO class representing a Person\n     */\n    public static class Person {\n        // Default constructor required for serialization\n        public Person() { }\n\n        public Person(Integer id, String name) {\n            this.id = id;\n            this.name = name;\n        }\n\n        Integer id;\n        String name;\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"running-the-application",children:"Running the Application"}),"\n",(0,a.jsx)(n.p,{children:"To run your application:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Make sure your Ignite cluster is up and running"}),"\n",(0,a.jsx)(n.li,{children:"Compile and run your Java application:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mvn compile exec:java -Dexec.mainClass="com.example.Main"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"expected-output",children:"Expected Output"}),"\n",(0,a.jsx)(n.p,{children:"You should see output similar to this:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-text",children:"Connected to the cluster: Connections{active=1, total=1}\n\n--- Querying Person table ---\nPerson: John\n\n--- Creating Person2 table ---\n\n--- Populating Person2 table using different views ---\nAdded record using RecordView with Tuple\nAdded record using RecordView with POJO\nAdded record using KeyValueView with Tuples\nAdded record using KeyValueView with Native Types\n\n--- Querying Person2 table ---\nPerson2: Jane\nPerson2: Jack\nPerson2: Jill\nPerson2: Joe\n"})}),"\n",(0,a.jsx)(n.h2,{id:"understanding-table-views-in-ignite-3",children:"Understanding Table Views in Ignite 3"}),"\n",(0,a.jsxs)(n.p,{children:["Ignite 3 provides multiple view patterns for interacting with tables on top of providing a robust SQL API. Examples below showcase how you can work with Ignite tables from your project without SQL. For examples of working with SQL, see the ",(0,a.jsx)(n.a,{href:"/3.1.0/getting-started/work-with-sql",children:"Getting Started with SQL"})," tutorial."]}),"\n",(0,a.jsx)(n.h3,{id:"recordview-pattern",children:"RecordView Pattern"}),"\n",(0,a.jsx)(n.p,{children:"RecordView treats tables as a collection of records, perfect for operations that work with entire rows:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// Get RecordView for Tuple objects (schema-less)\nRecordView<Tuple> recordView = table.recordView();\nrecordView.upsert(null, Tuple.create().set("id", 2).set("name", "Jane"));\n\n// Get RecordView for mapped POJO objects (type-safe)\nRecordView<Person> pojoView = table.recordView(Person.class);\npojoView.upsert(null, new Person(3, "Jack"));\n'})}),"\n",(0,a.jsx)(n.h3,{id:"keyvalueview-pattern",children:"KeyValueView Pattern"}),"\n",(0,a.jsx)(n.p,{children:"KeyValueView treats tables as a key-value store, ideal for simple lookups:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// Get KeyValueView for Tuple objects\nKeyValueView<Tuple, Tuple> keyValueView = table.keyValueView();\nkeyValueView.put(null, Tuple.create().set("id", 4), Tuple.create().set("name", "Jill"));\n\n// Get KeyValueView for native Java types\nKeyValueView<Integer, String> keyValuePojoView = table.keyValueView(Integer.class, String.class);\nkeyValuePojoView.put(null, 5, "Joe");\n'})}),"\n",(0,a.jsx)(n.h2,{id:"cleaning-up",children:"Cleaning Up"}),"\n",(0,a.jsx)(n.p,{children:"To stop your cluster when you are done:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker compose down\n"})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.p,{children:"If you encounter connection issues:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Verify your Docker containers are running with ",(0,a.jsx)(n.code,{children:"docker compose ps"})," command"]}),"\n",(0,a.jsx)(n.li,{children:"Check if the exposed ports match those in your client configuration"}),"\n",(0,a.jsxs)(n.li,{children:["Ensure that the ",(0,a.jsx)(n.code,{children:"localhost"})," interface can access the Docker container network"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(n.p,{children:"Now that you've explored the basics of connecting to Ignite and interacting with data:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Try implementing transactions"}),"\n",(0,a.jsx)(n.li,{children:"Experiment with more complex schemas and data types"}),"\n",(0,a.jsx)(n.li,{children:"Explore data partitioning strategies"}),"\n",(0,a.jsx)(n.li,{children:"Investigate distributed computing capabilities"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);
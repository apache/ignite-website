"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[960],{11590:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"develop/work-with-data/events","title":"Working with Events","description":"Apache Ignite can generate events for a variety of operations happening in the cluster and notify your application about those operations. There are many types of events, including cache events, node discovery events, distributed task execution events, and many more.","source":"@site/docs/develop/work-with-data/events.md","sourceDirName":"develop/work-with-data","slug":"/develop/work-with-data/events","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/events","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"events","title":"Working with Events"},"sidebar":"tutorialSidebar","previous":{"title":"Code Deployment","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/code-deployment"},"next":{"title":"Available Events","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/events-list"}}');var s=t(74848),r=t(28453);const l={id:"events",title:"Working with Events"},d=void 0,o={},c=[{value:"Enabling Events",id:"enabling-events",level:2},{value:"Sink Structure",id:"sink-structure",level:2},{value:"Channel Structure",id:"channel-structure",level:2},{value:"Event Structure",id:"event-structure",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Apache Ignite can generate events for a variety of operations happening in the cluster and notify your application about those operations. There are many types of events, including cache events, node discovery events, distributed task execution events, and many more."}),"\n",(0,s.jsx)(n.h2,{id:"enabling-events",children:"Enabling Events"}),"\n",(0,s.jsxs)(n.p,{children:["In Ignite 3, events are configured cluster-wide, in ",(0,s.jsx)(n.a,{href:"/3.1.0/configure-and-operate/configuration/config-cluster-and-nodes",children:"cluster configuration"}),". Events are organized in ",(0,s.jsx)(n.strong,{children:"channels"}),", each channel tracking one or more event types. You cannot enable or disable individual events, instead you need to disable event channels."]}),"\n",(0,s.jsx)(n.p,{children:"To create an event channel:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'cluster config update ignite.eventlog.channels.exampleChannel.events=["USER_AUTHENTICATION_SUCCESS"]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["This channel will track the ",(0,s.jsx)(n.code,{children:"USER_AUTHENTICATION_SUCCESS"}),", but not trigger yet. For the events to trigger, a ",(0,s.jsx)(n.strong,{children:"sink"})," must be configured. It sends the event information to the configured logger category at the configured level. Currently, only the ",(0,s.jsx)(n.code,{children:"log"})," sink type is supported, and it writes output to Apache Ignite log. Here is how you can enable log sink by using the CLI tool:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'cluster config update ignite.eventlog.sinks.exampleSink = {type="log", channel="exampleChannel"}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Now, the authorization events will be written to the log. Here is how the event may look like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'2024-06-04 16:19:29:840 +0300 [INFO][%defaultNode%sql-execution-pool-1][EventLog] {"type":"USER_AUTHORIZATION_SUCCESS","timestamp":1717507169840,"productVersion":"3.0.0","user":{"username":"ignite","authenticationProvider":"basic"},"fields":{"privileges":[{"action":"CREATE_TABLE","on":{"objectType":"TABLE","objectName":"TEST2","schema":"PUBLIC"}}],"roles":["system"]}}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Below is the cluster configuration config in JSON."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"In Apache Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "ignite" : {\n    "eventlog" : {\n        "channels" : [ {\n          "enabled" : true,\n          "events" : [ "USER_AUTHENTICATION_SUCCESS" ],\n          "name" : "exampleChannel"\n        } ],\n        "sinks" : [ {\n          "channel" : "exampleChannel",\n          "criteria" : "EventLog",\n          "format" : "JSON",\n          "level" : "INFO",\n          "name" : "sampleSink",\n          "type" : "log"\n        } ]\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"sink-structure",children:"Sink Structure"}),"\n",(0,s.jsx)(n.p,{children:"Data sink configuration in Apache Ignite 3 has the following structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "channel" : "exampleChannel",\n  "criteria" : "EventLog",\n  "format" : "JSON",\n  "level" : "INFO",\n  "name" : "sampleSink",\n  "type" : "log"\n}\n'})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"channel"}),(0,s.jsx)(n.td,{children:"The name of the event channel the data sink logs data for."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"criteria"}),(0,s.jsx)(n.td,{children:"Logging criteria. By default, only EventLog messages are logged."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"format"}),(0,s.jsxs)(n.td,{children:["Output format. Currently, only ",(0,s.jsx)(n.code,{children:"JSON"})," messages are supported."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"level"}),(0,s.jsxs)(n.td,{children:["The level the messages are posted to the log at. Supported values: ",(0,s.jsx)(n.code,{children:"ALL"}),", ",(0,s.jsx)(n.code,{children:"TRACE"}),", ",(0,s.jsx)(n.code,{children:"DEBUG"}),", ",(0,s.jsx)(n.code,{children:"INFO"}),", ",(0,s.jsx)(n.code,{children:"WARNING"}),", ",(0,s.jsx)(n.code,{children:"ERROR"}),", ",(0,s.jsx)(n.code,{children:"OFF"}),". Default value: ",(0,s.jsx)(n.code,{children:"INFO"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"Arbitrary sink name."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsxs)(n.td,{children:["Type of event sink. Currently, only ",(0,s.jsx)(n.code,{children:"log"})," sink is supported, and is used to write events to log."]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"channel-structure",children:"Channel Structure"}),"\n",(0,s.jsx)(n.p,{children:"Event channel configuration in Apache Ignite 3 has the following structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "enabled" : true,\n  "events" : [ "USER_AUTHENTICATION_SUCCESS" ],\n  "name" : "exampleChannel"\n}\n'})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"enabled"}),(0,s.jsx)(n.td,{children:"Defines if this event channel is enabled."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"events"}),(0,s.jsxs)(n.td,{children:["The list of events tracked by the event channel. For the full list of event types, see ",(0,s.jsx)(n.a,{href:"./events-list",children:"Events List"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:"Arbitrary channel name."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"event-structure",children:"Event Structure"}),"\n",(0,s.jsxs)(n.p,{children:["All events in Apache Ignite 3 follow the same basic structure described below. Some events provide additional context in the ",(0,s.jsx)(n.code,{children:"data"})," field."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "type": "AUTHENTICATION",\n  "user": { "username": "John", "authenticationProvider": "basic" },\n  "timestamp": 1715169617,\n  "productVersion": "3.0.0",\n  "fields": {}\n}\n'})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"type"}),(0,s.jsxs)(n.td,{children:["The type of the event. For the full list of event types, see ",(0,s.jsx)(n.a,{href:"./events-list",children:"Events List"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"user"}),(0,s.jsxs)(n.td,{children:["The name of the user, and the ",(0,s.jsx)(n.a,{href:"/3.1.0/configure-and-operate/configuration/config-authentication",children:"authentication"})," provider used to authorize."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"timestamp"}),(0,s.jsx)(n.td,{children:"Even time in UNIX epoch time."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"productVersion"}),(0,s.jsx)(n.td,{children:"Apache Ignite version used by the client."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"fields"}),(0,s.jsx)(n.td,{children:"Event-specific data."})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var i=t(96540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);
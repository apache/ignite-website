"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1590],{11470:(e,n,r)=>{r.d(n,{A:()=>T});var a=r(96540),t=r(34164),l=r(17559),i=r(23104),s=r(56347),c=r(205),o=r(57485),u=r(31682),d=r(70679);function h(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:r,default:a}})=>({value:e,label:n,attributes:r,default:a}))}(r);return function(e){const n=(0,u.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function b({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const r=(0,s.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(t),(0,a.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(r.location.search);n.set(t,e),r.replace({...r.location,search:n.toString()})},[t,r])]}function v(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,l=p(e),[i,s]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!b({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:l})),[o,u]=m({queryString:r,groupId:t}),[h,v]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,t]=(0,d.Dv)(n);return[r,(0,a.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),j=(()=>{const e=o??h;return b({value:e,tabValues:l})?e:null})();(0,c.A)(()=>{j&&s(j)},[j]);return{selectedValue:i,selectValue:(0,a.useCallback)(e=>{if(!b({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),v(e)},[u,v,l]),tabValues:l}}var j=r(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=r(74848);function y({className:e,block:n,selectedValue:r,selectValue:a,tabValues:l}){const s=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),o=e=>{const n=e.currentTarget,t=s.indexOf(n),i=l[t].value;i!==r&&(c(n),a(i))},u=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const r=s.indexOf(e.currentTarget)+1;n=s[r]??s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;n=s[r]??s[s.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:l.map(({value:e,label:n,attributes:a})=>(0,g.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:o,...a,className:(0,t.A)("tabs__item",x.tabItem,a?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function w({lazy:e,children:n,selectedValue:r}){const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=l.find(e=>e.props.value===r);return e?(0,a.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:l.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function f(e){const n=v(e);return(0,g.jsxs)("div",{className:(0,t.A)(l.G.tabs.container,"tabs-container",x.tabList),children:[(0,g.jsx)(y,{...n,...e}),(0,g.jsx)(w,{...n,...e})]})}function T(e){const n=(0,j.A)();return(0,g.jsx)(f,{...e,children:h(e.children)},String(n))}},19365:(e,n,r)=>{r.d(n,{A:()=>i});r(96540);var a=r(34164);const t={tabItem:"tabItem_Ymn6"};var l=r(74848);function i({children:e,hidden:n,className:r}){return(0,l.jsx)("div",{role:"tabpanel",className:(0,a.A)(t.tabItem,r),hidden:n,children:e})}},28453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var a=r(96540);const t={},l=a.createContext(t);function i(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(l.Provider,{value:n},e.children)}},72526:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"developers-guide/table-api","title":"Table API","description":"{/*","source":"@site/versioned_docs/version-3.0.0/developers-guide/table-api.md","sourceDirName":"developers-guide","slug":"/developers-guide/table-api","permalink":"/docs/ignite3/3.0.0/developers-guide/table-api","draft":false,"unlisted":false,"tags":[],"version":"3.0.0","frontMatter":{"title":"Table API","sidebar_label":"Table API"},"sidebar":"tutorialSidebar","previous":{"title":"Ignite CLI Tool","permalink":"/docs/ignite3/3.0.0/ignite-cli-tool"},"next":{"title":"Table API","permalink":"/docs/ignite3/3.0.0/developers-guide/table-api"}}');var t=r(74848),l=r(28453),i=r(11470),s=r(19365);const c={title:"Table API",sidebar_label:"Table API"},o=void 0,u={},d=[{value:"Table Views in Apache Ignite",id:"table-views-in-apache-ignite",level:2},{value:"Tuple and Key-Value Views",id:"tuple-and-key-value-views",level:3},{value:"Record and Key-Value Views",id:"record-and-key-value-views",level:3},{value:"Data Type Support",id:"data-type-support",level:2},{value:"Time and Date Data Types",id:"time-and-date-data-types",level:3},{value:"Getting a Table Instance",id:"getting-a-table-instance",level:2},{value:"Qualified Table Name Object",id:"qualified-table-name-object",level:3},{value:"Basic Table Operations",id:"basic-table-operations",level:2},{value:"Tuple Record View",id:"tuple-record-view",level:3},{value:"Record View",id:"record-view",level:3},{value:"Key-Value Tuple View",id:"key-value-tuple-view",level:3},{value:"Key-Value View",id:"key-value-view",level:3},{value:"Criterion Queries",id:"criterion-queries",level:2},{value:"Asynchronous Queries",id:"asynchronous-queries",level:3},{value:"Comparison Expressions",id:"comparison-expressions",level:3},{value:"Comparison Operators",id:"comparison-operators",level:3}];function h(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:["\n","\n",(0,t.jsx)(n.p,{children:"To execute table operations on a specific table, you need to get a specific view of the table and use one of its methods. You can only create new tables by using SQL API."}),"\n",(0,t.jsx)(n.p,{children:"Apache Ignite supports mapping user objects to table tuples. This ensures that objects created in any programming language can be used for key-value operations directly."}),"\n",(0,t.jsx)(n.h2,{id:"table-views-in-apache-ignite",children:"Table Views in Apache Ignite"}),"\n",(0,t.jsx)(n.h3,{id:"tuple-and-key-value-views",children:"Tuple and Key-Value Views"}),"\n",(0,t.jsx)(n.p,{children:"When working with tables, Apache Ignite offers two approaches: directly handling the data or mapping the data to classes. The direct data handling approach handles data tuples. Alternatively, when mapping data to classes, the data is converted to and from these classes as needed for database interactions."}),"\n",(0,t.jsx)(n.h3,{id:"record-and-key-value-views",children:"Record and Key-Value Views"}),"\n",(0,t.jsxs)(n.p,{children:["When creating views, you can create a ",(0,t.jsx)(n.code,{children:"RecordView"})," or ",(0,t.jsx)(n.code,{children:"KeyValueView"}),". The primary difference between these view types is the API used."]}),"\n",(0,t.jsx)(n.p,{children:'In a RecordView, you create a single "record" that includes all the information about a row to be updated or retrieved from the table, and send this record to the server. This record should contain all the fields, including the primary key.'}),"\n",(0,t.jsx)(n.p,{children:"In a KeyValueView, you work with key-value mappings. Think of it as a dictionary where the key object contains the primary key field or fields, and the value object contains the data fields. This approach is useful when primary key is not directly related to the domain object thus you prefer not to add the primary key to it."}),"\n",(0,t.jsx)(n.h2,{id:"data-type-support",children:"Data Type Support"}),"\n",(0,t.jsx)(n.h3,{id:"time-and-date-data-types",children:"Time and Date Data Types"}),"\n",(0,t.jsx)(n.p,{children:"Only JavaTime API is supported for working with table views. The following data types are not supported:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.util.Date"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.sql.Date"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.sql.Time"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.sql.Timestamp"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use the following data types instead:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.time.LocalDate"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.time.LocalTime"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.time.LocalDateTime"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"java.time.Instant"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"getting-a-table-instance",children:"Getting a Table Instance"}),"\n",(0,t.jsxs)(n.p,{children:["First, get an instance of the table. To obtain an instance of table, use the ",(0,t.jsx)(n.code,{children:"IgniteTables.table(String)"})," method. You can also use ",(0,t.jsx)(n.code,{children:"IgniteTables.tables()"})," method to list all existing tables."]}),"\n",(0,t.jsxs)(i.A,{groupId:"programming-languages",children:[(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"IgniteTables tableApi = client.tables();\r\nList<Table> existingTables = tableApi.tables();\r\nTable firstTable = existingTables.get(0);\n"})})}),(0,t.jsx)(s.A,{value:"dotnet",label:".NET",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'var existingTables = await Client.Tables.GetTablesAsync();\r\nvar firstTable = existingTables[0];\r\n\r\nvar myTable = await Client.Tables.GetTableAsync("MY_TABLE");\n'})})}),(0,t.jsx)(s.A,{value:"cpp",label:"C++",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'using namespace ignite;\r\n\r\nauto table_api = client.get_tables();\r\nstd::vector<table> existing_tables = table_api.get_tables();\r\ntable first_table = existing_tables.front();\r\n\r\nstd::optional<table> my_table = table_api.get_table("MY_TABLE");\n'})})})]}),"\n",(0,t.jsxs)(n.p,{children:["By default, if the schema name is not specified, the ",(0,t.jsx)(n.code,{children:"PUBLIC"})," schema is used. If a qualified name is specified, the table is taken from the specified schema."]}),"\n",(0,t.jsx)(n.h3,{id:"qualified-table-name-object",children:"Qualified Table Name Object"}),"\n",(0,t.jsxs)(n.p,{children:["Instead of using a string to specify table name, you can create a ",(0,t.jsx)(n.code,{children:"QualifiedName"})," object to hold a fully qualified table name. Apache Ignite provides 2 methods for creating qualified names:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You can parse the fully qualified table name with the ",(0,t.jsx)(n.code,{children:"parse"})," method:"]}),"\n"]}),"\n",(0,t.jsx)(i.A,{groupId:"programming-languages",children:(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'QualifiedName qualifiedTableName = QualifiedName.parse("PUBLIC.Person");\r\nTable myTable = tableApi.table(qualifiedTableName);\n'})})})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You can provide schema name and table name separately with the ",(0,t.jsx)(n.code,{children:"of"})," method:"]}),"\n"]}),"\n",(0,t.jsx)(i.A,{groupId:"programming-languages",children:(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'QualifiedName qualifiedTableName = QualifiedName.of("PUBLIC", "MY_TABLE");\r\nTable myTable = tableApi.table(qualifiedTableName);\n'})})})}),"\n",(0,t.jsx)(n.p,{children:"The provided names must follow SQL syntax rules for identifiers:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:['Identifier must start from a character in the "Lu", "Ll", "Lt", "Lm", "Lo", or "Nl" Unicode categories or ',(0,t.jsx)(n.code,{children:"U+0331"})," (underscore);"]}),"\n",(0,t.jsxs)(n.li,{children:["Identifier characters (except for the first one) may be ",(0,t.jsx)(n.code,{children:"U+00B7"}),' (middle dot), or any character in the "Mn", "Mc", "Nd", "Pc", or "Cf" Unicode categories;']}),"\n",(0,t.jsxs)(n.li,{children:["Identifiers that contain any other characters must be quoted with ",(0,t.jsx)(n.code,{children:"U+2033"})," (double-quotes);"]}),"\n",(0,t.jsx)(n.li,{children:"Double-quote inside the identifier must be escaped with 2 double-quote characters."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Any unquoted names will be cast to upper case. In this case, ",(0,t.jsx)(n.code,{children:"Person"})," and ",(0,t.jsx)(n.code,{children:"PERSON"})," names are equivalent. To avoid this, add escaped quotes around the name. For example, ",(0,t.jsx)(n.code,{children:'\\"Person\\"'})," will be encoded as a case-sensitive ",(0,t.jsx)(n.code,{children:"Person"})," name. If the name contains the ",(0,t.jsx)(n.code,{children:"U+2033"})," (double quote) symbol, it must be escaped as ",(0,t.jsx)(n.code,{children:'""'})," (2 double quote symbols)."]}),"\n",(0,t.jsx)(n.p,{children:"For example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'// Case-insensitive table `MY_TABLE` in a case-insensitive `PUBLIC` schema.\r\nQualifiedName.parse("public.my_table"))\r\n\r\n// Case-sensitive table `my_table` in a case-sensitive `public` schema.\r\nQualifiedName.parse("\\"public\\".\\"my_table\\""))\r\n\r\n// Same as above, but with comma as separator that needs to be surrounded by quote characters.\r\nQualifiedName.of("\\"public\\"","\\"my_table\\""))\r\n\r\n// Case-sensitive name my"table.\r\nQualifiedName.parse("\\"my\\"\\"table\\""));\r\n\r\n// Case-sensitive table name `public.my_table` in a default schema.\r\nQualifiedName.parse("\\"public.my_table\\""));\n'})}),"\n",(0,t.jsx)(n.h2,{id:"basic-table-operations",children:"Basic Table Operations"}),"\n",(0,t.jsx)(n.p,{children:"Once you've got a table you need to get a specific view to choose how you want to operate table records."}),"\n",(0,t.jsx)(n.h3,{id:"tuple-record-view",children:"Tuple Record View"}),"\n",(0,t.jsx)(n.p,{children:"A tuple record view can be used to operate on table tuples directly. When retrieving data from tuple views, you can use a wide variety of methods to retrieve type-specific data stored in tuples. A full list of methods is available in the Tuple object javadoc."}),"\n",(0,t.jsxs)(i.A,{groupId:"programming-languages",children:[(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'RecordView<Tuple> accounts = client.tables().table("accounts").recordView();\r\n\r\nSystem.out.println("\\nInserting a record into the \'accounts\' table...");\r\n\r\nTuple newAccountTuple = Tuple.create()\r\n        .set("accountNumber", 123456)\r\n        .set("firstName", "Val")\r\n        .set("lastName", "Kulichenko")\r\n        .set("balance", 100.00d);\r\n\r\naccounts.insert(null, newAccountTuple);\r\n\r\nSystem.out.println("\\nRetrieving a record using RecordView API...");\r\n\r\nTuple accountNumberTuple = Tuple.create().set("accountNumber", 123456);\r\n\r\nTuple accountTuple = accounts.get(null, accountNumberTuple);\r\n\r\nSystem.out.println(\r\n        "\\nRetrieved record:\\n"\r\n                + "    Account Number: " + accountTuple.intValue("accountNumber") + \'\\n\'\r\n                + "    Owner: " + accountTuple.stringValue("firstName") + " " + accountTuple.stringValue("lastName") + \'\\n\'\r\n                + "    Balance: $" + accountTuple.doubleValue("balance"));\n'})})}),(0,t.jsx)(s.A,{value:"dotnet",label:".NET",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'IRecordView<IIgniteTuple> view = table.RecordBinaryView;\r\n\r\nIIgniteTuple fullRecord = new IgniteTuple\r\n{\r\n  ["id"] = 42,\r\n  ["name"] = "John Doe"\r\n};\r\n\r\nawait view.UpsertAsync(transaction: null, fullRecord);\r\n\r\nIIgniteTuple keyRecord = new IgniteTuple { ["id"] = 42 };\r\n(IIgniteTuple value, bool hasValue) = await view.GetAsync(transaction: null, keyRecord);\r\n\r\nDebug.Assert(hasValue);\r\nDebug.Assert(value.FieldCount == 2);\r\nDebug.Assert(value["id"] as int? == 42);\r\nDebug.Assert(value["name"] as string == "John Doe");\n'})})}),(0,t.jsx)(s.A,{value:"cpp",label:"C++",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'record_view<ignite_tuple> view = table.get_record_binary_view();\r\n\r\nignite_tuple record{\r\n  {"id", 42},\r\n  {"name", "John Doe"}\r\n};\r\n\r\nview.upsert(nullptr, record);\r\nstd::optional<ignite_tuple> res_record = view.get(nullptr, {"id", 42});\r\n\r\nassert(res_record.has_value());\r\nassert(res_record->column_count() == 2);\r\nassert(res_record->get<std::int64_t>("id") == 42);\r\nassert(res_record->get<std::string>("name") == "John Doe");\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"record-view",children:"Record View"}),"\n",(0,t.jsx)(n.p,{children:"A record view maps to a user-defined type and enables table operations on user objects which are mapped to table tuples."}),"\n",(0,t.jsx)(n.p,{children:"Create the type converter:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"static class CityIdConverter implements TypeConverter<String, Integer> {\r\n\r\n    @Override\r\n    public String  toObjectType(Integer columnValue) {\r\n        return columnValue.toString();\r\n    }\r\n\r\n    @Override\r\n    public Integer toColumnType(String cityId) {\r\n        return Integer.parseInt(cityId);\r\n    }\r\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Then build the mapper and get the ",(0,t.jsx)(n.code,{children:"RecordView"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public static void main(String[] args) throws Exception {\r\n    var mapper = Mapper.builder(Person.class)\r\n            .automap()\r\n            .map("cityId", "city_id", new CityIdConverter())\r\n            .build();\r\n\r\n    try (IgniteClient client = IgniteClient.builder()\r\n            .addresses("127.0.0.1:10800")\r\n            .build()\r\n    ) {\r\n        RecordView<Person> view = client.tables()\r\n                .table("person")\r\n                .recordView(mapper);\r\n\r\n\r\n        Person myPerson = new Person(2, "2", "John Doe", 40, "Apache");\r\n\r\n        view.upsert(null, myPerson);\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Perform table operations on your custom objects mapped to table tuples:"}),"\n",(0,t.jsxs)(i.A,{groupId:"programming-languages",children:[(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'RecordView<Account> accounts = client.tables()\r\n        .table("accounts")\r\n        .recordView(Account.class);\r\n\r\nSystem.out.println("\\nInserting a record into the \'accounts\' table...");\r\n\r\nAccount newAccount = new Account(\r\n        123456,\r\n        "Val",\r\n        "Kulichenko",\r\n        100.00d\r\n);\r\n\r\naccounts.insert(null, newAccount);\r\n\r\nSystem.out.println("\\nRetrieving a record using RecordView API...");\r\n\r\nAccount account = accounts.get(null, new Account(123456));\r\n\r\nSystem.out.println(\r\n        "\\nRetrieved record:\\n"\r\n            + "    Account Number: " + account.accountNumber + \'\\n\'\r\n            + "    Owner: " + account.firstName + " " + account.lastName + \'\\n\'\r\n            + "    Balance: $" + account.balance);\n'})})}),(0,t.jsx)(s.A,{value:"dotnet",label:".NET",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'var pocoView = table.GetRecordView<Poco>();\r\n\r\nawait pocoView.UpsertAsync(transaction: null, new Poco(42, "John Doe"));\r\nvar (value, hasValue) = await pocoView.GetAsync(transaction: null, new Poco(42));\r\n\r\nDebug.Assert(hasValue);\r\nDebug.Assert(value.Name == "John Doe");\r\n\r\npublic record Poco(long Id, string? Name = null);\n'})})}),(0,t.jsx)(s.A,{value:"cpp",label:"C++",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'record_view<person> view = table.get_record_view<person>();\r\n\r\nperson record(42, "John Doe");\r\n\r\nview.upsert(nullptr, record);\r\nstd::optional<person> res_record = view.get(nullptr, person{42});\r\n\r\nassert(res.has_value());\r\nassert(res->id == 42);\r\nassert(res->name == "John Doe");\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"key-value-tuple-view",children:"Key-Value Tuple View"}),"\n",(0,t.jsx)(n.p,{children:"A tuple key-value view. It can be used to operate table using key and value tuples separately. When retrieving data from tuple views, you can use a wide variety of methods to retrieve type-specific data stored in tuples. A full list of methods is available in the Tuple object javadoc."}),"\n",(0,t.jsxs)(i.A,{groupId:"programming-languages",children:[(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'KeyValueView<Tuple, Tuple> kvView = client.tables().table("accounts").keyValueView();\r\n\r\nSystem.out.println("\\nInserting a key-value pair into the \'accounts\' table...");\r\n\r\nTuple key = Tuple.create()\r\n        .set("accountNumber", 123456);\r\n\r\nTuple value = Tuple.create()\r\n        .set("firstName", "Val")\r\n        .set("lastName", "Kulichenko")\r\n        .set("balance", 100.00d);\r\n\r\nkvView.put(null, key, value);\r\n\r\nSystem.out.println("\\nRetrieving a value using KeyValueView API...");\r\n\r\nvalue = kvView.get(null, key);\r\n\r\nSystem.out.println(\r\n        "\\nRetrieved value:\\n"\r\n                + "    Account Number: " + key.intValue("accountNumber") + \'\\n\'\r\n                + "    Owner: " + value.stringValue("firstName") + " " + value.stringValue("lastName") + \'\\n\'\r\n                + "    Balance: $" + value.doubleValue("balance"));\n'})})}),(0,t.jsx)(s.A,{value:"dotnet",label:".NET",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'IKeyValueView<IIgniteTuple, IIgniteTuple> kvView = table.KeyValueBinaryView;\r\n\r\nIIgniteTuple key = new IgniteTuple { ["id"] = 42 };\r\nIIgniteTuple val = new IgniteTuple { ["name"] = "John Doe" };\r\n\r\nawait kvView.PutAsync(transaction: null, key, val);\r\n(IIgniteTuple? value, bool hasValue) = await kvView.GetAsync(transaction: null, key);\r\n\r\nDebug.Assert(hasValue);\r\nDebug.Assert(value.FieldCount == 1);\r\nDebug.Assert(value["name"] as string == "John Doe");\n'})})}),(0,t.jsx)(s.A,{value:"cpp",label:"C++",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'key_value_view<ignite_tuple, ignite_tuple> kv_view = table.get_key_value_binary_view();\r\n\r\nignite_tuple key_tuple{{"id", 42}};\r\nignite_tuple val_tuple{{"name", "John Doe"}};\r\n\r\nkv_view.put(nullptr, key_tuple, val_tuple);\r\nstd::optional<ignite_tuple> res_tuple = kv_view.get(nullptr, key_tuple);\r\n\r\nassert(res_tuple.has_value());\r\nassert(res_tuple->column_count() == 2);\r\nassert(res_tuple->get<std::int64_t>("id") == 42);\r\nassert(res_tuple->get<std::string>("name") == "John Doe");\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"key-value-view",children:"Key-Value View"}),"\n",(0,t.jsx)(n.p,{children:"A key-value view with user objects. It can be used to operate table using key and value user objects mapped to table tuples."}),"\n",(0,t.jsxs)(i.A,{groupId:"programming-languages",children:[(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'KeyValueView<AccountKey, Account> kvView = client.tables()\r\n        .table("accounts")\r\n        .keyValueView(AccountKey.class, Account.class);\r\nSystem.out.println("\\nInserting a key-value pair into the \'accounts\' table...");\r\n\r\nAccountKey key = new AccountKey(123456);\r\n\r\nAccount value = new Account(\r\n        "Val",\r\n        "Kulichenko",\r\n        100.00d\r\n);\r\n\r\nkvView.put(null, key, value);\r\n\r\nSystem.out.println("\\nRetrieving a value using KeyValueView API...");\r\n\r\nvalue = kvView.get(null, key);\r\n\r\n\r\nSystem.out.println(\r\n        "\\nRetrieved value:\\n"\r\n            + "    Account Number: " + key.accountNumber + \'\\n\'\r\n            + "    Owner: " + value.firstName + " " + value.lastName + \'\\n\'\r\n            + "    Balance: $" + value.balance);\n'})})}),(0,t.jsx)(s.A,{value:"dotnet",label:".NET",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'IKeyValueView<long, Poco> kvView = table.GetKeyValueView<long, Poco>();\r\n\r\nawait kvView.PutAsync(transaction: null, 42, new Poco(Id: 0, Name: "John Doe"));\r\n(Poco? value, bool hasValue) = await kvView.GetAsync(transaction: null, 42);\r\n\r\nDebug.Assert(hasValue);\r\nDebug.Assert(value.Name == "John Doe");\r\n\r\npublic record Poco(long Id, string? Name = null);\n'})})}),(0,t.jsx)(s.A,{value:"cpp",label:"C++",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'key_value_view<person, person> kv_view = table.get_key_value_view<person, person>();\r\n\r\nkv_view.put(nullptr, {42}, {"John Doe"});\r\nstd::optional<person> res = kv_view.get(nullptr, {42});\r\n\r\nassert(res.has_value());\r\nassert(res->id == 42);\r\nassert(res->name == "John Doe");\n'})})})]}),"\n",(0,t.jsx)(n.h2,{id:"criterion-queries",children:"Criterion Queries"}),"\n",(0,t.jsx)(n.p,{children:"Apache Ignite provides the criterion queries that can be used to retrieve data from tables. Criterion queries work with any type of view, returning the appropriate data to the query specified."}),"\n",(0,t.jsx)(n.p,{children:"The example below shows how you can execute a query within an implicit transaction:"}),"\n",(0,t.jsx)(i.A,{groupId:"programming-languages",children:(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'try (Cursor<Entry<Tuple, Tuple>> cursor = table.keyValueView().query(\r\n        null, // Implicit transaction\r\n        // Query criteria\r\n        and(\r\n                columnValue("name", equalTo("John Doe")),\r\n                columnValue("age", greaterThan(20))\r\n        )\r\n)) {\r\n    // Process query results (keeping original cursor iteration pattern)\r\n    // As an example, println all matched values.\r\n    while (cursor.hasNext()) {\r\n        printRecord(cursor.next());\r\n    }\r\n}\n'})})})}),"\n",(0,t.jsxs)(n.p,{children:["The comparison query are specified by using the ",(0,t.jsx)(n.code,{children:"query()"})," method, and providing the comparison criteria in the ",(0,t.jsx)(n.code,{children:"columnValue"})," method."]}),"\n",(0,t.jsx)(n.p,{children:"You can also specify the specific transaction to execute the query in to perform the query in that specific transaction."}),"\n",(0,t.jsx)(i.A,{groupId:"programming-languages",children:(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'try (Cursor<Entry<Tuple, Tuple>> cursor = table.keyValueView().query(\r\n        transaction,\r\n        // Query criteria\r\n        and(\r\n                columnValue("name", equalTo("John Doe")),\r\n                columnValue("age", greaterThan(20))\r\n        )\r\n)) {\r\n    // Process query results\r\n    // As an example, println all matched values.\r\n    while (cursor.hasNext()) {\r\n        printRecord(cursor.next());\r\n    }\r\n\r\n    // Commit transaction if all operations succeed\r\n    transaction.commit();\r\n} catch (Exception e) {\r\n    // Rollback transaction on error\r\n    transaction.rollback();\r\n    throw new RuntimeException("Transaction failed", e);\r\n}\n'})})})}),"\n",(0,t.jsx)(n.h3,{id:"asynchronous-queries",children:"Asynchronous Queries"}),"\n",(0,t.jsxs)(n.p,{children:["You can also perform the query asynchronously by using the ",(0,t.jsx)(n.code,{children:"queryAsync"})," method. This way the query is executed without blocking the thread. For example, you can execute the above query asynchronously:"]}),"\n",(0,t.jsx)(i.A,{groupId:"programming-languages",children:(0,t.jsx)(s.A,{value:"java",label:"Java",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public static void performQueryAsync(Table table) {\r\n    System.out.println("[ Example 3 ] Performing asynchronous query");\r\n\r\n    AsyncCursor<Entry<Tuple, Tuple>> result = table.keyValueView().queryAsync(\r\n                    null, // Implicit transaction\r\n                    and(\r\n                            columnValue("name", equalTo("John Doe")),\r\n                            columnValue("age", greaterThan(20))\r\n                    )\r\n            )\r\n            .join();\r\n\r\n    for (Entry<Tuple, Tuple> tupleTupleEntry : result.currentPage()) {\r\n        printRecord(tupleTupleEntry);\r\n    }\r\n}\n'})})})}),"\n",(0,t.jsxs)(n.p,{children:["This operation uses the ",(0,t.jsx)(n.code,{children:"thenCompose()"})," method to handle the query results asynchronously in the user-defined ",(0,t.jsx)(n.code,{children:"fetchAllRowsInto()"})," method. Here is how this method may look like:"]}),"\n",(0,t.jsx)(n.h3,{id:"comparison-expressions",children:"Comparison Expressions"}),"\n",(0,t.jsx)(n.p,{children:"The following expressions are supported in criterion queries:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Expression"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"equalTo"})}),(0,t.jsx)(n.td,{children:"Checks if the object is equal to the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", equalTo("New York"))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notEqualTo"})}),(0,t.jsx)(n.td,{children:"Checks if the object is not equal to the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", notEqualTo("New York"))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"greaterThan"})}),(0,t.jsx)(n.td,{children:"Checks if the object is greater than the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("Salary", greaterThan(10000))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"greaterThanOrEqualTo"})}),(0,t.jsx)(n.td,{children:"Checks if the object is greater than or equal to the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("Salary", greaterThanOrEqualTo(10000))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"lessThan"})}),(0,t.jsx)(n.td,{children:"Checks if the object is less than the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("Salary", lessThan(10000))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"lessThanOrEqualTo"})}),(0,t.jsx)(n.td,{children:"Checks if the object is less than or equal to the value."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("Salary", lessThanOrEqualTo(10000))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nullValue"})}),(0,t.jsx)(n.td,{children:"Checks if the object is null."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", nullValue()'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notNullValue"})}),(0,t.jsx)(n.td,{children:"Checks if the object is not null."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", notNullValue())'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"in"})}),(0,t.jsx)(n.td,{children:"Checks if the object is in the collection."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", in("New York", "Washington"))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"notIn"})}),(0,t.jsx)(n.td,{children:"Checks if the object is not in the collection."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'columnValue("City", notIn("New York", "Washington"))'})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"comparison-operators",children:"Comparison Operators"}),"\n",(0,t.jsx)(n.p,{children:"The following operators are supported in criterion queries:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"not"})}),(0,t.jsx)(n.td,{children:"Negates the condition."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'not(columnValue("City", equalTo("New York")))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"and"})}),(0,t.jsx)(n.td,{children:"Used to evaluate multiple conditions at the same time."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'and(columnValue("City", equalTo("New York")), columnValue("Salary", greaterThan(10000)))'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"or"})}),(0,t.jsx)(n.td,{children:"Used to evaluate for at least one matching condition."}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'or(columnValue("City", equalTo("New York")), columnValue("Salary", greaterThan(10000)))'})})]})]})]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);
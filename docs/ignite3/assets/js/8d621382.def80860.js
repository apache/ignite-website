"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3517],{11470:(e,n,t)=>{t.d(n,{A:()=>k});var r=t(96540),s=t(34164),i=t(17559),a=t(23104),l=t(56347),c=t(205),o=t(57485),d=t(31682),u=t(70679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function g({value:e,tabValues:n}){return n.some(n=>n.value===e)}function x({queryString:e=!1,groupId:n}){const t=(0,l.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(s),(0,r.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,i=p(e),[a,l]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i})),[o,d]=x({queryString:t,groupId:s}),[h,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,u.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),b=(()=>{const e=o??h;return g({value:e,tabValues:i})?e:null})();(0,c.A)(()=>{b&&l(b)},[b]);return{selectedValue:a,selectValue:(0,r.useCallback)(e=>{if(!g({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),m(e)},[d,m,i]),tabValues:i}}var b=t(92303);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(74848);function f({className:e,block:n,selectedValue:t,selectValue:r,tabValues:i}){const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),o=e=>{const n=e.currentTarget,s=l.indexOf(n),a=i[s].value;a!==t&&(c(n),r(a))},d=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:r})=>(0,v.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:o,...r,className:(0,s.A)("tabs__item",j.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function _(e){const n=m(e);return(0,v.jsxs)("div",{className:(0,s.A)(i.G.tabs.container,"tabs-container",j.tabList),children:[(0,v.jsx)(f,{...n,...e}),(0,v.jsx)(y,{...n,...e})]})}function k(e){const n=(0,b.A)();return(0,v.jsx)(_,{...e,children:h(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var r=t(34164);const s={tabItem:"tabItem_Ymn6"};var i=t(74848);function a({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var r=t(96540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},47709:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"developers-guide/clients/cpp","title":"C++ Client","description":"{/*","source":"@site/versioned_docs/version-3.0.0/developers-guide/clients/cpp.md","sourceDirName":"developers-guide/clients","slug":"/developers-guide/clients/cpp","permalink":"/docs/ignite3/3.0.0/developers-guide/clients/cpp","draft":false,"unlisted":false,"tags":[],"version":"3.0.0","frontMatter":{"title":"C++ Client","sidebar_label":"C++"},"sidebar":"tutorialSidebar","previous":{"title":".NET","permalink":"/docs/ignite3/3.0.0/developers-guide/clients/dotnet"},"next":{"title":"Python","permalink":"/docs/ignite3/3.0.0/developers-guide/clients/python"}}');var s=t(74848),i=t(28453),a=t(11470),l=t(19365);const c={title:"C++ Client",sidebar_label:"C++"},o=void 0,d={},u=[{value:"Getting Started",id:"getting-started",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation",id:"build-ref",level:3},{value:"Building C++ Client on CentOS 7 and RHEL 7",id:"building-c-client-on-centos-7-and-rhel-7",level:3},{value:"Client Connector Configuration",id:"client-connector-configuration",level:2},{value:"Connecting to Cluster",id:"connecting-to-cluster",level:2},{value:"Authentication",id:"authentication",level:2},{value:"User Object Serialization",id:"user-object-serialization",level:2},{value:"Limitations",id:"limitations",level:3},{value:"Usage Examples",id:"usage-examples",level:3},{value:"SQL API",id:"sql-api",level:2},{value:"SQL Scripts",id:"sql-scripts",level:3},{value:"Transactions",id:"transactions",level:2},{value:"Table API",id:"table-api",level:2},{value:"Getting a Table Instance",id:"getting-a-table-instance",level:3},{value:"Basic Table Operations",id:"basic-table-operations",level:3},{value:"Binary Record View",id:"binary-record-view",level:4},{value:"Record View",id:"record-view",level:4},{value:"Key-Value Binary View",id:"key-value-binary-view",level:4},{value:"Key-Value View",id:"key-value-view",level:4}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:["\n","\n",(0,s.jsx)(n.p,{children:"Ignite 3 clients connect to the cluster via a standard socket connection. Unlike Ignite 2.x, there is no separate Thin and Thick clients in Ignite 3. All clients are 'thin'."}),"\n",(0,s.jsx)(n.p,{children:"Clients do not become a part of the cluster topology, never hold any data, and are not used as a destination for compute calculations."}),"\n",(0,s.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["To run C++ client, you need a C++ build environment to run the ",(0,s.jsx)(n.code,{children:"cmake"})," command:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"C++ compiler supporting C++ 17;"}),"\n",(0,s.jsx)(n.li,{children:"CMake 3.10+;"}),"\n",(0,s.jsx)(n.li,{children:"One of build systems: make, ninja, MS Visual Studio, or other."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"build-ref",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"The source code of the C++ client comes with the Ignite 3 distribution. To build it, use the following commands:"}),"\n",(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{value:"Windows",label:"Windows",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bat",children:"mkdir cmake-build-release\r\ncd cmake-build-release\r\ncmake ..\r\ncmake --build . -j8\n"})})}),(0,s.jsx)(l.A,{value:"Linux",label:"Linux",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir cmake-build-release\r\ncd cmake-build-release\r\ncmake .. -DCMAKE_BUILD_TYPE=Release\r\ncmake --build . -j8\n"})})}),(0,s.jsx)(l.A,{value:"MacOS",label:"MacOS",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir cmake-build-release\r\ncd cmake-build-release\r\ncmake .. -DCMAKE_BUILD_TYPE=Release\r\ncmake --build . -j8\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"building-c-client-on-centos-7-and-rhel-7",children:"Building C++ Client on CentOS 7 and RHEL 7"}),"\n",(0,s.jsx)(n.p,{children:"If you are running on older systems, you need to set up the environment in the following way:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Install ",(0,s.jsx)(n.code,{children:"epel-release"})," and ",(0,s.jsx)(n.code,{children:"centos-release-scl"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yum install epel-release centos-release-scl\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Update yum and accept ",(0,s.jsx)(n.code,{children:"epel-release"})," keys:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yum update\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Install the build tools from the main repository and ",(0,s.jsx)(n.code,{children:"devtoolset-11"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yum install devtoolset-11-gcc devtoolset-11-gcc-c++ cmake3 git java-11-openjdk-devel gtest-devel gmock-devel\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Create and update alternatives for ",(0,s.jsx)(n.code,{children:"cmake"})," to force the use of ",(0,s.jsx)(n.code,{children:"cmake3"}),":","\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create an alternative for ",(0,s.jsx)(n.code,{children:"cmake2"})," with priority 10:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo alternatives --install /usr/local/bin/cmake cmake /usr/bin/cmake 10 \\\r\n--slave /usr/local/bin/ctest ctest /usr/bin/ctest \\\r\n--slave /usr/local/bin/cpack cpack /usr/bin/cpack \\\r\n--slave /usr/local/bin/ccmake ccmake /usr/bin/ccmake \\\r\n--family cmake\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Create an alternative for ",(0,s.jsx)(n.code,{children:"cmake3"})," with priority 20:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo alternatives --install /usr/local/bin/cmake cmake /usr/bin/cmake3 20 \\\r\n--slave /usr/local/bin/ctest ctest /usr/bin/ctest3 \\\r\n--slave /usr/local/bin/cpack cpack /usr/bin/cpack3 \\\r\n--slave /usr/local/bin/ccmake ccmake /usr/bin/ccmake3 \\\r\n--family cmake\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Check that the default alternative points to ",(0,s.jsx)(n.code,{children:"cmake3"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo alternatives --config cmake\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["Enable the ",(0,s.jsx)(n.code,{children:"devtoolset-11"})," compiler and start bash with the updated PATH:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"scl enable devtoolset-11 bash\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["Start the ",(0,s.jsx)(n.a,{href:"#build-ref",children:"build"})," in the shell you have established."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"client-connector-configuration",children:"Client Connector Configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Client connection parameters are controlled by the client connector configuration. By default, Ignite accepts client connections on port 10800. You can change the configuration for the node by using the ",(0,s.jsx)(n.a,{href:"/docs/ignite3/3.0.0/ignite-cli-tool",children:"CLI tool"})," at any time."]}),"\n",(0,s.jsx)(n.p,{children:"Here is how the client connector configuration looks like in the JSON format."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"In Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"ignite" : {\r\n  "clientConnector" : {\r\n    "port" : 10800,\r\n    "idleTimeoutMillis" :3000,\r\n    "sendServerExceptionStackTraceToClient" : true,\r\n    "ssl" : {\r\n      "enabled" : true,\r\n      "clientAuth" : "require",\r\n      "keyStore" : {\r\n        "path" : "KEYSTORE_PATH",\r\n        "password" : "SSL_STORE_PASS"\r\n      },\r\n      "trustStore" : {\r\n        "path" : "TRUSTSTORE_PATH",\r\n        "password" : "SSL_STORE_PASS"\r\n      },\r\n    },\r\n  },\r\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"The table below covers the configuration for client connector:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"connectTimeoutMillis"}),(0,s.jsx)(n.td,{children:"5000"}),(0,s.jsx)(n.td,{children:"Connection attempt timeout, in milliseconds."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"idleTimeoutMillis"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"How long the client can be idle before the connection is dropped, in milliseconds. By default, there is no limit."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"metricsEnabled"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"Defines if client metrics are collected."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"port"}),(0,s.jsx)(n.td,{children:"10800"}),(0,s.jsx)(n.td,{children:"The port the client connector will be listening to."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sendServerExceptionStackTraceToClient"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"Defines if cluster exceptions are sent to the client."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.ciphers"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"The cipher used for SSL communication."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.clientAuth"}),(0,s.jsx)(n.td,{}),(0,s.jsxs)(n.td,{children:["Type of client authentication used by clients. For more information, see ",(0,s.jsx)(n.a,{href:"/docs/ignite3/3.0.0/administrators-guide/security/ssl-tls",children:"SSL/TLS"}),"."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.enabled"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Defines if SSL is enabled."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.keyStore.password"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"SSL keystore password."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.keyStore.path"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Path to the SSL keystore."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.keyStore.type"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PKCS12"})}),(0,s.jsx)(n.td,{children:"The type of SSL keystore used."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.trustStore.password"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"SSL keystore password."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.trustStore.path"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"Path to the SSL keystore."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ssl.trustStore.type"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"PKCS12"})}),(0,s.jsx)(n.td,{children:"The type of SSL keystore used."})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Here is how you can change the parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"node config update clientConnector.port=10469\n"})}),"\n",(0,s.jsx)(n.h2,{id:"connecting-to-cluster",children:"Connecting to Cluster"}),"\n",(0,s.jsxs)(n.p,{children:["To initialize a client, use the ",(0,s.jsx)(n.code,{children:"IgniteClient"})," class, and provide it with the configuration:"]}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'using namespace ignite;\r\n\r\nignite_client_configuration cfg{"127.0.0.1"};\r\nauto client = ignite_client::start(cfg, std::chrono::seconds(5));\n'})})})}),"\n",(0,s.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.p,{children:["To pass authentication information, pass it to ",(0,s.jsx)(n.code,{children:"IgniteClient"})," builder:"]}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'auto authenticator = std::make_shared<ignite::basic_authenticator>("myUser", "myPassword");\r\n\r\nignite::ignite_client_configuration cfg{"127.0.0.1:10800"};\r\ncfg.set_authenticator(authenticator);\r\nauto client = ignite_client::start(std::move(cfg), std::chrono::seconds(30));\n'})})})}),"\n",(0,s.jsx)(n.h2,{id:"user-object-serialization",children:"User Object Serialization"}),"\n",(0,s.jsx)(n.p,{children:"Ignite supports mapping user objects to table tuples. This ensures that objects created in any programming language can be used for key-value operations directly."}),"\n",(0,s.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,s.jsx)(n.p,{children:"There are limitations to user types that can be used for such a mapping. Some limitations are common, and others are platform-specific due to the programming language used."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only flat field structure is supported, meaning no nesting user objects. This is because Ignite tables, and therefore tuples have flat structure themselves;"}),"\n",(0,s.jsx)(n.li,{children:"Fields should be mapped to Ignite types;"}),"\n",(0,s.jsx)(n.li,{children:"All fields in user type should either be mapped to Table column or explicitly excluded;"}),"\n",(0,s.jsx)(n.li,{children:"All columns from Table should be mapped to some field in the user type;"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"C++ only"}),": User has to provide marshalling functions explicitly as there is no reflection to generate them based on user type structure."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'struct account {\r\n  account() = default;\r\n  account(std::int64_t id) : id(id) {}\r\n  account(std::int64_t id, std::int64_t balance) : id(id), balance(balance) {}\r\n\r\n  std::int64_t id{0};\r\n  std::int64_t balance{0};\r\n};\r\n\r\nnamespace ignite {\r\n\r\n  template<>\r\n  ignite_tuple convert_to_tuple(account &&value) {\r\n    ignite_tuple tuple;\r\n\r\n    tuple.set("id", value.id);\r\n    tuple.set("balance", value.balance);\r\n\r\n    return tuple;\r\n  }\r\n\r\n  template<>\r\n  account convert_from_tuple(ignite_tuple&& value) {\r\n    account res;\r\n\r\n    res.id = value.get<std::int64_t>("id");\r\n\r\n    // Sometimes only key columns are returned, i.e. "id",\r\n    // so we have to check whether there are any other columns.\r\n    if (value.column_count() > 1)\r\n      res.balance = value.get<std::int64_t>("balance");\r\n\r\n    return res;\r\n  }\r\n\r\n} // namespace ignite\n'})})})}),"\n",(0,s.jsx)(n.h2,{id:"sql-api",children:"SQL API"}),"\n",(0,s.jsxs)(n.p,{children:["Ignite 3 is focused on SQL, and SQL API is the primary way to work with the data. You can read more about supported SQL statements in the ",(0,s.jsx)(n.a,{href:"/docs/ignite3/3.0.0/sql-reference/ddl",children:"SQL Reference"})," section. Here is how you can send SQL requests:"]}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'result_set result = client.get_sql().execute(nullptr, {"select name from tbl where id = ?"}, {std::int64_t{42}});\r\nstd::vector<ignite_tuple> page = result_set.current_page();\r\nignite_tuple& row = page.front();\n'})})})}),"\n",(0,s.jsx)(n.h3,{id:"sql-scripts",children:"SQL Scripts"}),"\n",(0,s.jsxs)(n.p,{children:["The default API executes SQL statements one at a time. If you want to execute large SQL statements, pass them to the ",(0,s.jsx)(n.code,{children:"executeScript()"})," method. These statements will be executed in order."]}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'std::string script = ""\r\n\t+ "CREATE TABLE IF NOT EXISTS Person (id int primary key, city_id int, name varchar, age int, company varchar);"\r\n\t+ "INSERT INTO Person (1,3, \'John\', 43, \'Sample\')";\r\n\r\nclient.get_sql().execute_script(script);\n'})})})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Execution of each statement is considered complete when the first page is ready to be returned. As a result, when working with large data sets, SELECT statement may be affected by later statements in the same script."})}),"\n",(0,s.jsx)(n.h2,{id:"transactions",children:"Transactions"}),"\n",(0,s.jsx)(n.p,{children:"All table operations in Ignite 3 are transactional. You can provide an explicit transaction as a first argument of any Table and SQL API call. If you do not provide an explicit transaction, an implicit one will be created for every call."}),"\n",(0,s.jsx)(n.p,{children:"Here is how you  can provide a transaction explicitly:"}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"auto accounts = table.get_key_value_view<account, account>();\r\n\r\naccount init_value(42, 16'000);\r\naccounts.put(nullptr, {42}, init_value);\r\n\r\nauto tx = client.get_transactions().begin();\r\n\r\nstd::optional<account> res_account = accounts.get(&tx, {42});\r\nres_account->balance += 500;\r\naccounts.put(&tx, {42}, res_account);\r\n\r\nassert(accounts.get(&tx, {42})->balance == 16'500);\r\n\r\ntx.rollback();\r\n\r\nassert(accounts.get(&tx, {42})->balance == 16'000);\n"})})})}),"\n",(0,s.jsx)(n.h2,{id:"table-api",children:"Table API"}),"\n",(0,s.jsx)(n.p,{children:"To execute table operations on a specific table, you need to get a specific view of the table and use one of its methods. You can only create new tables by using SQL API."}),"\n",(0,s.jsx)(n.p,{children:"When working with tables, you can use built-in Tuple type, which is a set of key-value pairs underneath, or map the data to your own types for a strongly-typed access. Here is how you can work with tables:"}),"\n",(0,s.jsx)(n.h3,{id:"getting-a-table-instance",children:"Getting a Table Instance"}),"\n",(0,s.jsxs)(n.p,{children:["First, get an instance of the table. To obtain an instance of table, use the ",(0,s.jsx)(n.code,{children:"IgniteTables.table(String)"})," method. You can also use ",(0,s.jsx)(n.code,{children:"IgniteTables.tables()"})," method to list all existing tables."]}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'using namespace ignite;\r\n\r\nauto table_api = client.get_tables();\r\nstd::vector<table> existing_tables = table_api.get_tables();\r\ntable first_table = existing_tables.front();\r\n\r\nstd::optional<table> my_table = table_api.get_table("MY_TABLE");\n'})})})}),"\n",(0,s.jsx)(n.h3,{id:"basic-table-operations",children:"Basic Table Operations"}),"\n",(0,s.jsx)(n.p,{children:"Once you've got a table you need to get a specific view to choose how you want to operate table records."}),"\n",(0,s.jsx)(n.h4,{id:"binary-record-view",children:"Binary Record View"}),"\n",(0,s.jsx)(n.p,{children:"A binary record view. It can be used to operate table tuples directly."}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'record_view<ignite_tuple> view = table.get_record_binary_view();\r\n\r\nignite_tuple record{\r\n  {"id", 42},\r\n  {"name", "John Doe"}\r\n};\r\n\r\nview.upsert(nullptr, record);\r\nstd::optional<ignite_tuple> res_record = view.get(nullptr, {"id", 42});\r\n\r\nassert(res_record.has_value());\r\nassert(res_record->column_count() == 2);\r\nassert(res_record->get<std::int64_t>("id") == 42);\r\nassert(res_record->get<std::string>("name") == "John Doe");\n'})})})}),"\n",(0,s.jsx)(n.h4,{id:"record-view",children:"Record View"}),"\n",(0,s.jsx)(n.p,{children:"A record view mapped to a user type. It can be used to operate table using user objects which are mapped to table tuples."}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'record_view<person> view = table.get_record_view<person>();\r\n\r\nperson record(42, "John Doe");\r\n\r\nview.upsert(nullptr, record);\r\nstd::optional<person> res_record = view.get(nullptr, person{42});\r\n\r\nassert(res.has_value());\r\nassert(res->id == 42);\r\nassert(res->name == "John Doe");\n'})})})}),"\n",(0,s.jsx)(n.h4,{id:"key-value-binary-view",children:"Key-Value Binary View"}),"\n",(0,s.jsx)(n.p,{children:"A binary key-value view. It can be used to operate table using key and value tuples separately."}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'key_value_view<ignite_tuple, ignite_tuple> kv_view = table.get_key_value_binary_view();\r\n\r\nignite_tuple key_tuple{{"id", 42}};\r\nignite_tuple val_tuple{{"name", "John Doe"}};\r\n\r\nkv_view.put(nullptr, key_tuple, val_tuple);\r\nstd::optional<ignite_tuple> res_tuple = kv_view.get(nullptr, key_tuple);\r\n\r\nassert(res_tuple.has_value());\r\nassert(res_tuple->column_count() == 2);\r\nassert(res_tuple->get<std::int64_t>("id") == 42);\r\nassert(res_tuple->get<std::string>("name") == "John Doe");\n'})})})}),"\n",(0,s.jsx)(n.h4,{id:"key-value-view",children:"Key-Value View"}),"\n",(0,s.jsx)(n.p,{children:"A key-value view with user objects. It can be used to operate table using key and value user objects mapped to table tuples."}),"\n",(0,s.jsx)(a.A,{groupId:"programming-languages",children:(0,s.jsx)(l.A,{value:"C++",label:"C++",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'key_value_view<person, person> kv_view = table.get_key_value_view<person, person>();\r\n\r\nkv_view.put(nullptr, {42}, {"John Doe"});\r\nstd::optional<person> res = kv_view.get(nullptr, {42});\r\n\r\nassert(res.has_value());\r\nassert(res->id == 42);\r\nassert(res->name == "John Doe");\n'})})})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);
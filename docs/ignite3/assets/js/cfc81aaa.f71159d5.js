"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8345],{22462:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"getting-started/embedded-mode","title":"Embedded Mode","description":"In most scenarios, you would use Ignite CLI tool to start and manage your Ignite cluster. However, in some scenarios it is preferable to manage the cluster from a Java project. Starting and working with the cluster from code is called \\"embedded mode\\".","source":"@site/docs/getting-started/embedded-mode.md","sourceDirName":"getting-started","slug":"/getting-started/embedded-mode","permalink":"/docs/ignite3/3.1.0/getting-started/embedded-mode","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Embedded Mode"},"sidebar":"tutorialSidebar","previous":{"title":"Using Java API","permalink":"/docs/ignite3/3.1.0/getting-started/key-value-api"},"next":{"title":"Configuration Tips","permalink":"/docs/ignite3/3.1.0/getting-started/best-practices"}}');var r=t(74848),a=t(28453);const s={title:"Embedded Mode"},o=void 0,d={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Add Ignite to Your Project",id:"add-ignite-to-your-project",level:2},{value:"Prepare Ignite Configuration",id:"prepare-ignite-configuration",level:2},{value:"Pass JVM Parameters",id:"pass-jvm-parameters",level:2},{value:"Start Ignite Server Nodes",id:"start-ignite-server-nodes",level:2},{value:"Initiate a Cluster",id:"initiate-a-cluster",level:2},{value:"Get an Ignite Instance",id:"get-an-ignite-instance",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:'In most scenarios, you would use Ignite CLI tool to start and manage your Ignite cluster. However, in some scenarios it is preferable to manage the cluster from a Java project. Starting and working with the cluster from code is called "embedded mode".'}),"\n",(0,r.jsx)(n.p,{children:"This tutorial covers how you can start Ignite 3 from your Java project."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"Unlike in Ignite 2, nodes in Ignite 3 are not separated into client and server nodes. Nodes started from embedded mode will be used to store data by default."})}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"This section describes the platform requirements for machines running Ignite. Ignite system requirements scale depending on the size of the cluster."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Requirement"}),(0,r.jsx)(n.th,{children:"Version"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"JDK"}),(0,r.jsx)(n.td,{children:"11 and later"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"OS"}),(0,r.jsx)(n.td,{children:"Linux (Debian and Red Hat flavours), Windows 10 or 11"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"ISA"}),(0,r.jsx)(n.td,{children:"x86 or x64"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"add-ignite-to-your-project",children:"Add Ignite to Your Project"}),"\n",(0,r.jsx)(n.p,{children:"First, you need to add Ignite to your project. The easiest way to do this is by using Maven:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<build>\r\n    <plugins>\r\n        <plugin>\r\n            <groupId>org.apache.maven.plugins</groupId>\r\n            <artifactId>maven-compiler-plugin</artifactId>\r\n            <configuration>\r\n                <source>11</source>\r\n                <target>11</target>\r\n            </configuration>\r\n        </plugin>\r\n    </plugins>\r\n</build>\r\n\r\n<dependencies>\r\n    <dependency>\r\n        <groupId>org.apache.ignite</groupId>\r\n        <artifactId>ignite-api</artifactId>\r\n        <version>3.0.0</version>\r\n    </dependency>\r\n\r\n    <dependency>\r\n        <groupId>org.apache.ignite</groupId>\r\n        <artifactId>ignite-runner</artifactId>\r\n        <version>3.0.0</version>\r\n    </dependency>\r\n</dependencies>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"prepare-ignite-configuration",children:"Prepare Ignite Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["To start an Ignite node, you will need an Ignite configuration file that specifies all configuration properties of the node. For this tutorial, we recommend ",(0,r.jsx)(n.a,{href:"/3.1.0/configure-and-operate/installation/install-zip",children:"installing"})," Ignite 3 and using a default configuration file from it. This file is stored in the ",(0,r.jsx)(n.code,{children:"ignite3-db-3.0.0/etc/ignite-config.conf"})," file."]}),"\n",(0,r.jsx)(n.h2,{id:"pass-jvm-parameters",children:"Pass JVM Parameters"}),"\n",(0,r.jsx)(n.p,{children:"The following JVM parameters need to be passed to your application to make proprietary SDK APIs available:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"--add-opens java.base/java.lang=ALL-UNNAMED\r\n--add-opens java.base/java.lang.invoke=ALL-UNNAMED\r\n--add-opens java.base/java.lang.reflect=ALL-UNNAMED\r\n--add-opens java.base/java.io=ALL-UNNAMED\r\n--add-opens java.base/java.nio=ALL-UNNAMED\r\n--add-opens java.base/java.math=ALL-UNNAMED\r\n--add-opens java.base/java.util=ALL-UNNAMED\r\n--add-opens java.base/java.time=ALL-UNNAMED\r\n--add-opens java.base/jdk.internal.misc=ALL-UNNAMED\r\n--add-opens java.base/jdk.internal.access=ALL-UNNAMED\r\n--add-opens java.base/sun.nio.ch=ALL-UNNAMED\r\n-Dio.netty.tryReflectionSetAccessible=true\n"})}),"\n",(0,r.jsx)(n.h2,{id:"start-ignite-server-nodes",children:"Start Ignite Server Nodes"}),"\n",(0,r.jsx)(n.p,{children:"To start an Ignite node, use the following code snippet:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'IgniteServer node = IgniteServer.start("node", configFilePath, workDir);\n'})}),"\n",(0,r.jsxs)(n.p,{children:["This code snippet starts an Ignite node with the name ",(0,r.jsx)(n.code,{children:"node1"}),", that uses the configuration from the file specified in the ",(0,r.jsx)(n.code,{children:"configFilePath"})," path parameter and uses the folder specified in the ",(0,r.jsx)(n.code,{children:"workDir"})," path parameter to store data. When the node is started, this method returns an instance of ",(0,r.jsx)(n.code,{children:"IgniteServer"})," class that can be used to work with the node."]}),"\n",(0,r.jsx)(n.h2,{id:"initiate-a-cluster",children:"Initiate a Cluster"}),"\n",(0,r.jsx)(n.p,{children:"Started nodes find each other by default, but they do not form an operational cluster unless the cluster is initiated. You need to initiate the cluster to activate the node. If there are multiple nodes, once the cluster is activated, they will form a topology and automatically distribute workload between each other."}),"\n",(0,r.jsx)(n.p,{children:"Use the code snippet below to initiate a cluster:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'InitParameters initParameters = InitParameters.builder()\r\n    .metaStorageNodeNames("node")\r\n    .clusterName("cluster")\r\n    .clusterConfiguration({config-with-license})\r\n    .build();\r\n\r\nnode.initCluster(initParameters);\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["To start an Ignite 3 cluster, you need to provide a license together with the cluster configuration in the ",(0,r.jsx)(n.code,{children:"clusterConfiguration"})," parameter."]})}),"\n",(0,r.jsx)(n.h2,{id:"get-an-ignite-instance",children:"Get an Ignite Instance"}),"\n",(0,r.jsxs)(n.p,{children:["Now that the cluster is started, you can get an instance of the ",(0,r.jsx)(n.code,{children:"Ignite"})," class:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Ignite ignite = node.api();\n"})}),"\n",(0,r.jsx)(n.p,{children:"This instance can be used to start working with the cluster. The future will be returned once the cluster is active."}),"\n",(0,r.jsx)(n.p,{children:"In the following example, you interact with the cluster using the SQL API:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'ignite.sql().execute(null, "CREATE TABLE IF NOT EXISTS Person (id int primary key, name varchar, age int);");\r\nignite.sql().execute(null, "insert into Person (id, name, age) values (\'1\', \'Person Man\', \'501\'");\r\ntry (ResultSet<SqlRow> rs = ignite.sql().execute(null, "SELECT id, name, age from Person")) {\r\n    while (rs.hasNext()) {\r\n        SqlRow row = rs.next();\r\n        System.out.println("    "\r\n                + row.value(1) + ", "\r\n                + row.value(2));\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Session is closable, but it is safe to skip ",(0,r.jsx)(n.code,{children:"close()"})," method for DDL and DML queries, as they do not keep cursor open."]})}),"\n",(0,r.jsxs)(n.p,{children:["More examples of working with Ignite can be found in the ",(0,r.jsx)(n.a,{href:"https://github.com/apache/ignite-3/tree/main/examples",children:"examples"})," repository."]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(n.p,{children:"From here, you may want to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Check out the ",(0,r.jsx)(n.a,{href:"/3.1.0/develop/work-with-data/table-api",children:"Developers guide"})," page for more information on available APIs"]}),"\n",(0,r.jsxs)(n.li,{children:["Try out our ",(0,r.jsx)(n.a,{href:"https://github.com/apache/ignite-3/tree/main/examples",children:"examples"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var i=t(96540);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3164],{5119:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"configure-and-operate/configuration/config-ssl-tls","title":"SSL/TLS","description":"This page explains how to configure SSL/TLS encryption between the cluster nodes (server and client) and the clients that connect to your cluster.","source":"@site/docs/configure-and-operate/configuration/ssl-tls.md","sourceDirName":"configure-and-operate/configuration","slug":"/configure-and-operate/configuration/config-ssl-tls","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/config-ssl-tls","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"config-ssl-tls","title":"SSL/TLS","sidebar_label":"SSL/TLS"},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/config-authentication"},"next":{"title":"Metrics","permalink":"/docs/ignite3/3.1.0/configure-and-operate/configuration/metrics-configuration"}}');var i=t(74848),o=t(28453);const s={id:"config-ssl-tls",title:"SSL/TLS",sidebar_label:"SSL/TLS"},a=void 0,c={},l=[{value:"Considerations",id:"considerations",level:2},{value:"REST",id:"rest",level:2},{value:"Clients and JDBC",id:"clients-and-jdbc",level:2},{value:"Server-side Configuration",id:"server-side-configuration",level:3},{value:"Client Configuration",id:"client-configuration",level:2},{value:"Java",id:"java",level:3},{value:".NET",id:"net",level:3},{value:"CLI",id:"cli",level:3},{value:"Network Configuration",id:"network-configuration",level:2},{value:"SSL Client Authentication (mTLS Support)",id:"ssl-client-authentication-mtls-support",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This page explains how to configure SSL/TLS encryption between the cluster nodes (server and client) and the clients that connect to your cluster."}),"\n",(0,i.jsx)(n.h2,{id:"considerations",children:"Considerations"}),"\n",(0,i.jsx)(n.p,{children:"All internal connections in the cluster context, as well as cluster's user interaction interfaces, are SSL-enabled. The communication categories are as follows:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Between the user and the cluster (node): REST"}),"\n",(0,i.jsx)(n.li,{children:"Between the user and the platform clients"}),"\n",(0,i.jsx)(n.li,{children:"Between nodes: Network (Messaging, Scalecube)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"All SSL configurations activities are performed at the node level."}),"\n",(0,i.jsx)(n.p,{children:"Apache Ignite does not support direct paths to SSL certificates. Instead, it utilizes PKCS12 and JKS keystore."}),"\n",(0,i.jsx)(n.h2,{id:"rest",children:"REST"}),"\n",(0,i.jsx)(n.p,{children:"The standard implementation of SSL for REST involves configuring a secure connection on a separate port. Apache Ignite supports HTTP and HTTPS, each on its own port."}),"\n",(0,i.jsx)(n.p,{children:"The Apache Ignite 3 REST security configuration in the JSON format is provided below."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"In Apache Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "ignite" : {\r\n        "rest" : {\r\n            "dualProtocol" : false,\r\n            "httpToHttpsRedirection" : false,\r\n            "port" : 10300,\r\n            "ssl" : {\r\n                "ciphers" : "",\r\n                "clientAuth" : "require",\r\n                "enabled" : true,\r\n                "keyStore" : {\r\n                    "password" : "may be empty",\r\n                    "path" : "must not be empty",\r\n                    "type" : "PKCS12"\r\n                },\r\n                "port" : 10400,\r\n                "trustStore" : {\r\n                    "password" : "may be empty",\r\n                    "path" : "must not be empty",\r\n                    "type" : "PKCS12"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"clients-and-jdbc",children:"Clients and JDBC"}),"\n",(0,i.jsxs)(n.p,{children:["Apache Ignite 3 Client implementation is based on the Netty framework, which supports configuration for security connections via ",(0,i.jsx)(n.code,{children:"SSLContextBuilder"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"server-side-configuration",children:"Server-side Configuration"}),"\n",(0,i.jsx)(n.p,{children:"The default way to configure SSL on the server side is to update the configuration with SSL properties. The example below is in the JSON format."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"In Apache Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "ignite" : {\r\n        "clientConnector" : {\r\n            "ssl" : {\r\n                "ciphers" : "",\r\n                "clientAuth" : "require",\r\n                "enabled" : true,\r\n                "keyStore" : {\r\n                    "type" : "PKCS12",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                },\r\n                "trustStore" : {\r\n                    "type" : "PKCS12",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you have enabled SSL for ",(0,i.jsx)(n.code,{children:"clientConnector"}),", and want to use JDBC, set the corresponding properties in your code:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'var url =\r\n    "jdbc:ignite:thin://{address}:{port}"\r\n        + "?sslEnabled=true"\r\n        + "&trustStorePath=" + trustStorePath\r\n        + "&trustStoreType=JKS"\r\n        + "&trustStorePassword=" + password\r\n        + "&clientAuth=require"\r\n        + "&keyStorePath=" + keyStorePath\r\n        + "&keyStoreType=PKCS12"\r\n        + "&keyStorePassword=" + password;\r\n        try (Connection conn = DriverManager.getConnection(url)) {\r\n            // Other actions.\r\n        }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"client-configuration",children:"Client Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"java",children:"Java"}),"\n",(0,i.jsxs)(n.p,{children:["To enable SSL in your Java clients, use the ",(0,i.jsx)(n.code,{children:"IgniteClient"})," class and pass the ssl configuration to it:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'var sslConfiguration = SslConfiguration.builder()\r\n                        .enabled(true)\r\n                        .ciphers("TLS_AES_256_GCM_SHA384")\r\n                        .trustStorePath(trustStorePath)\r\n                        .trustStorePassword(password)\r\n                        .keyStorePath(keyStorePath)\r\n                        .keyStorePassword(password)\r\n                        .build();\r\n\r\ntry (IgniteClient client = IgniteClient.builder()\r\n    .addresses("localhost:10800")\r\n    .ssl(sslConfiguration)\r\n    .build();\r\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"net",children:".NET"}),"\n",(0,i.jsxs)(n.p,{children:["Add the ",(0,i.jsx)(n.code,{children:"IgniteClientConfiguration.SslStreamFactory"})," property of type ",(0,i.jsx)(n.code,{children:"ISslStreamFactory"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Provide a ",(0,i.jsx)(n.a,{href:"https://github.com/apache/ignite/blob/66f43a4bee163aadb3ad731f6eb9a6dfde9faa73/modules/platforms/dotnet/Apache.Ignite.Core/Client/SslStreamFactory.cs",children:"predefined implementation"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Use the base class library ",(0,i.jsx)(n.code,{children:"SslStream"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Basic usage without client authorization:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"var cfg = new IgniteClientConfiguration { SslStreamFactory = new() }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cli",children:"CLI"}),"\n",(0,i.jsxs)(n.p,{children:["To SSL on the CLI side, use the ",(0,i.jsx)(n.code,{children:"cli config set"})," command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"cli config set cli.trust-store.type=<type>\r\ncli config set cli.trust-store.path=<path>\r\ncli config set cli.trust-store.password=<password>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Store the CLI security configuration in a separate file with permission settings that protect it from unauthorized read/write operations. This configuration file must match profiles from the common configuration file."}),"\n",(0,i.jsx)(n.h2,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,i.jsx)(n.p,{children:"The node network is based on the Netty framework. The configuration is the same as described for the Apache Ignite Client part except for the part that addresses the Apache Ignite 3 configuration."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"In Apache Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "ignite" : {\r\n        "network" : {\r\n            "ssl" : {\r\n                "ciphers" : "",\r\n                "enabled" : true,\r\n                "keyStore" : {\r\n                    "type" : "PKCS12",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                },\r\n                "trustStore" : {\r\n                    "type" : "PKCS12",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"ssl-client-authentication-mtls-support",children:"SSL Client Authentication (mTLS Support)"}),"\n",(0,i.jsx)(n.p,{children:"Optionally, the connections you utilize can support the client authentication feature. Configure it separately for each connection on the server side."}),"\n",(0,i.jsx)(n.p,{children:"Two-way authentication requires that both server and client have certificates they reciprocally trust. The client generates a private key, stores it in its keystore, and gets it signed by an entity the server's truststore trusts."}),"\n",(0,i.jsxs)(n.p,{children:["To support client authentication, a connection must include the ",(0,i.jsx)(n.code,{children:"clientAuth"}),", ",(0,i.jsx)(n.code,{children:"trustStore"})," and ",(0,i.jsx)(n.code,{children:"keyStore"})," properties. Here is an example of a possible client configuration. The example below is in the JSON format."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"In Apache Ignite 3, you can create and maintain the configuration in either JSON or HOCON format."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\r\n    "ignite" : {\r\n        "clientConnector" : {\r\n            "ssl" : {\r\n                "ciphers" : "",\r\n                "clientAuth" : "require",\r\n                "enabled" : true,\r\n                "keyStore" : {\r\n                    "type" : "PKCS12",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                },\r\n                "trustStore" : {\r\n                    "type" : "JKS",\r\n                    "path" : "must not be empty",\r\n                    "password" : "may be empty"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);
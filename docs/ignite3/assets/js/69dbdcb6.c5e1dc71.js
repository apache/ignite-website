"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[581],{3916:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"develop/work-with-data/java-to-tables","title":"Creating Tables from Java Classes","description":"Overview","source":"@site/docs/develop/work-with-data/java-to-tables.md","sourceDirName":"develop/work-with-data","slug":"/develop/work-with-data/java-to-tables","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/java-to-tables","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"java-to-tables","title":"Creating Tables from Java Classes"},"sidebar":"tutorialSidebar","previous":{"title":"Available Events","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/events-list"},"next":{"title":"Java Client Logging","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/java-client-logging"}}');var l=t(74848),i=t(28453);const o={id:"java-to-tables",title:"Creating Tables from Java Classes"},s=void 0,r={},d=[{value:"Overview",id:"overview",level:2},{value:"Examples",id:"examples",level:2},{value:"Key-Value POJO Compatible with KeyValueView",id:"key-value-pojo-compatible-with-keyvalueview",level:3},{value:"Single POJO Compatible with RecordView",id:"single-pojo-compatible-with-recordview",level:3},{value:"The Builder Alternative to the @Table Annotation",id:"the-builder-alternative-to-the-table-annotation",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["While ",(0,l.jsx)(n.a,{href:"/3.1.0/sql/reference/language-definition/ddl",children:"SQL DDL"})," supports a full set of table manipulation commands, you can also create tables and build indexes directly from a POJO using a simple Java API."]}),"\n",(0,l.jsxs)(n.p,{children:["This API supports custom annotations and simple builders; it works seamlessly with the Mapper interface, thus facilitating ",(0,l.jsx)(n.a,{href:"/3.1.0/develop/work-with-data/table-api",children:"KeyValueView and RecordView"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"The Java API lets you perform the following operations:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"CREATE ZONE"}),"\n",(0,l.jsx)(n.li,{children:"CREATE TABLE"}),"\n",(0,l.jsx)(n.li,{children:"CREATE INDEX"}),"\n",(0,l.jsx)(n.li,{children:"DROP ZONE"}),"\n",(0,l.jsx)(n.li,{children:"DROP TABLE"}),"\n",(0,l.jsx)(n.li,{children:"DROP INDEX"}),"\n",(0,l.jsx)(n.li,{children:"CREATE SCHEMA"}),"\n",(0,l.jsx)(n.li,{children:"DROP SCHEMA"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Use the @Table and other annotations located in the ",(0,l.jsx)(n.code,{children:"org.apache.ignite.catalog.annotations"})," package."]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(n.h3,{id:"key-value-pojo-compatible-with-keyvalueview",children:"Key-Value POJO Compatible with KeyValueView"}),"\n",(0,l.jsxs)(n.p,{children:["The example below creates a table called ",(0,l.jsx)(n.code,{children:"kv_pojo"})," by using the POJO compatible with ",(0,l.jsx)(n.code,{children:"KeyValueView"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Table(value = "kv_pojo",\n        zone = @Zone(value = "zone_test", replicas = 2, storageProfiles = "default"),\n        colocateBy = {@ColumnRef("id"), @ColumnRef("id_str")},\n        indexes = @Index(value = "ix", columns = {@ColumnRef("f_name"), @ColumnRef("l_name")}))\n\npublic static class PojoKey {\n    @Id\n    Integer id;\n\n    @Id(SortOrder.DEFAULT)\n    @Column(value = "id_str", length = 20)\n    String idStr;\n\n    public PojoKey(Integer id, String idStr) {\n        this.id = id;\n        this.idStr = idStr;\n    }\n}\n\npublic static class PojoValue {\n    @Column("f_name")\n    private String firstName;\n\n    @Column("l_name")\n    private String lastName;\n\n    public PojoValue(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n}\n\n\npublic static void main(String[] args) {\n\n    System.out.println("\\nConnecting to server...");\n\n    try (IgniteClient client = IgniteClient.builder()\n            .addresses("127.0.0.1:10800")\n            .build()\n    ) {\n\n        org.apache.ignite.table.Table myTable = client.catalog().createTable(PojoKey.class, PojoValue.class);\n\n        KeyValueView<PojoKey, PojoValue> kvView = myTable.keyValueView(PojoKey.class, PojoValue.class);\n        PojoKey key = new PojoKey(1, "sample");\n        PojoValue putValue = new PojoValue("John", "Smith");\n        kvView.put(null, key, putValue);\n\n        PojoValue getValue = kvView.get(null, key);\n        System.out.println(\n                "\\nRetrieved values:\\n"\n                        + "    Account ID: " + key.id + \'\\n\'\n                        + "    First name: " + getValue.firstName + \'\\n\'\n                        + "    Last name" + getValue.lastName);\n\n    }\n}\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["You need to create a ",(0,l.jsx)(n.a,{href:"/3.1.0/configure-and-operate/configuration/config-storage-overview",children:"storage profile"})," in node configuration by using the CLI tool."]})}),"\n",(0,l.jsx)(n.p,{children:"The result is equivalent to the following SQL multi-statement:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE ZONE IF NOT EXISTS zone_test WITH PARTITIONS=2, STORAGE_PROFILES='default';\n\nCREATE TABLE IF NOT EXISTS kv_pojo (\n\tid int,\n\tid_str varchar(20),\n\tf_name varchar,\n\tl_name varchar,\n\tstr varchar,\n\tPRIMARY KEY (id, id_str)\n)\nCOLOCATE BY (id, id_str)\nWITH PRIMARY_ZONE='ZONE';\n\nCREATE INDEX ix (f_name, l_name desc nulls last);\n"})}),"\n",(0,l.jsx)(n.h3,{id:"single-pojo-compatible-with-recordview",children:"Single POJO Compatible with RecordView"}),"\n",(0,l.jsxs)(n.p,{children:["The example below creates the ",(0,l.jsx)(n.code,{children:"pojo_sample"})," table by using the POJO compatible with ",(0,l.jsx)(n.code,{children:"RecordView"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Table(value = "pojo_sample",\n        zone = @Zone(value = "zone_test", replicas = 2, storageProfiles = "default"),\n        colocateBy = {@ColumnRef("id"), @ColumnRef("id_str")},\n        indexes = @Index(value = "ix_sample", columns = {@ColumnRef("f_name"), @ColumnRef("l_name")}))\n\npublic static class Pojo {\n    @Id\n    Integer id;\n\n    @Id(SortOrder.DEFAULT)\n    @Column(value = "id_str", length = 20)\n    String idStr;\n\n    @Column("f_name")\n    String firstName;\n\n    @Column("l_name")\n    String lastName;\n\n    String str;\n}\n\npublic static void main(String[] args) {\n\n    System.out.println("\\nConnecting to server...");\n\n    try (IgniteClient client = IgniteClient.builder()\n            .addresses("127.0.0.1:10800")\n            .build()\n    ) {\n\n        org.apache.ignite.table.Table myTable = client.catalog().createTable(Pojo.class);\n\n        RecordView<Tuple> view = myTable.recordView();\n        Tuple insertTuple = Tuple.create()\n                .set("id", 1)\n                .set("id_str", "sample")\n                .set("f_name", "John")\n                .set("l_name", "Smith");\n        view.insert(null, insertTuple);\n\n        Tuple getTuple = view.get(null, insertTuple);\n        System.out.println(\n                "\\nRetrieved record: " +\n                        getTuple.stringValue("f_name")\n        );\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"the-builder-alternative-to-the-table-annotation",children:"The Builder Alternative to the @Table Annotation"}),"\n",(0,l.jsx)(n.p,{children:"The example below uses a builder to create a table instead on creating it from a Java class:"}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["When using builders, only the ",(0,l.jsx)(n.code,{children:"@Id"})," and ",(0,l.jsx)(n.code,{children:"@Column"})," annotations on fields are supported."]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'IgniteCatalog catalog = client.catalog();\n\ncatalog.createTable(\n        TableDefinition.builder("sampleTable3")\n                .primaryKey("myKey")\n                .columns(\n                        column("myKey", ColumnType.INT32),\n                        column("myValue", ColumnType.VARCHAR)\n                )\n                .build()\n);\n\nTable myTable = client.tables().table("sampleTable3");\nmyTable.keyValueView().put(null, Tuple.create().set("myKey", 1), Tuple.create().set("myValue", "John"));\n\nTuple value = myTable.keyValueView().get(null, Tuple.create().set("myKey", 1));\nSystem.out.println(\n        "\\nRetrieved value:\\n" +\n        value.stringValue("myValue")\n);\n'})}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.p,{children:["Once you have created a table using the Java API, you can manipulate it using the ",(0,l.jsx)(n.a,{href:"/3.1.0/sql/reference/language-definition/ddl",children:"SQL commands"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var a=t(96540);const l={},i=a.createContext(l);function o(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);
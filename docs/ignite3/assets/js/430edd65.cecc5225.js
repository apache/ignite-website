"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1326],{9054:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"quick-start/start-cluster","title":"How to Start an Ignite 3 Cluster in Docker","description":"{/*","source":"@site/versioned_docs/version-3.0.0/quick-start/start-cluster.md","sourceDirName":"quick-start","slug":"/quick-start/start-cluster","permalink":"/docs/ignite3/3.0.0/quick-start/start-cluster","draft":false,"unlisted":false,"tags":[],"version":"3.0.0","frontMatter":{"title":"How to Start an Ignite 3 Cluster in Docker","sidebar_label":"Start Cluster in Docker"},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/ignite3/3.0.0/quick-start/getting-started-guide"},"next":{"title":"Explore SQL","permalink":"/docs/ignite3/3.0.0/quick-start/explore-sql"}}');var i=t(74848),o=t(28453);const s={title:"How to Start an Ignite 3 Cluster in Docker",sidebar_label:"Start Cluster in Docker"},l=void 0,c={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a Docker Compose Configuration",id:"step-1-create-a-docker-compose-configuration",level:2},{value:"Step 2: Start the Ignite Cluster",id:"step-2-start-the-ignite-cluster",level:2},{value:"Step 3: Initialize the Cluster",id:"step-3-initialize-the-cluster",level:2},{value:"Step 4: Verify Your Cluster",id:"step-4-verify-your-cluster",level:2},{value:"Understanding Port Configuration",id:"understanding-port-configuration",level:2},{value:"Stopping the Cluster",id:"stopping-the-cluster",level:2},{value:"Removing the Cluster",id:"removing-the-cluster",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:["\n",(0,i.jsx)(n.p,{children:"This guide walks you through the process of setting up and running an Apache Ignite 3 cluster using Docker containers. Follow these steps to get a three-node cluster up and running quickly."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Up-to-date Docker and Docker Compose installed on your system"}),"\n",(0,i.jsx)(n.li,{children:"Basic familiarity with command-line operations"}),"\n",(0,i.jsx)(n.li,{children:"The code editor of your choice (VS Code, IntelliJ IDEA, etc.)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-create-a-docker-compose-configuration",children:"Step 1: Create a Docker Compose Configuration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a file named ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," in your project directory:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'name: ignite3\r\n\r\nx-ignite-def: &ignite-def\r\n  image: apacheignite/ignite:3.0.0\r\n  environment:\r\n    JVM_MAX_MEM: "4g"\r\n    JVM_MIN_MEM: "4g"\r\n  configs:\r\n    - source: node_config\r\n      target: /opt/ignite/etc/ignite-config.conf\r\n      mode: 0644\r\n\r\nservices:\r\n  node1:\r\n    <<: *ignite-def\r\n    command: --node-name node1\r\n    ports:\r\n      - "10300:10300"\r\n      - "10800:10800"\r\n  node2:\r\n    <<: *ignite-def\r\n    command: --node-name node2\r\n    ports:\r\n      - "10301:10300"\r\n      - "10801:10800"\r\n  node3:\r\n    <<: *ignite-def\r\n    command: --node-name node3\r\n    ports:\r\n      - "10302:10300"\r\n      - "10802:10800"\r\n\r\nconfigs:\r\n  node_config:\r\n    content: |\r\n      ignite {\r\n        network {\r\n          port: 3344\r\n          nodeFinder.netClusterNodes = ["node1:3344", "node2:3344", "node3:3344"]\r\n        }\r\n      }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-start-the-ignite-cluster",children:"Step 2: Start the Ignite Cluster"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open a terminal in the directory containing your ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file"]}),"\n",(0,i.jsx)(n.li,{children:"Run the following command to start the cluster:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Verify that all containers are running:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose ps\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here is how the command output may look:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'NAME              IMAGE                       COMMAND                  SERVICE   CREATED          STATUS          PORTS\r\nignite3-node1-1   apacheignite/ignite:3.0.0   "docker-entrypoint.s\u2026"   node1     13 seconds ago   Up 10 seconds   0.0.0.0:10300->10300/tcp, 3344/tcp, 0.0.0.0:10800->10800/tcp\r\nignite3-node2-1   apacheignite/ignite:3.0.0   "docker-entrypoint.s\u2026"   node2     13 seconds ago   Up 10 seconds   3344/tcp, 0.0.0.0:10301->10300/tcp, 0.0.0.0:10801->10800/tcp\r\nignite3-node3-1   apacheignite/ignite:3.0.0   "docker-entrypoint.s\u2026"   node3     13 seconds ago   Up 10 seconds   3344/tcp, 0.0.0.0:10302->10300/tcp, 0.0.0.0:10802->10800/tcp\n'})}),"\n",(0,i.jsx)(n.p,{children:"Your nodes are now running, but the cluster is not initialized."}),"\n",(0,i.jsx)(n.h2,{id:"step-3-initialize-the-cluster",children:"Step 3: Initialize the Cluster"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Start the Ignite CLI in Docker:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"docker run --rm -it --network=host -e LANG=C.UTF-8 -e LC_ALL=C.UTF-8 apacheignite/ignite:3.0.0 cli\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Inside the CLI, connect to one of the nodes:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"connect http://localhost:10300\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Confirm the connection to the default node in the CLI tool."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Initialize the cluster with a name and the metastorage group of all nodes:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cluster init --name=ignite3 --metastorage-group=node1,node2,node3\n"})}),"\n",(0,i.jsx)(n.p,{children:"The output from this step should be similar to this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"           #              ___                         __\r\n         ###             /   |   ____   ____ _ _____ / /_   ___\r\n     #  #####           / /| |  / __ \\ / __ `// ___// __ \\ / _ \\\r\n   ###  ######         / ___ | / /_/ // /_/ // /__ / / / // ___/\r\n  #####  #######      /_/  |_|/ .___/ \\__,_/ \\___//_/ /_/ \\___/\r\n  #######  ######            /_/\r\n    ########  ####        ____               _  __           _____\r\n   #  ########  ##       /  _/____ _ ____   (_)/ /_ ___     |__  /\r\n  ####  #######  #       / / / __ `// __ \\ / // __// _ \\     /_ <\r\n   #####  #####        _/ / / /_/ // / / // // /_ / ___/   ___/ /\r\n     ####  ##         /___/ \\__, //_/ /_//_/ \\__/ \\___/   /____/\r\n       ##                  /____/\r\n\r\n                      Apache Ignite CLI version 3.0.0\r\n\r\n\r\nYou appear to have not connected to any node yet. Do you want to connect to the default node http://localhost:10300? [Y/n] y\r\nConnected to http://localhost:10300\r\nThe cluster is not initialized. Run cluster init command to initialize it.\r\n[node1]> cluster init --name=ignite3 --metastorage-group=node1,node2,node3\r\nCluster was initialized successfully\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-verify-your-cluster",children:"Step 4: Verify Your Cluster"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Use the ",(0,i.jsx)(n.code,{children:"cluster status"})," CLI command to verify your cluster is running correctly."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cluster status\n"})}),"\n",(0,i.jsx)(n.p,{children:"The output should look similar to this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"[name: ignite3, nodes: 3, status: active, cmgNodes: [node1, node2, node3], msNodes: [node1, node2, node3]]\n"})}),"\n",(0,i.jsx)(n.p,{children:"This means that all 3 nodes found each other and formed an active cluster."}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Exit the CLI by typing ",(0,i.jsx)(n.code,{children:"exit"})," or pressing Ctrl+D. This will also stop the CLI container."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Congratulations! You have a local Apache Ignite 3 cluster running that you can use for development."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-port-configuration",children:"Understanding Port Configuration"}),"\n",(0,i.jsx)(n.p,{children:"The Docker Compose file exposes two types of ports for each node:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"10300-10302"}),": REST API ports for administrative operations;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"10800-10802"}),": Client connection ports for your applications."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"stopping-the-cluster",children:"Stopping the Cluster"}),"\n",(0,i.jsx)(n.p,{children:"If you want to pause your cluster:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose stop\r\n\r\n[+] Stopping 3/3\r\n \u2714 Container ignite3-node1-1  Stopped\r\n \u2714 Container ignite3-node2-1  Stopped\r\n \u2714 Container ignite3-node3-1  Stopped\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will stop the containers and retain your data."}),"\n",(0,i.jsx)(n.h2,{id:"removing-the-cluster",children:"Removing the Cluster"}),"\n",(0,i.jsx)(n.p,{children:"When you are done working with the cluster, you can remove it using:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose down\r\n\r\n[+] Running 4/4\r\n \u2714 Container ignite3-node3-1  Removed\r\n \u2714 Container ignite3-node2-1  Removed\r\n \u2714 Container ignite3-node1-1  Removed\r\n \u2714 Network ignite3_default    Removed\n"})}),"\n",(0,i.jsx)(n.p,{children:"This will stop and remove all the containers. Your data will be lost unless you have configured persistent storage."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[581],{3916:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"develop/work-with-data/java-to-tables","title":"Creating Tables from Java Classes","description":"Overview","source":"@site/docs/develop/work-with-data/java-to-tables.md","sourceDirName":"develop/work-with-data","slug":"/develop/work-with-data/java-to-tables","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/java-to-tables","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"java-to-tables","title":"Creating Tables from Java Classes"},"sidebar":"tutorialSidebar","previous":{"title":"Available Events","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/events-list"},"next":{"title":"Java Client Logging","permalink":"/docs/ignite3/3.1.0/develop/work-with-data/java-client-logging"}}');var r=t(74848),l=t(28453);const i={id:"java-to-tables",title:"Creating Tables from Java Classes"},o=void 0,s={},d=[{value:"Overview",id:"overview",level:2},{value:"Examples",id:"examples",level:2},{value:"Key-Value POJO Compatible with KeyValueView",id:"key-value-pojo-compatible-with-keyvalueview",level:3},{value:"Single POJO Compatible with RecordView",id:"single-pojo-compatible-with-recordview",level:3},{value:"The Builder Alternative to the @Table Annotation",id:"the-builder-alternative-to-the-table-annotation",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["While ",(0,r.jsx)(n.a,{href:"/3.1.0/sql/reference/language-definition/ddl",children:"SQL DDL"})," supports a full set of table manipulation commands, you can also create tables and build indexes directly from a POJO using a simple Java API."]}),"\n",(0,r.jsxs)(n.p,{children:["This API supports custom annotations and simple builders; it works seamlessly with the Mapper interface, thus facilitating ",(0,r.jsx)(n.a,{href:"/3.1.0/develop/work-with-data/table-api",children:"KeyValueView and RecordView"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The Java API lets you perform the following operations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CREATE ZONE"}),"\n",(0,r.jsx)(n.li,{children:"CREATE TABLE"}),"\n",(0,r.jsx)(n.li,{children:"CREATE INDEX"}),"\n",(0,r.jsx)(n.li,{children:"DROP ZONE"}),"\n",(0,r.jsx)(n.li,{children:"DROP TABLE"}),"\n",(0,r.jsx)(n.li,{children:"DROP INDEX"}),"\n",(0,r.jsx)(n.li,{children:"CREATE SCHEMA"}),"\n",(0,r.jsx)(n.li,{children:"DROP SCHEMA"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Use the @Table and other annotations located in the ",(0,r.jsx)(n.code,{children:"org.apache.ignite.catalog.annotations"})," package."]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"key-value-pojo-compatible-with-keyvalueview",children:"Key-Value POJO Compatible with KeyValueView"}),"\n",(0,r.jsxs)(n.p,{children:["The example below creates a table called ",(0,r.jsx)(n.code,{children:"kv_pojo"})," by using the POJO compatible with ",(0,r.jsx)(n.code,{children:"KeyValueView"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Table(value = "kv_pojo",\r\n        zone = @Zone(value = "zone_test", replicas = 2, storageProfiles = "default"),\r\n        colocateBy = {@ColumnRef("id"), @ColumnRef("id_str")},\r\n        indexes = @Index(value = "ix", columns = {@ColumnRef("f_name"), @ColumnRef("l_name")}))\r\n\r\npublic static class PojoKey {\r\n    @Id\r\n    Integer id;\r\n\r\n    @Id(SortOrder.DEFAULT)\r\n    @Column(value = "id_str", length = 20)\r\n    String idStr;\r\n\r\n    public PojoKey(Integer id, String idStr) {\r\n        this.id = id;\r\n        this.idStr = idStr;\r\n    }\r\n}\r\n\r\npublic static class PojoValue {\r\n    @Column("f_name")\r\n    private String firstName;\r\n\r\n    @Column("l_name")\r\n    private String lastName;\r\n\r\n    public PojoValue(String firstName, String lastName) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n}\r\n\r\n\r\npublic static void main(String[] args) {\r\n\r\n    System.out.println("\\nConnecting to server...");\r\n\r\n    try (IgniteClient client = IgniteClient.builder()\r\n            .addresses("127.0.0.1:10800")\r\n            .build()\r\n    ) {\r\n\r\n        org.apache.ignite.table.Table myTable = client.catalog().createTable(PojoKey.class, PojoValue.class);\r\n\r\n        KeyValueView<PojoKey, PojoValue> kvView = myTable.keyValueView(PojoKey.class, PojoValue.class);\r\n        PojoKey key = new PojoKey(1, "sample");\r\n        PojoValue putValue = new PojoValue("John", "Smith");\r\n        kvView.put(null, key, putValue);\r\n\r\n        PojoValue getValue = kvView.get(null, key);\r\n        System.out.println(\r\n                "\\nRetrieved values:\\n"\r\n                        + "    Account ID: " + key.id + \'\\n\'\r\n                        + "    First name: " + getValue.firstName + \'\\n\'\r\n                        + "    Last name" + getValue.lastName);\r\n\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["You need to create a ",(0,r.jsx)(n.a,{href:"/3.1.0/configure-and-operate/configuration/config-storage-overview",children:"storage profile"})," in node configuration by using the CLI tool."]})}),"\n",(0,r.jsx)(n.p,{children:"The result is equivalent to the following SQL multi-statement:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE ZONE IF NOT EXISTS zone_test WITH PARTITIONS=2, STORAGE_PROFILES='default';\r\n\r\nCREATE TABLE IF NOT EXISTS kv_pojo (\r\n\tid int,\r\n\tid_str varchar(20),\r\n\tf_name varchar,\r\n\tl_name varchar,\r\n\tstr varchar,\r\n\tPRIMARY KEY (id, id_str)\r\n)\r\nCOLOCATE BY (id, id_str)\r\nWITH PRIMARY_ZONE='ZONE';\r\n\r\nCREATE INDEX ix (f_name, l_name desc nulls last);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"single-pojo-compatible-with-recordview",children:"Single POJO Compatible with RecordView"}),"\n",(0,r.jsxs)(n.p,{children:["The example below creates the ",(0,r.jsx)(n.code,{children:"pojo_sample"})," table by using the POJO compatible with ",(0,r.jsx)(n.code,{children:"RecordView"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Table(value = "pojo_sample",\r\n        zone = @Zone(value = "zone_test", replicas = 2, storageProfiles = "default"),\r\n        colocateBy = {@ColumnRef("id"), @ColumnRef("id_str")},\r\n        indexes = @Index(value = "ix_sample", columns = {@ColumnRef("f_name"), @ColumnRef("l_name")}))\r\n\r\npublic static class Pojo {\r\n    @Id\r\n    Integer id;\r\n\r\n    @Id(SortOrder.DEFAULT)\r\n    @Column(value = "id_str", length = 20)\r\n    String idStr;\r\n\r\n    @Column("f_name")\r\n    String firstName;\r\n\r\n    @Column("l_name")\r\n    String lastName;\r\n\r\n    String str;\r\n}\r\n\r\npublic static void main(String[] args) {\r\n\r\n    System.out.println("\\nConnecting to server...");\r\n\r\n    try (IgniteClient client = IgniteClient.builder()\r\n            .addresses("127.0.0.1:10800")\r\n            .build()\r\n    ) {\r\n\r\n        org.apache.ignite.table.Table myTable = client.catalog().createTable(Pojo.class);\r\n\r\n        RecordView<Tuple> view = myTable.recordView();\r\n        Tuple insertTuple = Tuple.create()\r\n                .set("id", 1)\r\n                .set("id_str", "sample")\r\n                .set("f_name", "John")\r\n                .set("l_name", "Smith");\r\n        view.insert(null, insertTuple);\r\n\r\n        Tuple getTuple = view.get(null, insertTuple);\r\n        System.out.println(\r\n                "\\nRetrieved record: " +\r\n                        getTuple.stringValue("f_name")\r\n        );\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"the-builder-alternative-to-the-table-annotation",children:"The Builder Alternative to the @Table Annotation"}),"\n",(0,r.jsx)(n.p,{children:"The example below uses a builder to create a table instead on creating it from a Java class:"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["When using builders, only the ",(0,r.jsx)(n.code,{children:"@Id"})," and ",(0,r.jsx)(n.code,{children:"@Column"})," annotations on fields are supported."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'IgniteCatalog catalog = client.catalog();\r\n\r\ncatalog.createTable(\r\n        TableDefinition.builder("sampleTable3")\r\n                .primaryKey("myKey")\r\n                .columns(\r\n                        column("myKey", ColumnType.INT32),\r\n                        column("myValue", ColumnType.VARCHAR)\r\n                )\r\n                .build()\r\n);\r\n\r\nTable myTable = client.tables().table("sampleTable3");\r\nmyTable.keyValueView().put(null, Tuple.create().set("myKey", 1), Tuple.create().set("myValue", "John"));\r\n\r\nTuple value = myTable.keyValueView().get(null, Tuple.create().set("myKey", 1));\r\nSystem.out.println(\r\n        "\\nRetrieved value:\\n" +\r\n        value.stringValue("myValue")\r\n);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Once you have created a table using the Java API, you can manipulate it using the ",(0,r.jsx)(n.a,{href:"/3.1.0/sql/reference/language-definition/ddl",children:"SQL commands"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var a=t(96540);const r={},l=a.createContext(r);function i(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);
<!DOCTYPE html>

      
      
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Bugyard widget embed -->
    <script type="text/javascript">
        !function(){
            if("function" != typeof window.bugyard){
                var a = function(){ a.c(arguments) };
                a.q = [], a.c = function(b){ a.q.push(b) };
                window.bugyard = a;

                var b = document.createElement("script");
                b.setAttribute("data-bugyard", "610961912c35ff001493163a");
                b.setAttribute("async", "async");
                b.setAttribute("defer", "defer");
                b.setAttribute("src", "/assets/js/bugyard.min.js");
                document.getElementsByTagName("head")[0].appendChild(b);
            }
        }();
        window.bugyard("hideButton");
    </script>
    <!-- Bugyard widget embed -->

    <link rel="preload" href='/assets/js/code-tabs.js?1' as="script" crossorigin>
    <link rel="preload" href='/assets/js/page-nav.js' as="script" crossorigin>
    <link rel="preload" href='/assets/js/docs-menu.js?20201005' as="script" crossorigin>

    <style>:root{--gg-red:#ec1c24;--gg-orange:#ec1c24;--gg-orange-dark:#bc440b;--gg-orange-filter:invert(47%) sepia(61%) saturate(1950%) hue-rotate(345deg) brightness(100%) contrast(95%);--gg-dark-gray:#333333;--orange-line-thickness:3px;--block-code-background:rgba(241, 241, 241, 20%);--inline-code-background:rgba(241, 241, 241, 90%);--padding-top:25px;--link-color:#ec1c24;--body-background:#fcfcfc}header{min-height:var(--header-height);background:#fff;box-shadow:0 4px 10px 0 #eee,0 0 4px 0 #d5d5d5;z-index:1}header>.container{display:grid;grid-template-columns:auto auto 1fr auto auto auto;grid-template-areas:'left-toggle home nav ver api search lang';grid-template-rows:40px;flex-direction:row;align-items:center;justify-content:flex-start;padding:12px 20px;max-width:1400px;margin:0 auto}header nav>ul{padding:0;margin:0;list-style:none;display:inherit}header .dropdown{display:none;position:fixed;top:calc(var(--header-height) - 12px);width:auto;background:#fff;box-shadow:0 4px 4px 0 rgba(0,0,0,.24),0 0 4px 0 rgba(0,0,0,.12);border-radius:4px;padding-top:10px;padding-bottom:12px;z-index:2}header .dropdown li{display:flex}header .dropdown a{color:grey!important;font-size:16px;padding-top:5px;padding-bottom:4px}header .menu{border:none;background:0 0;width:40px;height:40px;margin-right:12px;grid-area:left-toggle}header .menu img{width:18px;height:12px}header .search-close,header .top-nav-toggle{background:0 0;border:none;padding:0;width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;color:var(--gg-dark-gray);font-size:26px}header .search-toggle{grid-area:search}header .top-nav-toggle{grid-area:top-toggle}header .home{grid-area:home;margin-right:auto}header .home img{height:36px}header #api-docs{grid-area:api;margin:0;display:flex}header #api-docs .dropdown{padding:.5em 0}header #api-docs a{padding:9px 14px;color:var(--gg-dark-gray)!important;text-decoration:none;white-space:nowrap}header #api-docs .dropdown-item a{font-weight:400;display:block;width:100%;min-width:150px}header #lang-selector li{list-style:none;display:flex;padding:9px 14px}header #lang-selector li a{display:flex;color:#000;align-items:center}header #lang-selector li a span{font-size:10px;margin-left:5px}header #lang-selector li a img{width:25px}header #lang-selector li .dropdown{margin-left:-70px}header #lang-selector li .dropdown .dropdown-item{padding:0 1em;margin-bottom:8px}header #lang-selector li .dropdown .dropdown-item a span{font-size:14px}header .search{margin-left:auto;margin-right:20px;grid-area:search}header .search input[type=search]{color:var(--gg-dark-gray);background:rgba(255,255,255,.8);border:1px solid #ccc;padding:10px 15px;font-family:inherit;max-width:148px;height:37px;font-size:14px;-webkit-appearance:unset;appearance:unset}header #version-selector{list-style:none;grid-area:ver;line-height:28px;border-radius:0;margin-right:10px;border:none;color:var(--gg-dark-gray);padding:5px 16px 5px 10px;white-space:nowrap;font-size:14px;width:auto;text-align:right;box-sizing:border-box;text-align-last:right;-moz-appearance:none;-webkit-appearance:none;appearance:none;direction:rtl}header #version-selector option{direction:ltr}header>nav{grid-area:nav;font-size:18px;display:flex;flex-direction:row;margin:0 20px}header #lang-selector{grid-area:lang}header .search-close{margin-right:10px}@media (max-width:600px){header .search{margin-right:5px}header .search input[type=search]{max-width:110px}}header:not(.narrow-header) .search-close,header:not(.narrow-header) .top-nav-toggle{display:none}@media (max-width:670px){header>.container{grid-template-columns:auto 1fr auto;grid-template-areas:'left-toggle home search' 'ver api lang'}header #lang-selector li{justify-content:flex-end}}pre,pre.rouge{padding:8px 15px;background:var(--block-code-background)!important;border-radius:5px;border:1px solid #e5e5e5;overflow-x:auto;min-height:36px;line-height:18px;color:#545454}code{color:#545454}pre.rouge code{background:0 0!important}:not(pre)>code{background:var(--inline-code-background);padding:.1em .5em;background-clip:padding-box;border-radius:3px;color:#545454;font-size:90%}.listingblock .content{position:relative}.highlight{color:#586e75}.highlight .c1{color:#657b83}.highlight .nt{color:#b58900}.highlight .o{color:#93a1a1}.highlight .k{color:#6c71c4}.highlight .kt{color:#cb4b16}.highlight .s,.highlight .s1{color:#859900}.highlight .nc{color:#b58900}.highlight .na{color:#268bd2}body{font-family:'Open Sans',sans-serif}h1,h2{color:#000;font-weight:400;font-family:'Open Sans'}h1{font-size:36px;line-height:40px}a{text-decoration:none;color:var(--link-color)}section{color:#545454}.admonitionblock .icon .title{display:none}body{--header-height:64px;--promotion-bar-height:35px;--footer-height:104px;--footer-gap:60px;padding:0;margin:0;display:flex;flex-direction:column;min-height:100vh;background-color:var(--body-background);font-family:'Open Sans',sans-serif}body>section{flex:1}header{position:-webkit-sticky;position:sticky;top:0;z-index:2}*{box-sizing:border-box}@media (max-width:670px){body{--header-height:97px}}.left-nav{padding:10px 20px;width:289px;overflow-y:auto;top:calc(var(--header-height) + var(--promotion-bar-height));height:calc(100vh - var(--header-height) - var(--promotion-bar-height));font-family:'Open Sans';padding-top:var(--padding-top);background-color:var(--body-background)}.left-nav li{list-style:none}.left-nav a,.left-nav button{text-decoration:none;color:#757575;font-size:16px;display:inline-flex;width:100%;margin:2px 0;padding:.25em .375em;background:0 0;border:none;font:inherit;text-align:left}.left-nav a.active{color:var(--link-color)}.left-nav .nav-group{margin-left:6px;font-size:14px}.left-nav nav{border-left:2px solid #ddd;margin-bottom:5px}.left-nav nav.collapsed{display:none}.left-nav nav>li>a,.left-nav nav>li>button{padding-left:20px;text-align:left}.left-nav nav>li>a.active{border-left:var(--orange-line-thickness) solid var(--active-color);padding-left:calc(20px - var(--orange-line-thickness))}.left-nav nav.sub_pages{border:none}.left-nav nav.sub_pages a{padding-left:32px}.left-nav .state-indicator{margin-left:auto;margin-top:5px;width:6.2px;height:10px;flex:0 0 auto;filter:invert(49%) sepia(4%) saturate(5%) hue-rotate(23deg) brightness(92%) contrast(90%)}.left-nav button.expanded .state-indicator{transform:rotate(90deg)}.right-nav{width:289px;padding:12px 26px;overflow-y:auto;height:calc(100vh - var(--header-height));top:0;position:-webkit-sticky;position:sticky;display:flex;flex-direction:column;font-family:'Open sans';padding-top:var(--padding-top);background-color:#fff}.right-nav ul{list-style:none;padding:0;margin:0}.right-nav li{padding:0}.right-nav a{--border-width:0px;font-size:14px;color:#757575;padding-left:calc(15px * var(--nesting-level) + 8px - var(--border-width));margin:.3em 0;display:inline-block}.right-nav .sectlevel1{border-left:2px solid #ddd}.right-nav .sectlevel1{--nesting-level:0}.right-nav .sectlevel2{--nesting-level:1}.right-nav .sectlevel3{--nesting-level:2}@media (max-width:1200px){.right-nav{width:230px}}.right-nav footer{font-size:12px;padding:calc(var(--footer-gap) * .3) 0 5px;text-align:left;margin:auto 0 0}section.page-docs{display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:100%;grid-template-areas:'left-nav content right-nav';line-height:20px;max-width:1440px;margin:auto;width:100%}section.page-docs>article{border-left:1px solid #eee;background-color:#fff;padding:0 50px 30px;grid-area:content;overflow:hidden;font-family:sans-serif;font-size:16px;color:#545454;line-height:1.6em}section.page-docs>article h1,section.page-docs>article h2{font-family:'Open Sans'}@media (max-width:800px){section.page-docs>article{padding-left:15px;padding-right:15px}}section.page-docs .edit-link{position:relative;top:10px;right:10px;float:right;padding-top:calc(var(--header-height) + var(--padding-top));margin-top:calc((-1 * var(--header-height)))}section.page-docs h1,section.page-docs h2{margin-bottom:0}section.page-docs h2[id]{margin-top:var(--margin-top);margin-bottom:calc(var(--margin-top) * .5);z-index:-1}section.page-docs .title{font-style:italic}section.page-docs h2[id]{--margin-top:1.2em}.left-nav{bottom:0;position:-webkit-sticky;position:sticky}.left-nav{grid-area:left-nav}.right-nav{grid-area:right-nav}.left-nav__overlay{display:none;background:rgba(0,0,0,.5);z-index:1;position:fixed;top:var(--header-height);bottom:0;left:0;right:0}@media (max-width:990px){body:not(.hide-left-nav) .left-nav__overlay{display:block}nav.left-nav{background:#fafafa;grid-area:left-nav;box-shadow:0 4px 4px 0 rgba(0,0,0,.24),0 0 4px 0 rgba(0,0,0,.12);min-height:calc(100vh - var(--header-height));max-height:calc(100vh - var(--header-height));position:fixed;bottom:0;top:var(--header-height);z-index:2}section.page-docs>article{grid-column-start:left-nav;grid-column-end:content;grid-row:content}}@media (max-width:800px){nav.right-nav{display:none}}:target:before{content:"";display:block;margin-top:calc(var(--header-height) * -1);height:var(--header-height);width:1px}@media (min-width:600px) and (max-width:900px){:target:before{content:"";display:block;width:1px;margin-top:-150px;height:150px}}
#header #promotion-bar { background-color: #333333; padding: 8px; }
#header #promotion-bar p { font-size: 14px; line-height: 1.4em; font-weight: 600; padding: 0; margin: 0; color: #f0f0f0; text-align: center;}
#header #promotion-bar p a { color: #FCB903; } </style>

    

    
    <meta name="ignite-version" content="3.0.0" />
    <title>Getting Started with SQL | Ignite Documentation</title>
    
    <link rel="canonical" href="/docs/latest/quick-start/explore-sql" />
    
	
	  <link rel="shortcut icon" href="/favicon.ico">
    <meta name='viewport' content='width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0'>

    <link rel="preload" as="style" href="/assets/css/fonts.css" />
    <link rel="stylesheet" href="/assets/css/fonts.css" media="print" onload="this.media='all'">
    <noscript>
        <link rel="stylesheet" href="/assets/css/fonts.css">
    </noscript>
    <link href="/docs/pagefind/pagefind-ui.css" rel="stylesheet">
    <script src="/docs/pagefind/pagefind-ui.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            new PagefindUI({
                element: "#search",
                showSubResults: true,
                showImages: false,
            });
        });
    </script>
    <script src="/assets/js/mermaid.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const blocks = document.querySelectorAll('.mermaid');
            if (blocks.length) {
                mermaid.initialize({ startOnLoad: false });
                mermaid.run();
            }
        });
    </script>

	<script>
    // AnchorJS - v4.2.0 - 2019-01-01
    // https://github.com/bryanbraun/anchorjs
    // Copyright (c) 2019 Bryan Braun; Licensed MIT
    !function(A,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():(A.AnchorJS=e(),A.anchors=new A.AnchorJS)}(this,function(){"use strict";return function(A){function f(A){A.icon=A.hasOwnProperty("icon")?A.icon:"",A.visible=A.hasOwnProperty("visible")?A.visible:"hover",A.placement=A.hasOwnProperty("placement")?A.placement:"right",A.ariaLabel=A.hasOwnProperty("ariaLabel")?A.ariaLabel:"Anchor",A.class=A.hasOwnProperty("class")?A.class:"",A.base=A.hasOwnProperty("base")?A.base:"",A.truncate=A.hasOwnProperty("truncate")?Math.floor(A.truncate):64,A.titleText=A.hasOwnProperty("titleText")?A.titleText:""}function p(A){var e;if("string"==typeof A||A instanceof String)e=[].slice.call(document.querySelectorAll(A));else{if(!(Array.isArray(A)||A instanceof NodeList))throw new Error("The selector provided to AnchorJS was invalid.");e=[].slice.call(A)}return e}this.options=A||{},this.elements=[],f(this.options),this.isTouchDevice=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},this.add=function(A){var e,t,i,n,o,s,a,r,c,h,l,u,d=[];if(f(this.options),"touch"===(l=this.options.visible)&&(l=this.isTouchDevice()?"always":"hover"),A||(A="h2, h3, h4, h5, h6"),0===(e=p(A)).length)return this;for(function(){if(null===document.head.querySelector("style.anchorjs")){var A,e=document.createElement("style");e.className="anchorjs",e.appendChild(document.createTextNode("")),void 0===(A=document.head.querySelector('[rel="stylesheet"], style'))?document.head.appendChild(e):document.head.insertBefore(e,A),e.sheet.insertRule(" .anchorjs-link {   opacity: 0;   text-decoration: none;   -webkit-font-smoothing: antialiased;   -moz-osx-font-smoothing: grayscale; }",e.sheet.cssRules.length),e.sheet.insertRule(" *:hover > .anchorjs-link, .anchorjs-link:focus  {   opacity: 1; }",e.sheet.cssRules.length),e.sheet.insertRule(" [data-anchorjs-icon]::after {   content: attr(data-anchorjs-icon); }",e.sheet.cssRules.length),e.sheet.insertRule(' @font-face {   font-family: "anchorjs-icons";   src: url(data:n/a;base64,AAEAAAALAIAAAwAwT1MvMg8yG2cAAAE4AAAAYGNtYXDp3gC3AAABpAAAAExnYXNwAAAAEAAAA9wAAAAIZ2x5ZlQCcfwAAAH4AAABCGhlYWQHFvHyAAAAvAAAADZoaGVhBnACFwAAAPQAAAAkaG10eASAADEAAAGYAAAADGxvY2EACACEAAAB8AAAAAhtYXhwAAYAVwAAARgAAAAgbmFtZQGOH9cAAAMAAAAAunBvc3QAAwAAAAADvAAAACAAAQAAAAEAAHzE2p9fDzz1AAkEAAAAAADRecUWAAAAANQA6R8AAAAAAoACwAAAAAgAAgAAAAAAAAABAAADwP/AAAACgAAA/9MCrQABAAAAAAAAAAAAAAAAAAAAAwABAAAAAwBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAMCQAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAg//0DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAAIAAAACgAAxAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADAAAAAIAAgAAgAAACDpy//9//8AAAAg6cv//f///+EWNwADAAEAAAAAAAAAAAAAAAAACACEAAEAAAAAAAAAAAAAAAAxAAACAAQARAKAAsAAKwBUAAABIiYnJjQ3NzY2MzIWFxYUBwcGIicmNDc3NjQnJiYjIgYHBwYUFxYUBwYGIwciJicmNDc3NjIXFhQHBwYUFxYWMzI2Nzc2NCcmNDc2MhcWFAcHBgYjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAAADACWAAEAAAAAAAEACAAAAAEAAAAAAAIAAwAIAAEAAAAAAAMACAAAAAEAAAAAAAQACAAAAAEAAAAAAAUAAQALAAEAAAAAAAYACAAAAAMAAQQJAAEAEAAMAAMAAQQJAAIABgAcAAMAAQQJAAMAEAAMAAMAAQQJAAQAEAAMAAMAAQQJAAUAAgAiAAMAAQQJAAYAEAAMYW5jaG9yanM0MDBAAGEAbgBjAGgAbwByAGoAcwA0ADAAMABAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAP) format("truetype"); }',e.sheet.cssRules.length)}}(),t=document.querySelectorAll("[id]"),i=[].map.call(t,function(A){return A.id}),o=0;o<e.length;o++)if(this.hasAnchorJSLink(e[o]))d.push(o);else{if(e[o].hasAttribute("id"))n=e[o].getAttribute("id");else if(e[o].hasAttribute("data-anchor-id"))n=e[o].getAttribute("data-anchor-id");else{for(c=r=this.urlify(e[o].textContent),a=0;void 0!==s&&(c=r+"-"+a),a+=1,-1!==(s=i.indexOf(c)););s=void 0,i.push(c),e[o].setAttribute("id",c),n=c}n.replace(/-/g," "),(h=document.createElement("a")).className="anchorjs-link "+this.options.class,h.setAttribute("aria-label",this.options.ariaLabel),h.setAttribute("data-anchorjs-icon",this.options.icon),this.options.titleText&&(h.title=this.options.titleText),u=document.querySelector("base")?window.location.pathname+window.location.search:"",u=this.options.base||u,h.href=u+"#"+n,"always"===l&&(h.style.opacity="1"),""===this.options.icon&&(h.style.font="1em/1 anchorjs-icons","left"===this.options.placement&&(h.style.lineHeight="inherit")),"left"===this.options.placement?(h.style.position="absolute",h.style.marginLeft="-1em",h.style.paddingRight="0.5em",e[o].insertBefore(h,e[o].firstChild)):(h.style.paddingLeft="0.375em",e[o].appendChild(h))}for(o=0;o<d.length;o++)e.splice(d[o]-o,1);return this.elements=this.elements.concat(e),this},this.remove=function(A){for(var e,t,i=p(A),n=0;n<i.length;n++)(t=i[n].querySelector(".anchorjs-link"))&&(-1!==(e=this.elements.indexOf(i[n]))&&this.elements.splice(e,1),i[n].removeChild(t));return this},this.removeAll=function(){this.remove(this.elements)},this.urlify=function(A){return this.options.truncate||f(this.options),A.trim().replace(/\'/gi,"").replace(/[& +$,:;=?@"#{}|^~[`%!'<>\]\.\/\(\)\*\\\n\t\b\v]/g,"-").replace(/-{2,}/g,"-").substring(0,this.options.truncate).replace(/^-+|-+$/gm,"").toLowerCase()},this.hasAnchorJSLink=function(A){var e=A.firstChild&&-1<(" "+A.firstChild.className+" ").indexOf(" anchorjs-link "),t=A.lastChild&&-1<(" "+A.lastChild.className+" ").indexOf(" anchorjs-link ");return e||t||!1}}});
    </script>
  
</head>
<body>
    <header>
    <!--#include virtual="/includes/promotion_banner.html" -->
    <div class="container">
        <button type='button' class='menu' title='Docs menu'>
        <img src="/assets/images/menu-icon.svg" width="18" height="12" alt="menu icon" />
        </button>
        <div class='home'>
            <a href="/" class='home' title='Apache Ignite home'>
                <img src="/assets/images/apache_ignite_logo.svg" alt="Apache Ignite logo" width="103" height="36" >
            </a>
        </div>

        
        
        <select id="product-selector">
            <option value="/docs/ignite2/latest" >Ignite 2</option>
            <option value="/docs/ignite3/latest"selected>Ignite 3</option>
        </select>

        <select id="version-selector">
            <option value="3.0.0">3.0.0</option>
        </select>


        <nav id="api-docs"><ul>
            <li><a href="#">APIs</a>
                <nav class='dropdown'>
                    <ul>
                    
                    <li class="dropdown-item"><a href="/releases/ignite3/3.0.0/javadoc/index.html">Java</a></li>
                    <li class="dropdown-item"><a href="/releases/ignite3/3.0.0/dotnetdoc/">C#/.NET</a></li>
                    <li class="dropdown-item"><a href="/releases/ignite3/3.0.0/cppdoc/index.html">C++</a></li>
                    <li class="dropdown-item"><a href="https://iggusev.github.io/openapi-ignite3.github.io/">OpenAPI</a></li>
                    
                    </ul>
                </nav>
            </li>

            <li><a href="#">Examples</a>
                <nav class="dropdown">
                    <ul>
                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/examples" target="_blank" rel="noopener" title="Apache Ignite Java examples">Java</a></li>

                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/modules/platforms/dotnet/examples" target="_blank" rel="noopener" title="Apache Ignite C#/.NET examples">C#/.NET</a></li>

                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/modules/platforms/cpp/examples" target="_blank" rel="noopener" title="Apache Ignite C++ examples">C++</a></li>

                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/modules/platforms/python/examples" target="_blank" rel="noopener" title="Apache Ignite Python examples">Python</a></li>

                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/modules/platforms/nodejs/examples" target="_blank" rel="noopener" title="Apache Ignite NodeJS examples">NodeJS</a></li>

                    <li class="dropdown-item"><a href="https://github.com/apache/ignite/tree/master/modules/platforms/php/examples" target="_blank" rel="noopener" title="Apache Ignite PHP examples">PHP</a></li>
                </ul>
                </nav>
                </li></ul>
        </nav>



        <div id="search-button"></div>

        <nav id="lang-selector"><ul>
            <li><a href="#"><img src="/assets/images/icon_lang_en_75x75.jpg" alt="English language icon"  width="25" height="25" /><span>▼</span></a>
                <nav class="dropdown">
                    <li class="dropdown-item"><a href="/docs/latest/" ><img src="/assets/images/icon_lang_en_75x75.jpg" alt="English language icon" width="25" height="25" /><span>English</span></a></li>
                    <li class="dropdown-item"><a href="https://www.ignite-service.cn/doc/java/" target="_blank" rel="noopener"><img src="/assets/images/icon_lang_cn_75x75.jpg"  width="25" height="25" alt="Chinese language icon" /><span>Chinese</span></a></li>
                </nav>
            </li></ul>
        </nav>

        <button type='button' class='top-nav-toggle'>⋮</button>
        
    </div>
    <div id="search-wrapper">
        <div id="search"></div>
    </div>
</header>

    	 <link rel="stylesheet" href="/assets/css/docs.css">
<section class='page-docs'>
    





<nav class='left-nav' data-swiftype-index='false'>
    
    
        <li>
            
                
                <a href="/docs/ignite3/latest/index" class='' >About Apache Ignite 3</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' class='group-toggle collapsed '>Installation<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"  width="6" height="10"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/installation/installing-using-zip"
                                class=''
                            >Installing Using ZIP Archive</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/installation/deb-rpm"
                                class=''
                            >Installing DEB or RPM package</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/installation/installing-using-docker"
                                class=''
                            >Installing Docker</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' class='group-toggle expanded '>Getting Started<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"  width="6" height="10"></button>
             <nav class='nav-group expanded'>
            
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/quick-start/getting-started-guide"
                                class=''
                            >Quick Start</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/quick-start/start-cluster"
                                class=''
                            >Start Ignite 3 Cluster</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/quick-start/explore-sql"
                                class='active'
                            >Explore SQL Capabilities</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/quick-start/persist-data"
                                class=''
                            >Persist Your Data</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/quick-start/java-api"
                                class=''
                            >Use Java API</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            
                
                <a href="/docs/ignite3/latest/quick-start/embedded-mode" class='' >Embedded Mode</a>
            
        </li>
    
        <li>
            
                
                <a href="/docs/ignite3/latest/ignite-cli-tool" class='' >Ignite CLI Tool</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' class='group-toggle collapsed '>Developers Guide<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"  width="6" height="10"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/table-api"
                                class=''
                            >Table API</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Clients<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/clients/overview" class=''>Overview</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/clients/java" class=''>Java Clients</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/clients/dotnet" class=''>.NET Clients</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/clients/cpp" class=''>C++ Clients</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/clients/linq" class=''>.NET LINQ Queries</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Working with SQL<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/sql/calcite-based-sql-engine" class=''>Introduction</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/" class=''>SQL API</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/sql/jdbc-driver" class=''>JDBC Driver</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/sql/odbc/odbc-driver" class=''>ODBC Driver</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/java-to-tables"
                                class=''
                            >Tables from Java Classes</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Events<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/events/overview" class=''>Working with Events</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/events/events-list" class=''>Available Events</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/compute/compute"
                                class=''
                            >Distributed Computing</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/transactions"
                                class=''
                            >Transactions</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/data-streamer"
                                class=''
                            >Data Streaming</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/developers-guide/code-deployment/code-deployment"
                                class=''
                            >Code Deployment</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>REST API<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/developers-guide/rest/rest-api" class=''>Overview</a></li>
                            
                            </nav>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' class='group-toggle collapsed '>Administrator’s Guide<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"  width="6" height="10"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Ignite Configuration<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/config/node-config" class=''>Node Configuration Parameters</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/config/cluster-config" class=''>Cluster Configuration Parameters</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/config/storage/persistent" class=''>Storage Configuration</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/lifecycle"
                                class=''
                            >Cluster Lifecycle</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/distribution-zones"
                                class=''
                            >Distribution Zones</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/storage"
                                class=''
                            >Storage Profiles and Engines</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/data-partitions"
                                class=''
                            >Data Partitioning</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/colocation"
                                class=''
                            >Data Colocation</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/cluster-security"
                                class=''
                            >Cluster Security</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Security and Authentication<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/security/ssl-tls" class=''>SSL/TLS</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/security/authentication" class=''>Authentication</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Metrics and Monitoring<img class="state-indicator" src="/assets/images/left-nav-arrow.svg" width="6" height="10"></button>
                            <nav class="sub_pages collapsed">

                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/metrics/configuring-metrics" class=''>Configuring Metrics</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/metrics/metrics-list" class=''>Metrics List</a></li>
                            
                                
                                  

								  <li><a href="/docs/ignite3/latest/administrators-guide/metrics/system-views" class=''>System Views</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/administrators-guide/handling-exceptions"
                                class=''
                            >Handling Exceptions</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' class='group-toggle collapsed '>SQL Reference<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"  width="6" height="10"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/ddl"
                                class=''
                            >Data Definition Language (DDL)</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/dml"
                                class=''
                            >Data Manipulation Language (DML)</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/transactions"
                                class=''
                            >Transactions</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/distribution-zones"
                                class=''
                            >Distribution Zones</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/operators-and-functions"
                                class=''
                            >Supported Operators and Functions</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/grammar-reference"
                                class=''
                            >Grammar Reference</a>
                        
                    </li>
                

                    
                    
                    

                    <li> 
                        
                            <a href="/docs/ignite3/latest/sql-reference/data-types"
                                class=''
                            >Data Types</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            
                
                <a href="/docs/ignite3/latest/sql-tuning" class='' >SQL Performance Tuning</a>
            
        </li>
    
        <li>
            
                
                <a href="/docs/ignite3/latest/general-tips" class='' >General Configuration Tips</a>
            
        </li>
    
        <li>
            
                
                <a href="/docs/ignite3/latest/glossary/glossary" class='' >Glossary</a>
            
        </li>
    
</nav>
<div class="left-nav__overlay"></div>


    <article data-swiftype-index='true'>
      <a class='edit-link' href="https://github.com/apache/ignite-3/tree/main/docs/_docs/quick-start/explore-sql.adoc" target="_blank">Edit</a>
        
            <h1>Getting Started with SQL</h1>
        
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide walks you through using Ignite 3 SQL capabilities via the command-line interface. You&#8217;ll set up a distributed Apache Ignite cluster, create and manipulate the Chinook database (a sample database representing a digital media store), and learn to leverage Ignite&#8217;s powerful SQL features.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites">Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Docker and Docker Compose installed on your system;</p>
</li>
<li>
<p>Basic familiarity with SQL;</p>
</li>
<li>
<p>Command-line terminal access;</p>
</li>
<li>
<p>8GB+ of available RAM for running the containers;</p>
</li>
<li>
<p>SQL directory with Chinook Database files downloaded.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="before-starting">Before Starting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial uses prepared files to streamline deployment. Make sure you have downloaded the required files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/docs/ignite3/latest/quick-start/sql-files/docker-compose.yml" target="_blank" rel="noopener">docker-compose.yml</a></p>
</li>
<li>
<p><a href="/docs/ignite3/latest/quick-start/sql-files/sql.zip" target="_blank" rel="noopener">sql archive</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unpack the archive into a new folder, and place it and the docker compose file in the same directory where you will be running the Docker CLI commands. The tutorial expects these SQL files to be available and mounted to the container.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Without these files, you will be unable to load the sample data needed for the exercises.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setting-up-a-ignite-3-cluster">Setting Up a Ignite 3 Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we can start using SQL, we need to set up a Ignite cluster. We will use Docker Compose to create a three-node cluster.</p>
</div>
<div class="sect2">
<h3 id="starting-the-cluster">Starting the Cluster</h3>
<div class="paragraph">
<p>Open a terminal in the directory containing the docker compose file <code>docker-compose.yml</code> file and start the cluster with Docker:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker compose up <span class="nt">-d</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This command starts the cluster in detached mode. You should see startup messages from all three nodes. When they are ready, you will see messages indicating that the servers have started successfully.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker compose up <span class="nt">-d</span>

<span class="o">[</span>+] Running 4
 ✔ Network ignite3_default    Created
 ✔ Container ignite3-node2-1  Started
 ✔ Container ignite3-node3-1  Started
 ✔ Container ignite3-node1-1  Started</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can check that all containers are running with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker compose ps</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see all three nodes with a "running" status.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Verify that all three nodes are "running" before continuing.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connecting-to-the-cluster-using-ignite-cli">Connecting to the Cluster Using Ignite CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we will connect to our running cluster using Ignite command-line interface (CLI).</p>
</div>
<div class="sect2">
<h3 id="starting-the-cli">Starting the CLI</h3>
<div class="paragraph">
<p>In your terminal, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker run <span class="nt">--rm</span> <span class="nt">-it</span> <span class="nt">--network</span><span class="o">=</span>host <span class="nt">-e</span> <span class="nv">LANG</span><span class="o">=</span>C.UTF-8 <span class="nt">-e</span> <span class="nv">LC_ALL</span><span class="o">=</span>C.UTF-8 <span class="nt">-v</span> ./sql/:/opt/ignite/downloads/ apacheignite/ignite:3.0.0 cli</code></pre>
</div>
</div>
<div class="paragraph">
<p>This starts an interactive CLI container connected to the same Docker network as our cluster and mounts a volume containing the sql files for the Chinook Database. When prompted, connect to the default node. If you refused the connection, you can do it manually with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">connect http://localhost:10300</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see a message that you&#8217;re connected to <code><a href="http://localhost:10300" class="bare">http://localhost:10300</a></code> and a note that the cluster is not initialized.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The CLI container runs separately from the cluster nodes, but connects to them over the Docker network.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="initializing-the-cluster">Initializing the Cluster</h3>
<div class="paragraph">
<p>Before we can use the cluster, we need to initialize it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">cluster init <span class="nt">--name</span><span class="o">=</span>ignite3 <span class="nt">--metastorage-group</span><span class="o">=</span>node1,node2,node3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is how the result may look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">           #              ___                         __
         ###             /   |   ____   ____ _ _____ / /_   ___
     #  #####           / /| |  / __ \ / __ `// ___// __ \ / _ \
   ###  ######         / ___ | / /_/ // /_/ // /__ / / / // ___/
  #####  #######      /_/  |_|/ .___/ \__,_/ \___//_/ /_/ \___/
  #######  ######            /_/
    ########  ####        ____               _  __           _____
   #  ########  ##       /  _/____ _ ____   (_)/ /_ ___     |__  /
  ####  #######  #       / / / __ `// __ \ / // __// _ \     /_ &lt;
   #####  #####        _/ / / /_/ // / / // // /_ / ___/   ___/ /
     ####  ##         /___/ \__, //_/ /_//_/ \__/ \___/   /____/
       ##                  /____/

                      Apache Ignite CLI version 3.0.0


You appear to have not connected to any node yet. Do you want to connect to the default node http://localhost:10300? [Y/n] y
Connected to http://localhost:10300
The cluster is not initialized. Run cluster init command to initialize it.
[node1]&gt; cluster init --name=ignite3 --metastorage-group=node1,node2,node3
Cluster was initialized successfully
[node1]&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-chinook-database-schema">Creating the Chinook Database Schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that our cluster is running and initialized, we can start using SQL to create and work with data in Ignite. The Chinook database is a digital music store dataset, with tables for artists, albums, tracks, customers, and sales.</p>
</div>
<div class="sect2">
<h3 id="entering-sql-mode">Entering SQL Mode</h3>
<div class="paragraph">
<p>To start working with SQL, enter SQL mode in the CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your prompt should change to <code>sql-cli&gt;</code> indicating you&#8217;re now in SQL mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">[node1]&gt; sql
sql-cli&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-distribution-zones">Creating Distribution Zones</h3>
<div class="paragraph">
<p>Before we create tables, let&#8217;s set up distribution zones to control how our data is distributed and replicated across the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">ZONE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">Chinook</span> <span class="k">WITH</span> <span class="n">replicas</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">storage_profiles</span><span class="o">=</span><span class="s1">'default'</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">ZONE</span> <span class="n">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">ChinookReplicated</span> <span class="k">WITH</span> <span class="n">replicas</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">partitions</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">storage_profiles</span><span class="o">=</span><span class="s1">'default'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These commands create two zones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Chinook</code> - Standard zone with 2 replicas for most tables;</p>
</li>
<li>
<p><code>ChinookReplicated</code> - Zone with 3 replicas for frequently accessed reference data.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="database-entity-relationship">Database Entity Relationship</h3>
<div class="paragraph">
<p>Here&#8217;s the entity relationship diagram for our Chinook database:</p>
</div>
<pre class="mermaid">
erDiagram
    ARTIST ||--o{ ALBUM : creates
    ALBUM ||--o{ TRACK : contains
    GENRE ||--o{ TRACK : categorizes
    MEDIATYPE ||--o{ TRACK : formats
    CUSTOMER ||--o{ INVOICE : places
    INVOICE ||--o{ INVOICELINE : contains
    TRACK ||--o{ INVOICELINE : purchased-in
    EMPLOYEE ||--o{ CUSTOMER : supports
    PLAYLIST ||--o{ PLAYLISTTRACK : contains
    TRACK ||--o{ PLAYLISTTRACK : appears-in
</div>
<div class="sect2">
<h3 id="creating-core-tables">Creating Core Tables</h3>
<div class="paragraph">
<p>Now let&#8217;s create the main tables for the Chinook database. We will start with the Artist and Album tables.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Copy and paste the following SQL blocks at the <code>sql-cli&gt;</code> prompt then hit enter.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Artist</span> <span class="p">(</span>
    <span class="n">ArtistId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">ArtistId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Album</span> <span class="p">(</span>
    <span class="n">AlbumId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Title</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">160</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">ArtistId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">ReleaseYear</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">AlbumId</span><span class="p">,</span> <span class="n">ArtistId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">ArtistId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>COLOCATE BY</code> clause in the <strong>Album</strong> table ensures that albums by the same artist are stored on the same nodes. This optimizes joins between Artist and Album tables by eliminating the need for network transfers during queries.</p>
</div>
<div class="paragraph">
<p>Next, let&#8217;s create the Genre and MediaType reference tables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Genre</span> <span class="p">(</span>
    <span class="n">GenreId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">GenreId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">ChinookReplicated</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">MediaType</span> <span class="p">(</span>
    <span class="n">MediaTypeId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">MediaTypeId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">ChinookReplicated</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These reference tables are placed in the <code>ChinookReplicated</code> zone with 3 replicas because they contain static data that is frequently joined with other tables. Having a copy on each node improves read performance.</p>
</div>
<div class="paragraph">
<p>Now, let&#8217;s create the Track table, which references the Album, Genre, and MediaType tables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Track</span> <span class="p">(</span>
    <span class="n">TrackId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AlbumId</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">MediaTypeId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">GenreId</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">Composer</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">220</span><span class="p">),</span>
    <span class="n">Milliseconds</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Bytes</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">UnitPrice</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">TrackId</span><span class="p">,</span> <span class="n">AlbumId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">AlbumId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tracks are colocated by AlbumId, not by TrackId, because most queries join tracks with their albums. This colocation optimizes these common join patterns.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s also create tables to manage customers, employees, and sales:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Employee</span> <span class="p">(</span>
    <span class="n">EmployeeId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">LastName</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">FirstName</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Title</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
    <span class="n">ReportsTo</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="n">BirthDate</span> <span class="nb">DATE</span><span class="p">,</span>
    <span class="n">HireDate</span> <span class="nb">DATE</span><span class="p">,</span>
    <span class="n">Address</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">70</span><span class="p">),</span>
    <span class="n">City</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="k">State</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">Country</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">PostalCode</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">Phone</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
    <span class="n">Fax</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
    <span class="n">Email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">EmployeeId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Customer</span> <span class="p">(</span>
    <span class="n">CustomerId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">FirstName</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">LastName</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Company</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span>
    <span class="n">Address</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">70</span><span class="p">),</span>
    <span class="n">City</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="k">State</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">Country</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">PostalCode</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">Phone</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
    <span class="n">Fax</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
    <span class="n">Email</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">SupportRepId</span> <span class="nb">INT</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">CustomerId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Invoice</span> <span class="p">(</span>
    <span class="n">InvoiceId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">CustomerId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">InvoiceDate</span> <span class="nb">DATE</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">BillingAddress</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">70</span><span class="p">),</span>
    <span class="n">BillingCity</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">BillingState</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">BillingCountry</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span>
    <span class="n">BillingPostalCode</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">Total</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">InvoiceId</span><span class="p">,</span> <span class="n">CustomerId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">CustomerId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">InvoiceLine</span> <span class="p">(</span>
    <span class="n">InvoiceLineId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">InvoiceId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">TrackId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">UnitPrice</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Quantity</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">InvoiceLineId</span><span class="p">,</span> <span class="n">TrackId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">TrackId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Invoices are colocated by CustomerId and InvoiceLines are colocated by InvoiceId. This creates an efficient chain of locality: Customer → Invoice → InvoiceLine, optimizing queries that analyze customer purchase history.</p>
</div>
<div class="paragraph">
<p>Finally, let&#8217;s create the playlist-related tables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Playlist</span> <span class="p">(</span>
    <span class="n">PlaylistId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">120</span><span class="p">),</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">PlaylistId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">PlaylistTrack</span> <span class="p">(</span>
    <span class="n">PlaylistId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">TrackId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">PlaylistId</span><span class="p">,</span> <span class="n">TrackId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that PlaylistTrack is not colocated with Track. This is a design decision that prioritizes playlist operations over joining with track details. In a real-world scenario, you might make a different colocation choice depending on your most common query patterns.</p>
</div>
</div>
<div class="sect2">
<h3 id="verifying-table-creation">Verifying Table Creation</h3>
<div class="paragraph">
<p>Let&#8217;s confirm that all our tables were created successfully:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">tables</span> <span class="k">WHERE</span> <span class="k">schema</span> <span class="o">=</span> <span class="s1">'PUBLIC'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This query checks the system tables to verify that our tables exist. You should see a list of all the tables we&#8217;ve created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql-cli&gt; SELECT <span class="k">*</span> FROM system.tables WHERE schema <span class="o">=</span> <span class="s1">'PUBLIC'</span><span class="p">;</span>
╔════════╤═══════════════╤════╤═════════════╤═══════════════════╤═════════════════╤══════════════════════╗
║ SCHEMA │ NAME          │ ID │ PK_INDEX_ID │ ZONE              │ STORAGE_PROFILE │ COLOCATION_KEY_INDEX ║
╠════════╪═══════════════╪════╪═════════════╪═══════════════════╪═════════════════╪══════════════════════╣
║ PUBLIC │ ALBUM         │ 20 │ 21          │ CHINOOK           │ default         │ ARTISTID             ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ GENRE         │ 22 │ 23          │ CHINOOKREPLICATED │ default         │ GENREID              ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ ARTIST        │ 18 │ 19          │ CHINOOK           │ default         │ ARTISTID             ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ TRACK         │ 26 │ 27          │ CHINOOK           │ default         │ ALBUMID              ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ PLAYLIST      │ 36 │ 37          │ CHINOOK           │ default         │ PLAYLISTID           ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ PLAYLISTTRACK │ 38 │ 39          │ CHINOOK           │ default         │ PLAYLISTID, TRACKID  ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ MEDIATYPE     │ 24 │ 25          │ CHINOOKREPLICATED │ default         │ MEDIATYPEID          ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ INVOICELINE   │ 34 │ 35          │ CHINOOK           │ default         │ TRACKID              ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ EMPLOYEE      │ 28 │ 29          │ CHINOOK           │ default         │ EMPLOYEEID           ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ CUSTOMER      │ 30 │ 31          │ CHINOOK           │ default         │ CUSTOMERID           ║
╟────────┼───────────────┼────┼─────────────┼───────────────────┼─────────────────┼──────────────────────╢
║ PUBLIC │ INVOICE       │ 32 │ 33          │ CHINOOK           │ default         │ CUSTOMERID           ║
╚════════╧═══════════════╧════╧═════════════╧═══════════════════╧═════════════════╧══════════════════════╝</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<strong>Checkpoint</strong>: Verify that all tables appear in the <code>system.tables</code> output with their proper zones and colocation settings before proceeding to the next section.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inserting-sample-data">Inserting Sample Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have our tables set up, let&#8217;s populate them with sample data.</p>
</div>
<div class="sect2">
<h3 id="adding-artists-and-albums">Adding Artists and Albums</h3>
<div class="paragraph">
<p>Let&#8217;s start by adding some artists.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Exit the interactive sql mode by typing <code>exit;</code>.</p>
</li>
<li>
<p>Then, load the current store catalog from the sql data file.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/current_catalog.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql-cli&gt; <span class="nb">exit</span><span class="p">;</span>
<span class="o">[</span>node1]&gt; sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/current_catalog.sql
Updated 275 rows.
Updated 347 rows.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-genres-and-media-types">Adding Genres and Media Types</h3>
<div class="paragraph">
<p>Let&#8217;s populate our reference tables the same way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/media_and_genre.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">[</span>node1]&gt; sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/media_and_genre.sql
Updated 25 rows.
Updated 5 rows.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-tracks">Adding Tracks</h3>
<div class="paragraph">
<p>Now let&#8217;s add some tracks to our albums:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/tracks.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">[</span>node1]&gt; sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/tracks.sql
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 503 rows.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-employees-and-customers">Adding Employees and Customers</h3>
<div class="paragraph">
<p>Let&#8217;s add some employee and customer data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/ee_and_cust.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">[</span>node1]&gt; sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/ee_and_cust.sql
Updated 8 rows.
Updated 59 rows.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adding-invoices-and-invoice-lines">Adding Invoices and Invoice Lines</h3>
<div class="paragraph">
<p>Finally, let&#8217;s add some sales data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/invoices.sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="o">[</span>node1]&gt; sql <span class="nt">--file</span><span class="o">=</span>/opt/ignite/downloads/invoices.sql
Updated 412 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 240 rows.
Updated 18 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 1000 rows.
Updated 715 rows.</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<strong>Checkpoint</strong>: Verify that all the data has been loaded successfully by checking that the "Updated X rows" messages match the expected row counts for each file.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="querying-data-in-ignite-sql">Querying Data in Ignite SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that we have data in our tables, let&#8217;s run some SQL queries to explore the Chinook database.</p>
</div>
<div class="sect2">
<h3 id="basic-queries">Basic Queries</h3>
<div class="paragraph">
<p>Let&#8217;s return to the <code>sql-cli&gt;</code> and start with some simple SELECT queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">sql</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Get all artists</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Artist</span><span class="p">;</span>

<span class="c1">-- Get all albums for a specific artist</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Album</span> <span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="c1">-- Get all tracks for a specific album</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Track</span> <span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">133</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="joins">Joins</h3>
<div class="paragraph">
<p>Now let&#8217;s try some more complex queries with joins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Get all tracks with artist and album information</span>
<span class="k">SELECT</span>
    <span class="n">t</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">TrackName</span><span class="p">,</span>
    <span class="n">a</span><span class="p">.</span><span class="n">Title</span> <span class="k">AS</span> <span class="n">AlbumTitle</span><span class="p">,</span>
    <span class="n">ar</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">ArtistName</span>
<span class="k">FROM</span>
    <span class="n">Track</span> <span class="n">t</span>
    <span class="k">JOIN</span> <span class="n">Album</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">AlbumId</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">AlbumId</span>
    <span class="k">JOIN</span> <span class="n">Artist</span> <span class="n">ar</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">ArtistId</span> <span class="o">=</span> <span class="n">ar</span><span class="p">.</span><span class="n">ArtistId</span>
<span class="k">LIMIT</span> <span class="mi">10</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This complex query uses multiple CTEs to achieve what would typically be done with the RANK() window function. We first count tracks per album, then determine the maximum track count per artist, and finally join these results to identify albums with the most tracks for each artist.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-manipulation-in-ignite-sql">Data Manipulation in Ignite SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s explore how to modify data using SQL in Ignite.</p>
</div>
<div class="sect2">
<h3 id="understanding-distributed-updates">Understanding Distributed Updates</h3>
<div class="paragraph">
<p>When you update data in a distributed database, the changes need to be coordinated across multiple nodes:</p>
</div>
<pre class="mermaid">
sequenceDiagram
    participant Client
    participant Node1
    participant Node2
    participant Node3

    Client->>Node1: UPDATE request
    Node1->>Node1: Update local primary copy
    Node1->>Node2: Propagate changes to backup copy
    Node1-->>Client: Confirm update completed
</div>
<div class="sect2">
<h3 id="inserting-new-data">Inserting New Data</h3>
<div class="paragraph">
<p>Let&#8217;s add a new artist and album:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Insert a new artist</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Artist</span> <span class="p">(</span><span class="n">ArtistId</span><span class="p">,</span> <span class="n">Name</span><span class="p">)</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="mi">276</span><span class="p">,</span> <span class="s1">'New Discovery Band'</span><span class="p">);</span>

<span class="c1">-- Insert a new album for this artist</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Album</span> <span class="p">(</span><span class="n">AlbumId</span><span class="p">,</span> <span class="n">Title</span><span class="p">,</span> <span class="n">ArtistId</span><span class="p">,</span> <span class="n">ReleaseYear</span><span class="p">)</span>
<span class="k">VALUES</span> <span class="p">(</span><span class="mi">348</span><span class="p">,</span> <span class="s1">'First Light'</span><span class="p">,</span> <span class="mi">276</span><span class="p">,</span> <span class="mi">2023</span><span class="p">);</span>

<span class="c1">-- Verify the insertions</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Artist</span> <span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">276</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Album</span> <span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">348</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="updating-existing-data">Updating Existing Data</h3>
<div class="paragraph">
<p>Now let&#8217;s update some of our existing data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Update the album release year</span>
<span class="k">UPDATE</span> <span class="n">Album</span>
<span class="k">SET</span> <span class="n">ReleaseYear</span> <span class="o">=</span> <span class="mi">2024</span>
<span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">348</span><span class="p">;</span>

<span class="c1">-- Update the artist name</span>
<span class="k">UPDATE</span> <span class="n">Artist</span>
<span class="k">SET</span> <span class="n">Name</span> <span class="o">=</span> <span class="s1">'New Discovery Ensemble'</span>
<span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">276</span><span class="p">;</span>

<span class="c1">-- Verify the updates</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Artist</span> <span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">276</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Album</span> <span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">348</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In a distributed database like Ignite, these updates are automatically propagated to all replicas. The primary copy is updated first, then the changes are sent to the backup copies on other nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="deleting-data">Deleting Data</h3>
<div class="paragraph">
<p>Finally, let&#8217;s clean up by deleting the data we added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Delete the album</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">Album</span> <span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">348</span><span class="p">;</span>

<span class="c1">-- Delete the artist</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">Artist</span> <span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">276</span><span class="p">;</span>

<span class="c1">-- Verify the deletions</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Artist</span> <span class="k">WHERE</span> <span class="n">ArtistId</span> <span class="o">=</span> <span class="mi">276</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Album</span> <span class="k">WHERE</span> <span class="n">AlbumId</span> <span class="o">=</span> <span class="mi">348</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-sql-features">Advanced SQL Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s explore some of Ignite&#8217;s more advanced SQL features.</p>
</div>
<div class="sect2">
<h3 id="querying-system-views">Querying System Views</h3>
<div class="paragraph">
<p>Ignite provides system views that let you inspect cluster metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- View all tables in the cluster</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">tables</span><span class="p">;</span>

<span class="c1">-- View all zones</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">zones</span><span class="p">;</span>

<span class="c1">-- View all columns for a specific table</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">table_columns</span> <span class="k">WHERE</span> <span class="k">TABLE_NAME</span> <span class="o">=</span> <span class="s1">'TRACK'</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>System views provide important metadata about your cluster configuration. They are essential for monitoring and troubleshooting in production environments.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-indexes-for-better-performance">Creating Indexes for Better Performance</h3>
<div class="paragraph">
<p>Let&#8217;s add some indexes to improve query performance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Create an index on the Name column of the Track table</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_track_name</span> <span class="k">ON</span> <span class="n">Track</span> <span class="p">(</span><span class="n">Name</span><span class="p">);</span>

<span class="c1">-- Create a composite index on Artist and Album</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_album_artist</span> <span class="k">ON</span> <span class="n">Album</span> <span class="p">(</span><span class="n">ArtistId</span><span class="p">,</span> <span class="n">Title</span><span class="p">);</span>

<span class="c1">-- Create a composite index on Track's AlbumId and Name columns to optimize joins with Album table</span>
<span class="c1">-- and to improve performance when filtering or sorting by track name within an album</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_track_albumid_name</span> <span class="k">ON</span> <span class="n">Track</span><span class="p">(</span><span class="n">AlbumId</span><span class="p">,</span> <span class="n">Name</span><span class="p">);</span>

<span class="c1">-- Create an index on Album Title to speed up searches and sorts by album title</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_album_title</span> <span class="k">ON</span> <span class="n">Album</span><span class="p">(</span><span class="n">Title</span><span class="p">);</span>

<span class="c1">-- Create a composite index on InvoiceLine connecting TrackId and InvoiceId</span>
<span class="c1">-- This supports efficient queries that join InvoiceLine with Track while filtering by InvoiceId</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_invoiceline_trackid_invoiceid</span> <span class="k">ON</span> <span class="n">InvoiceLine</span><span class="p">(</span><span class="n">TrackId</span><span class="p">,</span> <span class="n">InvoiceId</span><span class="p">);</span>

<span class="c1">-- Create a hash index for lookups by email</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_customer_email</span> <span class="k">ON</span> <span class="n">Customer</span> <span class="k">USING</span> <span class="n">HASH</span> <span class="p">(</span><span class="n">Email</span><span class="p">);</span>

<span class="c1">-- Check index information</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">indexes</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Indexes improve query performance, but come with maintenance costs. Each write operation must also update all indexes. Choose indexes that support your most common query patterns rather than indexing everything.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-dashboard-using-sql">Creating a Dashboard Using SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s create SQL queries that could be used for a music store dashboard. These queries could be saved and run periodically to generate reports.</p>
</div>
<div class="sect2">
<h3 id="monthly-sales-summary">Monthly Sales Summary</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Monthly sales summary for the last 12 months</span>
<span class="k">SELECT</span>
    <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span> <span class="o">||</span> <span class="s1">'-'</span> <span class="o">||</span>
    <span class="k">CASE</span>
        <span class="k">WHEN</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span>
        <span class="k">THEN</span> <span class="s1">'0'</span> <span class="o">||</span> <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span>
        <span class="k">ELSE</span> <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span>
    <span class="k">END</span> <span class="k">AS</span> <span class="n">YearMonth</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">InvoiceCount</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">CustomerId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">CustomerCount</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">Total</span><span class="p">)</span> <span class="k">AS</span> <span class="n">MonthlyRevenue</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">Total</span><span class="p">)</span> <span class="k">AS</span> <span class="n">AverageOrderValue</span>
<span class="k">FROM</span>
    <span class="n">Invoice</span> <span class="n">i</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">),</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">YearMonth</span> <span class="k">DESC</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This query formats the year and month into a sortable string (YYYY-MM) while calculating several key business metrics.</p>
</div>
</div>
<div class="sect2">
<h3 id="top-selling-genres">Top Selling Genres</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Top selling genres by revenue</span>
<span class="k">SELECT</span>
    <span class="k">g</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">Genre</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">il</span><span class="p">.</span><span class="n">UnitPrice</span> <span class="o">*</span> <span class="n">il</span><span class="p">.</span><span class="n">Quantity</span><span class="p">)</span> <span class="k">AS</span> <span class="n">Revenue</span>
<span class="k">FROM</span>
    <span class="n">InvoiceLine</span> <span class="n">il</span>
    <span class="k">JOIN</span> <span class="n">Track</span> <span class="n">t</span> <span class="k">ON</span> <span class="n">il</span><span class="p">.</span><span class="n">TrackId</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">TrackId</span>
    <span class="k">JOIN</span> <span class="n">Genre</span> <span class="k">g</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">GenreId</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">GenreId</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="k">g</span><span class="p">.</span><span class="n">Name</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">Revenue</span> <span class="k">DESC</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sales-performance-by-employee">Sales Performance by Employee</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Sales performance by employee</span>
<span class="k">SELECT</span>
    <span class="n">e</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">,</span>
    <span class="n">e</span><span class="p">.</span><span class="n">FirstName</span> <span class="o">||</span> <span class="s1">' '</span> <span class="o">||</span> <span class="n">e</span><span class="p">.</span><span class="n">LastName</span> <span class="k">AS</span> <span class="n">EmployeeName</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">TotalInvoices</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">CustomerId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">UniqueCustomers</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">Total</span><span class="p">)</span> <span class="k">AS</span> <span class="n">TotalSales</span>
<span class="k">FROM</span>
    <span class="n">Employee</span> <span class="n">e</span>
    <span class="k">JOIN</span> <span class="n">Customer</span> <span class="k">c</span> <span class="k">ON</span> <span class="n">e</span><span class="p">.</span><span class="n">EmployeeId</span> <span class="o">=</span> <span class="k">c</span><span class="p">.</span><span class="n">SupportRepId</span>
    <span class="k">JOIN</span> <span class="n">Invoice</span> <span class="n">i</span> <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">CustomerId</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">CustomerId</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="n">e</span><span class="p">.</span><span class="n">EmployeeId</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span> <span class="n">e</span><span class="p">.</span><span class="n">LastName</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">TotalSales</span> <span class="k">DESC</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="top-20-longest-tracks-with-genres">Top 20 Longest Tracks with Genres</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Top 20 longest tracks with genre information</span>
<span class="k">SELECT</span>
    <span class="n">t</span><span class="p">.</span><span class="n">trackid</span><span class="p">,</span>
    <span class="n">t</span><span class="p">.</span><span class="n">name</span> <span class="k">AS</span> <span class="n">track_name</span><span class="p">,</span>
    <span class="k">g</span><span class="p">.</span><span class="n">name</span> <span class="k">AS</span> <span class="n">genre_name</span><span class="p">,</span>
    <span class="n">ROUND</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">milliseconds</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">AS</span> <span class="n">duration_minutes</span>
<span class="k">FROM</span>
    <span class="n">track</span> <span class="n">t</span>
    <span class="k">JOIN</span> <span class="n">genre</span> <span class="k">g</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">genreId</span> <span class="o">=</span> <span class="k">g</span><span class="p">.</span><span class="n">genreId</span>
<span class="k">WHERE</span>
    <span class="n">t</span><span class="p">.</span><span class="n">genreId</span> <span class="o">&lt;</span> <span class="mi">17</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">duration_minutes</span> <span class="k">DESC</span>
<span class="k">LIMIT</span>
    <span class="mi">20</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="customer-purchase-patterns-by-month">Customer Purchase Patterns by Month</h3>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">-- Customer purchase patterns by month</span>
<span class="k">SELECT</span>
    <span class="k">c</span><span class="p">.</span><span class="n">CustomerId</span><span class="p">,</span>
    <span class="k">c</span><span class="p">.</span><span class="n">FirstName</span> <span class="o">||</span> <span class="s1">' '</span> <span class="o">||</span> <span class="k">c</span><span class="p">.</span><span class="n">LastName</span> <span class="k">AS</span> <span class="n">CustomerName</span><span class="p">,</span>
    <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span> <span class="o">||</span> <span class="s1">'-'</span> <span class="o">||</span>
    <span class="k">CASE</span>
        <span class="k">WHEN</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span>
        <span class="k">THEN</span> <span class="s1">'0'</span> <span class="o">||</span> <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span>
        <span class="k">ELSE</span> <span class="k">CAST</span><span class="p">(</span><span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">VARCHAR</span><span class="p">)</span>
    <span class="k">END</span> <span class="k">AS</span> <span class="n">YearMonth</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">NumberOfPurchases</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">Total</span><span class="p">)</span> <span class="k">AS</span> <span class="n">TotalSpent</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">Total</span><span class="p">)</span> <span class="o">/</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">AveragePurchaseValue</span>
<span class="k">FROM</span>
    <span class="n">Customer</span> <span class="k">c</span>
    <span class="k">JOIN</span> <span class="n">Invoice</span> <span class="n">i</span> <span class="k">ON</span> <span class="k">c</span><span class="p">.</span><span class="n">CustomerId</span> <span class="o">=</span> <span class="n">i</span><span class="p">.</span><span class="n">CustomerId</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="k">c</span><span class="p">.</span><span class="n">CustomerId</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">FirstName</span><span class="p">,</span> <span class="k">c</span><span class="p">.</span><span class="n">LastName</span><span class="p">,</span>
    <span class="k">EXTRACT</span><span class="p">(</span><span class="nb">YEAR</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">),</span> <span class="k">EXTRACT</span><span class="p">(</span><span class="k">MONTH</span> <span class="k">FROM</span> <span class="n">i</span><span class="p">.</span><span class="n">InvoiceDate</span><span class="p">)</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="k">c</span><span class="p">.</span><span class="n">CustomerId</span><span class="p">,</span> <span class="n">YearMonth</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performance-tuning-with-colocated-tables">Performance Tuning with Colocated Tables</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the key advantages of Ignite is its ability to optimize joins through data colocation. Let&#8217;s explore this with our existing colocated tables.</p>
</div>
<div class="sect2">
<h3 id="colocated-queries">Colocated Queries</h3>
<div class="paragraph">
<p>Let&#8217;s start by looking at a query where there is a mismatch in the colocation strategy.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">--This is an example of poorly created table.</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">InvoiceLine</span> <span class="p">(</span>
    <span class="n">InvoiceLineId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">InvoiceId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">TrackId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">UnitPrice</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Quantity</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">InvoiceLineId</span><span class="p">,</span> <span class="n">InvoiceId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">InvoiceId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If we create the <code>InvoiceLine</code> table to be colocated by InvoiceId, we end up with a mismatch for our query.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Album is colocated by ArtistId</p>
</li>
<li>
<p>Track is colocated by AlbumId</p>
</li>
<li>
<p>InvoiceLine is colocated by InvoiceId</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This means that when you run a query joining InvoiceLine, Track, and Album, the data might be spread across different nodes because they&#8217;re colocated on different keys. Our query is looking for invoice ID 1, then joining with Track and Album, but these tables are colocated on different keys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">EXPLAIN</span> <span class="n">PLAN</span> <span class="k">FOR</span>
<span class="k">SELECT</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="n">il</span><span class="p">.</span><span class="n">InvoiceLineId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">LineItemCount</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">il</span><span class="p">.</span><span class="n">UnitPrice</span> <span class="o">*</span> <span class="n">il</span><span class="p">.</span><span class="n">Quantity</span><span class="p">)</span> <span class="k">AS</span> <span class="n">InvoiceTotal</span><span class="p">,</span>
    <span class="n">t</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">TrackName</span><span class="p">,</span>
    <span class="n">a</span><span class="p">.</span><span class="n">Title</span> <span class="k">AS</span> <span class="n">AlbumTitle</span>
<span class="k">FROM</span>
    <span class="n">InvoiceLine</span> <span class="n">il</span>
    <span class="k">JOIN</span> <span class="n">Track</span> <span class="n">t</span> <span class="k">ON</span> <span class="n">il</span><span class="p">.</span><span class="n">TrackId</span> <span class="o">=</span> <span class="n">t</span><span class="p">.</span><span class="n">TrackId</span>
    <span class="k">JOIN</span> <span class="n">Album</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">AlbumId</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">AlbumId</span>
<span class="k">WHERE</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">Title</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">╔═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ PLAN                                                                                                                                                                                                                                                                                      ║
╠═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ Project(INVOICEID=[$0], LINEITEMCOUNT=[$3], INVOICETOTAL=[$4], TRACKNAME=[$1], ALBUMTITLE=[$2]): rowcount = 4484471.100479999, cumulative cost = IgniteCost [rowCount=2.3054813220479995E7, cpu=2.3643376967575923E7, memory=9.866772781055996E7, io=2.0, network=50190.0], id = 23843    ║
║   ColocatedHashAggregate(group=[{0, 1, 2}], LINEITEMCOUNT=[COUNT()], INVOICETOTAL=[SUM($3)]): rowcount = 4484471.100479999, cumulative cost = IgniteCost [rowCount=1.8570341119999997E7, cpu=1.9158904867095925E7, memory=9.866772681055996E7, io=1.0, network=50189.0], id = 23842       ║
║     Project(INVOICEID=[$3], TRACKNAME=[$1], ALBUMTITLE=[$8], $f4=[*($5, $6)]): rowcount = 9189489.959999999, cumulative cost = IgniteCost [rowCount=9380851.159999998, cpu=9969414.907095924, memory=9362.6, io=1.0, network=50189.0], id = 23841                                         ║
║       MergeJoin(condition=[=($2, $7)], joinType=[inner], leftCollation=[[2]], rightCollation=[[0]]): rowcount = 9189489.959999999, cumulative cost = IgniteCost [rowCount=191360.19999999998, cpu=779923.9470959246, memory=9361.6, io=0.0, network=50188.0], id = 23840                  ║
║         HashJoin(condition=[=($4, $0)], joinType=[inner]): rowcount = 176551.19999999998, cumulative cost = IgniteCost [rowCount=13421.0, cpu=65201.0, memory=6585.6, io=0.0, network=47412.0], id = 23836                                                                                ║
║           Exchange(distribution=[single]): rowcount = 3503.0, cumulative cost = IgniteCost [rowCount=7006.0, cpu=17515.0, memory=0.0, io=0.0, network=42036.0], id = 23833                                                                                                                ║
║             IndexScan(table=[[PUBLIC, TRACK]], tableId=[26], index=[IDX_TRACK_ALBUMID_NAME], type=[SORTED], requiredColumns=[{0, 1, 2}], collation=[[2, 1]]): rowcount = 3503.0, cumulative cost = IgniteCost [rowCount=3503.0, cpu=14012.0, memory=0.0, io=0.0, network=0.0], id = 23832 ║
║           Exchange(distribution=[single]): rowcount = 336.0, cumulative cost = IgniteCost [rowCount=2576.0, cpu=9296.0, memory=0.0, io=0.0, network=5376.0], id = 23835                                                                                                                   ║
║             TableScan(table=[[PUBLIC, INVOICELINE]], tableId=[34], filters=[=($t0, 1)], requiredColumns=[{1, 2, 3, 4}]): rowcount = 336.0, cumulative cost = IgniteCost [rowCount=2240.0, cpu=8960.0, memory=0.0, io=0.0, network=0.0], id = 23834                                        ║
║         Exchange(distribution=[single]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=1041.0, cpu=7130.147095924681, memory=2776.0, io=0.0, network=2776.0], id = 23839                                                                                                       ║
║           Sort(sort0=[$0], dir0=[ASC]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=694.0, cpu=6783.147095924681, memory=2776.0, io=0.0, network=0.0], id = 23838                                                                                                            ║
║             TableScan(table=[[PUBLIC, ALBUM]], tableId=[20], requiredColumns=[{0, 1}]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=347.0, cpu=347.0, memory=0.0, io=0.0, network=0.0], id = 23837                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="key-observations-in-the-execution-plan">Key Observations in the Execution Plan</h4>
<div class="paragraph">
<p><strong>ColocatedHashAggregate Operation</strong>: The plan uses a <code>ColocatedHashAggregate</code> operation, which indicates Ignite recognizes that portions of the aggregation can happen on colocated data before results are combined. This reduces network transfer during the <code>GROUP BY</code> operation.</p>
</div>
<div class="paragraph">
<p><strong>Exchange Operations</strong>: Several <code>Exchange(distribution=[single])</code> operations appear in the plan, indicating data movement between nodes is still necessary. These operations are applied to the Album table, Track table, and InvoiceLine filtered results.</p>
</div>
<div class="paragraph">
<p><strong>Join Implementation</strong>: The plan shows a combination of <code>HashJoin</code> and <code>MergeJoin</code> operations rather than nested loop joins. The optimizer has determined these join types are more efficient for the data volumes involved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HashJoin for joining Track with Album</p>
</li>
<li>
<p>MergeJoin for joining the above result with InvoiceLine</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Efficient Data Access</strong>: The query uses an <code>IndexScan</code> with the <code>IDX_INVOICELINE_INVOICE_TRACK</code> index rather than a full table scan on InvoiceLine. This provides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Efficient filtering with <code>searchBounds: [ExactBounds [bound=1], null]</code> for InvoiceId = 1</p>
</li>
<li>
<p>Pre-sorted results with <code>collation: [INVOICEID ASC, TRACKID ASC]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Row Count Estimation</strong>: There appears to be a significant increase in estimated row counts after joins:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initial InvoiceLine filtered rows: 746</p>
</li>
<li>
<p>After HashJoin with Album: 182,331</p>
</li>
<li>
<p>After MergeJoin with Track: 20,400,668</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="improved-cololocation-strategy">Improved Cololocation Strategy</h3>
<div class="paragraph">
<p>However, if we create the <code>InvoiceLine</code> table to be colocated by <code>TrackId</code>, we dramaticly optimize our query.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="c1">--This table was already created on an earlier step.</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">InvoiceLine</span> <span class="p">(</span>
    <span class="n">InvoiceLineId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">InvoiceId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">TrackId</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">UnitPrice</span> <span class="nb">NUMERIC</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">Quantity</span> <span class="nb">INT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">InvoiceLineId</span><span class="p">,</span> <span class="n">TrackId</span><span class="p">)</span>
<span class="p">)</span> <span class="n">COLOCATE</span> <span class="k">BY</span> <span class="p">(</span><span class="n">TrackId</span><span class="p">)</span> <span class="k">ZONE</span> <span class="n">Chinook</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And run <code>EXPLAIN PLAN FOR</code> again&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="k">EXPLAIN</span> <span class="n">PLAN</span> <span class="k">FOR</span>
<span class="k">SELECT</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="n">il</span><span class="p">.</span><span class="n">InvoiceLineId</span><span class="p">)</span> <span class="k">AS</span> <span class="n">LineItemCount</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">il</span><span class="p">.</span><span class="n">UnitPrice</span> <span class="o">*</span> <span class="n">il</span><span class="p">.</span><span class="n">Quantity</span><span class="p">)</span> <span class="k">AS</span> <span class="n">InvoiceTotal</span><span class="p">,</span>
    <span class="n">t</span><span class="p">.</span><span class="n">Name</span> <span class="k">AS</span> <span class="n">TrackName</span><span class="p">,</span>
    <span class="n">a</span><span class="p">.</span><span class="n">Title</span> <span class="k">AS</span> <span class="n">AlbumTitle</span>
<span class="k">FROM</span>
    <span class="n">Track</span> <span class="n">t</span>
    <span class="k">JOIN</span> <span class="n">Album</span> <span class="n">a</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">AlbumId</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">AlbumId</span>
    <span class="k">JOIN</span> <span class="n">InvoiceLine</span> <span class="n">il</span> <span class="k">ON</span> <span class="n">t</span><span class="p">.</span><span class="n">TrackId</span> <span class="o">=</span> <span class="n">il</span><span class="p">.</span><span class="n">TrackId</span>
<span class="k">WHERE</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">GROUP</span> <span class="k">BY</span>
    <span class="n">il</span><span class="p">.</span><span class="n">InvoiceId</span><span class="p">,</span> <span class="n">t</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">Title</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="text">╔════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ PLAN                                                                                                                                                                                                                                                                                       ║
╠════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║ Project(INVOICEID=[$0], LINEITEMCOUNT=[$3], INVOICETOTAL=[$4], TRACKNAME=[$1], ALBUMTITLE=[$2]): rowcount = 2.0019960269999995E9, cumulative cost = IgniteCost [rowCount=1.020839200715E10, cpu=1.0214411135647097E10, memory=4.404685537199999E10, io=2.0, network=2444814.0], id = 25112 ║
║   ColocatedHashAggregate(group=[{0, 1, 2}], LINEITEMCOUNT=[COUNT()], INVOICETOTAL=[SUM($3)]): rowcount = 2.0019960269999995E9, cumulative cost = IgniteCost [rowCount=8.20639597915E9, cpu=8.212415107647097E9, memory=4.404685537099999E10, io=1.0, network=2444813.0], id = 25111        ║
║     Project(INVOICEID=[$5], TRACKNAME=[$1], ALBUMTITLE=[$4], $f4=[*($7, $8)]): rowcount = 4.102450875E9, cumulative cost = IgniteCost [rowCount=4.10394510415E9, cpu=4.109964232647096E9, memory=2942777.0, io=1.0, network=2444813.0], id = 25110                                         ║
║       HashJoin(condition=[=($0, $6)], joinType=[inner]): rowcount = 4.102450875E9, cumulative cost = IgniteCost [rowCount=1494228.15, cpu=7513356.647095924, memory=2942776.0, io=0.0, network=2444812.0], id = 25109                                                                      ║
║         MergeJoin(condition=[=($2, $3)], joinType=[inner], leftCollation=[[2, 1]], rightCollation=[[0]]): rowcount = 182331.15, cumulative cost = IgniteCost [rowCount=11897.0, cpu=40045.14709592468, memory=2776.0, io=0.0, network=44812.0], id = 25106                                 ║
║           Exchange(distribution=[single]): rowcount = 3503.0, cumulative cost = IgniteCost [rowCount=7006.0, cpu=17515.0, memory=0.0, io=0.0, network=42036.0], id = 25102                                                                                                                 ║
║             IndexScan(table=[[PUBLIC, TRACK]], tableId=[26], index=[IDX_TRACK_ALBUMID_NAME], type=[SORTED], requiredColumns=[{0, 1, 2}], collation=[[2, 1]]): rowcount = 3503.0, cumulative cost = IgniteCost [rowCount=3503.0, cpu=14012.0, memory=0.0, io=0.0, network=0.0], id = 25101  ║
║           Exchange(distribution=[single]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=1041.0, cpu=7130.147095924681, memory=2776.0, io=0.0, network=2776.0], id = 25105                                                                                                      ║
║             Sort(sort0=[$0], dir0=[ASC]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=694.0, cpu=6783.147095924681, memory=2776.0, io=0.0, network=0.0], id = 25104                                                                                                           ║
║               TableScan(table=[[PUBLIC, ALBUM]], tableId=[20], requiredColumns=[{0, 1}]): rowcount = 347.0, cumulative cost = IgniteCost [rowCount=347.0, cpu=347.0, memory=0.0, io=0.0, network=0.0], id = 25103                                                                          ║
║         Exchange(distribution=[single]): rowcount = 150000.0, cumulative cost = IgniteCost [rowCount=1150000.0, cpu=4150000.0, memory=0.0, io=0.0, network=2400000.0], id = 25108                                                                                                          ║
║           TableScan(table=[[PUBLIC, INVOICELINE]], tableId=[46], filters=[=($t0, 1)], requiredColumns=[{1, 2, 3, 4}]): rowcount = 150000.0, cumulative cost = IgniteCost [rowCount=1000000.0, cpu=4000000.0, memory=0.0, io=0.0, network=0.0], id = 25107                                  ║
╚════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="key-observations-in-the-execution-plan-2">Key Observations in the Execution Plan</h4>
<div class="paragraph">
<p><strong>ColocatedHashAggregate Operation</strong>: The plan uses a <code>ColocatedHashAggregate</code> operation, which indicates Ignite recognizes that portions of the aggregation can happen on colocated data before results are combined. This reduces network transfer during the <code>GROUP BY</code> operation.</p>
</div>
<div class="paragraph">
<p><strong>Improved Row Count Estimates</strong>: Notice the dramatic improvement in row count estimates, which now show just 1 row at each step. This indicates the optimizer has much better statistics and understanding of the actual data distribution compared to the original plan that estimated millions of rows.</p>
</div>
<div class="paragraph">
<p><strong>Join Implementation</strong>: The plan shows a combination of <code>HashJoin</code> and <code>MergeJoin</code> operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HashJoin for joining Track with InvoiceLine</p>
</li>
<li>
<p>MergeJoin for joining the above result with Album</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Efficient Index Usage</strong>: The query now uses the composite index <code>IDX_TRACK_ALBUMID_NAME</code> on the Track table, providing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Efficient sorted access by AlbumId and Name</p>
</li>
<li>
<p>Direct access to the fields needed for the join and select operations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Exchange Operations</strong>: While Exchange operations still appear in the plan, the estimated row counts are now minimal (just 1 row per exchange). This suggests much less data movement between nodes compared to the original plan where millions of rows were estimated to be transferred.</p>
</div>
</div>
<div class="sect3">
<h4 id="colocation-impact">Colocation Impact</h4>
<div class="paragraph">
<p>The substantial improvement in this execution plan demonstrates the power of proper data colocation in Ignite. By:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Structuring the query to join the tables in the optimal order (Track → Album → InvoiceLine)</p>
</li>
<li>
<p>Creating appropriate supporting indexes</p>
</li>
<li>
<p>Ensuring proper colocation between related tables</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We&#8217;ve achieved a dramatic reduction in estimated row counts and data movement. The execution plan now shows streamlined operations with minimal row estimates at each step, indicating an efficient execution path that takes advantage of data locality.</p>
</div>
<div class="paragraph">
<p>This optimization approach highlights three key principles for optimal performance in distributed SQL databases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Proper colocation of related data</p>
</li>
<li>
<p>Supporting indexes aligned with join patterns</p>
</li>
<li>
<p>Query structure that follows the colocation model</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cleaning-up">Cleaning Up</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you are finished with the Ignite SQL CLI, you can exit by typing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="sql"><span class="n">exit</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return you to the Ignite CLI. To exit the Ignite CLI, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">exit</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To stop the Ignite cluster, run the following command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">docker compose down</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will stop and remove the Docker containers for your Ignite cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="best-practices-for-ignite-sql">Best Practices for Ignite SQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To get the most out of Ignite SQL, follow these best practices:</p>
</div>
<div class="sect2">
<h3 id="schema-design">Schema Design</h3>
<div class="ulist">
<ul>
<li>
<p>Use appropriate colocation for tables that are frequently joined;</p>
</li>
<li>
<p>Choose primary keys that distribute data evenly across the cluster;</p>
</li>
<li>
<p>Design with query patterns in mind, especially for large-scale deployments.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="query-optimization">Query Optimization</h3>
<div class="ulist">
<ul>
<li>
<p>Create indexes for columns used in <code>WHERE</code>, <code>JOIN</code>, and <code>ORDER BY</code> clauses;</p>
</li>
<li>
<p>Use the <code>EXPLAIN</code> statement to analyze and optimize your queries;</p>
</li>
<li>
<p>Avoid cartesian products and inefficient join conditions.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="transaction-management">Transaction Management</h3>
<div class="ulist">
<ul>
<li>
<p>Keep transactions as short as possible;</p>
</li>
<li>
<p>Do not hold transactions open during user think time;</p>
</li>
<li>
<p>Group related operations into a single transaction for atomicity.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="resource-management">Resource Management</h3>
<div class="ulist">
<ul>
<li>
<p>Monitor query performance in production;</p>
</li>
<li>
<p>Consider partitioning strategies for very large tables;</p>
</li>
<li>
<p>Use appropriate data types to minimize storage requirements.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whats-next">What&#8217;s Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ignite&#8217;s SQL capabilities make it a powerful platform for building distributed applications that require high throughput, low latency, and strong consistency. By following the patterns and practices in this guide, you can leverage Ignite SQL to build scalable, resilient systems.</p>
</div>
<div class="paragraph">
<p>Remember that Ignite is not just a SQL database—it&#8217;s a comprehensive distributed computing platform with capabilities beyond what we&#8217;ve covered here. As you become more comfortable with Ignite SQL, you may want to explore other features such as compute grid, machine learning, and stream processing.</p>
</div>
<div class="paragraph">
<p>Happy querying!</p>
</div>
</div>
</div>
        <div class="copyright">
 © 2025 The Apache Software Foundation.<br/>
Apache, Apache Ignite, the Apache feather and the Apache Ignite logo are either registered trademarks or trademarks of The Apache Software Foundation. 

</div>

    </article>
    <nav class="right-nav" data-swiftype-index='false'>
    <div class="toc-wrapper">
    <ul class="sectlevel1">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#before-starting">Before Starting</a></li>
<li><a href="#setting-up-a-ignite-3-cluster">Setting Up a Ignite 3 Cluster</a>
<ul class="sectlevel2">
<li><a href="#starting-the-cluster">Starting the Cluster</a></li>
</ul>
</li>
<li><a href="#connecting-to-the-cluster-using-ignite-cli">Connecting to the Cluster Using Ignite CLI</a>
<ul class="sectlevel2">
<li><a href="#starting-the-cli">Starting the CLI</a></li>
<li><a href="#initializing-the-cluster">Initializing the Cluster</a></li>
</ul>
</li>
<li><a href="#creating-the-chinook-database-schema">Creating the Chinook Database Schema</a>
<ul class="sectlevel2">
<li><a href="#entering-sql-mode">Entering SQL Mode</a></li>
<li><a href="#creating-distribution-zones">Creating Distribution Zones</a></li>
<li><a href="#database-entity-relationship">Database Entity Relationship</a></li>
<li><a href="#creating-core-tables">Creating Core Tables</a></li>
<li><a href="#verifying-table-creation">Verifying Table Creation</a></li>
</ul>
</li>
<li><a href="#inserting-sample-data">Inserting Sample Data</a>
<ul class="sectlevel2">
<li><a href="#adding-artists-and-albums">Adding Artists and Albums</a></li>
<li><a href="#adding-genres-and-media-types">Adding Genres and Media Types</a></li>
<li><a href="#adding-tracks">Adding Tracks</a></li>
<li><a href="#adding-employees-and-customers">Adding Employees and Customers</a></li>
<li><a href="#adding-invoices-and-invoice-lines">Adding Invoices and Invoice Lines</a></li>
</ul>
</li>
<li><a href="#querying-data-in-ignite-sql">Querying Data in Ignite SQL</a>
<ul class="sectlevel2">
<li><a href="#basic-queries">Basic Queries</a></li>
<li><a href="#joins">Joins</a></li>
</ul>
</li>
<li><a href="#data-manipulation-in-ignite-sql">Data Manipulation in Ignite SQL</a>
<ul class="sectlevel2">
<li><a href="#understanding-distributed-updates">Understanding Distributed Updates</a></li>
<li><a href="#inserting-new-data">Inserting New Data</a></li>
<li><a href="#updating-existing-data">Updating Existing Data</a></li>
<li><a href="#deleting-data">Deleting Data</a></li>
</ul>
</li>
<li><a href="#advanced-sql-features">Advanced SQL Features</a>
<ul class="sectlevel2">
<li><a href="#querying-system-views">Querying System Views</a></li>
<li><a href="#creating-indexes-for-better-performance">Creating Indexes for Better Performance</a></li>
</ul>
</li>
<li><a href="#creating-a-dashboard-using-sql">Creating a Dashboard Using SQL</a>
<ul class="sectlevel2">
<li><a href="#monthly-sales-summary">Monthly Sales Summary</a></li>
<li><a href="#top-selling-genres">Top Selling Genres</a></li>
<li><a href="#sales-performance-by-employee">Sales Performance by Employee</a></li>
<li><a href="#top-20-longest-tracks-with-genres">Top 20 Longest Tracks with Genres</a></li>
<li><a href="#customer-purchase-patterns-by-month">Customer Purchase Patterns by Month</a></li>
</ul>
</li>
<li><a href="#performance-tuning-with-colocated-tables">Performance Tuning with Colocated Tables</a>
<ul class="sectlevel2">
<li><a href="#colocated-queries">Colocated Queries</a>
<ul class="sectlevel3">
<li><a href="#key-observations-in-the-execution-plan">Key Observations in the Execution Plan</a></li>
</ul>
</li>
<li><a href="#improved-cololocation-strategy">Improved Cololocation Strategy</a>
<ul class="sectlevel3">
<li><a href="#key-observations-in-the-execution-plan-2">Key Observations in the Execution Plan</a></li>
<li><a href="#colocation-impact">Colocation Impact</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#cleaning-up">Cleaning Up</a></li>
<li><a href="#best-practices-for-ignite-sql">Best Practices for Ignite SQL</a>
<ul class="sectlevel2">
<li><a href="#schema-design">Schema Design</a></li>
<li><a href="#query-optimization">Query Optimization</a></li>
<li><a href="#transaction-management">Transaction Management</a></li>
<li><a href="#resource-management">Resource Management</a></li>
</ul>
</li>
<li><a href="#whats-next">What&#8217;s Next</a></li>
</ul>
    </div>
          
      
      <nav class="promo-nav">
            <!--#include virtual="/includes/docs_rightnav_promotion.html" -->
            <!--a href="#" data-trigger-bugyard-feedback="true" id="doc-feedback-btn">Docs Feedback</a-->
        </nav>
        
</nav>
    
</section>
<script type='module' src='/assets/js/code-copy-to-clipboard.js' async crossorigin></script>

    <script>
    // inits deep anchors -- needs to be done here because of https://www.bryanbraun.com/anchorjs/#dont-run-it-too-late 
    anchors.add('.page-docs h1, .page-docs h2, .page-docs h3:not(.discrete), .page-docs h4, .page-docs h5');
    anchors.options = {
        placement: 'right',
        visible: 'always'
    };
    </script>

<script type='module' src='/assets/js/index.js?1756307754' async crossorigin></script>
<script type='module' src='/assets/js/versioning.js?1756307754' async crossorigin></script>
<script type='module' src='/assets/js/railroad-diagram.js?1756307754' async></script>
<script type='module' src='/assets/js/search.js?1756307754' defer crossorigin></script>

<link rel="stylesheet" href="/assets/css/styles.css?1756307754" media="print" onload="this.media='all'">
<noscript><link media="all" rel="stylesheet" href="/assets/css/styles.css?1756307754"></noscript>

<link rel="stylesheet" href="/assets/css/docsearch.min.css" media="print" onload="this.media='all'">
<noscript><link media="all" rel="stylesheet" href="/assets/css/docsearch.min.css"></noscript>

  
</body>

</html>

<!DOCTYPE html>

      
      
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-61232409-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-61232409-1');
    </script>

    

    <meta charset="UTF-8">
    <meta name="ignite-version" content="2.9.0" />
    <title>Querying and Modifying Data | Ignite Documentation</title>
    
    <link rel="canonical" href="/docs/2.9.0/SQL/ODBC/querying-modifying-data" />
    
	
	<link rel="stylesheet" href="/assets/css/styles.css?1598500265">
    <link rel="stylesheet" href="/assets/css/asciidoc-pygments.css">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name='viewport' content='width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0'>

	<script type="text/javascript" src="/assets/js/anchor.min.js?1598500265"></script>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
  />

</head>
<body>
    <header>
    <div class="container">
        <button type='button' class='menu' title='Docs menu'>
        <img src="/assets/images/menu-icon.svg"/>
        </button>
        <div class='home'>
            <a href="/" class='home' title='Apache Ignite home'>
                <img src="/assets/images/apache_ignite_logo.svg" alt="Apache Ignite logo" width="103" >
            </a>
        </div>
        
        <nav>
            
        </nav>
        
        <select id="version-selector">
            <option value="2.9.0">2.9.0</option>
        </select>
        
        <a href="https://github.com/ignite" title='GitHub' class='github' target="_blank">
            <img src="/assets/images/github-gray.svg" alt="GitHub logo">
        </a>
        
        <form class='search'>
            <button class="search-close" type='button'><img src='/assets/images/cancel.svg'></button>
            <input type="search" placeholder="Search…" id="search-input">
        </form>
        <button type='button' class='search-toggle'><img src='/assets/images/search.svg'></button>
        <button type='button' class='top-nav-toggle'>⋮</button>

        
        
    </div>
</header>


    	 <link rel="stylesheet" href="/assets/css/docs.css">
<section class='page-docs'>
    



<nav class='left-nav' data-swiftype-index='false'>

      
        <li>
            

            <a href="/docs/2.9.0//preface" class='' >Preface</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Quick Start Guides<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/java"

                                class=''
                            >Java</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/dotnet"

                                class=''
                            >.NET/C#</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/cpp"

                                class=''
                            >C++</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/python"

                                class=''
                            >Python</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/nodejs"

                                class=''
                            >Node.JS</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/sql"

                                class=''
                            >SQL</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/php"

                                class=''
                            >PHP</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//quick-start/restapi"

                                class=''
                            >REST API</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="/installation" class='group-toggle collapsed '>Installation<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//installation/installing-using-zip"

                                class=''
                            >Installing Using ZIP Archive</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//installation/installing-using-docker"

                                class=''
                            >Installing Using Docker</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//installation/deb-rpm"

                                class=''
                            >Installing DEB or RPM package</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Kubernetes<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
                            <nav class="sub_pages collapsed">

                            
                                  

								  <li><a href="/docs/2.9.0//installation/kubernetes/amazon-eks-deployment" class=''>Amazon EKS</a></li>
                            
                                  

								  <li><a href="/docs/2.9.0//installation/kubernetes/azure-deployment" class=''>Azure Kubernetes Service</a></li>
                            
                                  

								  <li><a href="/docs/2.9.0//installation/kubernetes/gke-deployment" class=''>Google Kubernetes Engine</a></li>
                            
                            </nav>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Setting Up<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//setup"

                                class=''
                            >Setting Up Ignite for Java</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//setup-dotnet"

                                class=''
                            >Setting Up Ignite for .NET/C#</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//understanding-configuration" class='' >Understanding Configuration</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//logging" class='' >Configuring Logging</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//starting-nodes" class='' >Starting and Stopping Nodes</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Clustering<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/clustering"

                                class=''
                            >Overview</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/tcp-ip-discovery"

                                class=''
                            >TCP/IP Discovery</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/zookeeper-discovery"

                                class=''
                            >ZooKeeper Discovery</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/discovery-in-the-cloud"

                                class=''
                            >Discovery in the Cloud</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/network-configuration"

                                class=''
                            >Network Configuration</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/connect-client-nodes"

                                class=''
                            >Connecting Client Nodes</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//clustering/running-client-nodes-behind-nat"

                                class=''
                            >Running Client Nodes Behind NAT</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Data Modeling<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//data-modeling/data-modeling"

                                class=''
                            >Introduction</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//data-modeling/data-partitioning"

                                class=''
                            >Data Partitioning</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//data-modeling/affinity-collocation"

                                class=''
                            >Affinity Colocation</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Configuring Memory<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//memory-architecture"

                                class=''
                            >Memory Architecture</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//memory-configuration/data-regions"

                                class=''
                            >Configuring Data Regions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//memory-configuration/eviction-policies"

                                class=''
                            >Eviction Policies</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Configuring Caches<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/configuration-overview"

                                class=''
                            >Cache Configuration</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/configuring-backups"

                                class=''
                            >Configuring Partition Backups</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/atomicity-modes"

                                class=''
                            >Atomicity Modes</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/expiry-policies"

                                class=''
                            >Expiry Policy</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/on-heap-caching"

                                class=''
                            >On-Heap Caching</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//configuring-caches/cache-groups"

                                class=''
                            >Cache Groups</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Persistence<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/native-persistence"

                                class=''
                            >Ignite Persistence</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/external-storage"

                                class=''
                            >External Storage</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/swap"

                                class=''
                            >Swapping</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/custom-cache-store"

                                class=''
                            >Implementing Custom Cache Store</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/disk-compression"

                                class=''
                            >Disk Compression</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//persistence/persistence-tuning"

                                class=''
                            >Tuning Persistence</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//baseline-topology" class='' >Baseline Topology</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//cluster-states" class='' >Cluster States</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//data-rebalancing" class='' >Data Rebalancing</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//partition-loss-policy" class='' >Partition Loss Policy</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//peer-class-loading" class='' >Peer Class Loading</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//data-streaming" class='' >Data Streaming</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Using Key-Value Cache API<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//key-value-api/basic-cache-operations"

                                class=''
                            >Basic Cache Operations</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//key-value-api/binary-objects"

                                class=''
                            >Working with Binary Objects</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//key-value-api/using-scan-queries"

                                class=''
                            >Using Scan Queries</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//key-value-api/continuous-queries" class='' >Using Continuous Queries</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//key-value-api/transactions" class='' >Performing Transactions</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Working with SQL<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/sql-introduction"

                                class=''
                            >Introduction</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/schemas"

                                class=''
                            >Understanding Schemas</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/indexes"

                                class=''
                            >Defining Indexes</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/sql-api"

                                class=''
                            >Using SQL API</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/distributed-joins"

                                class=''
                            >Distributed Joins</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/sql-transactions"

                                class=''
                            >SQL Transactions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/custom-sql-func"

                                class=''
                            >Custom SQL Functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/JDBC/jdbc-driver"

                                class=''
                            >JDBC Driver</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/JDBC/jdbc-client-driver"

                                class=''
                            >JDBC Client Driver</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//transactions/mvcc"

                                class=''
                            >Multiversion Concurrency Control</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Distributed Computing<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/distributed-computing"

                                class=''
                            >Distributed Computing API</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/cluster-groups"

                                class=''
                            >Cluster Groups</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/executor-service"

                                class=''
                            >Executor Service</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/map-reduce"

                                class=''
                            >MapReduce API</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/load-balancing"

                                class=''
                            >Load Balancing</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/fault-tolerance"

                                class=''
                            >Fault Tolerance</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//distributed-computing/job-scheduling"

                                class=''
                            >Job Scheduling</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//collocated-computations" class='' >Colocating Computations with Data</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Working with Events<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//events/listening-to-events"

                                class=''
                            >Enabling and Listenting to Events</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//events/events"

                                class=''
                            >Events</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//near-cache" class='' >Near Caches</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Monitoring<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//monitoring-metrics/intro"

                                class=''
                            >Introduction</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//monitoring-metrics/cluster-id"

                                class=''
                            >Cluster ID and Tag</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Metrics<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
                            <nav class="sub_pages collapsed">

                            
                                  

								  <li><a href="/docs/2.9.0//monitoring-metrics/configuring-metrics" class=''>Configuring Metrics</a></li>
                            
                                  

								  <li><a href="/docs/2.9.0//monitoring-metrics/metrics" class=''>JMX Metrics</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>New Metrics System<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
                            <nav class="sub_pages collapsed">

                            
                                  

								  <li><a href="/docs/2.9.0//monitoring-metrics/new-metrics-system" class=''>Introduction</a></li>
                            
                                  

								  <li><a href="/docs/2.9.0//monitoring-metrics/new-metrics" class=''>Metrics</a></li>
                            
                            </nav>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//monitoring-metrics/system-views"

                                class=''
                            >System Views</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//monitoring-metrics/tracing"

                                class=''
                            >Tracing</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="/security" class='group-toggle collapsed '>Security<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//security/authentication"

                                class=''
                            >Authentication</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//security/ssl-tls"

                                class=''
                            >SSL/TLS</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            
                            
                            <button
                                type='button'
                                class='collapsed '>Transparent Data Encryption<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
                            <nav class="sub_pages collapsed">

                            
                                  

								  <li><a href="/docs/2.9.0//security/tde" class=''>Introduction</a></li>
                            
                                  

								  <li><a href="/docs/2.9.0//security/master-key-rotation" class=''>Master key rotation</a></li>
                            
                            </nav>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>Thin Clients<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/getting-started-with-thin-clients"

                                class=''
                            >Thin Clients Overview</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/java-thin-client"

                                class=''
                            >Java Thin Client</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/dotnet-thin-client"

                                class=''
                            >.NET Thin Client</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/cpp-thin-client"

                                class=''
                            >C++ Thin Client</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/python-thin-client"

                                class=''
                            >Python Thin Client</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/php-thin-client"

                                class=''
                            >PHP Thin Client</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//thin-clients/nodejs-thin-client"

                                class=''
                            >Node.js Thin Client</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="" class='group-toggle collapsed '>ODBC Driver<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/odbc-driver"

                                class=''
                            >ODBC Driver</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/connection-string-dsn"

                                class=''
                            >Connection String and DSN</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/querying-modifying-data"

                                class=''
                            >Querying and Modifying Data</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/specification"

                                class=''
                            >Specification</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/data-types"

                                class=''
                            >Data Types</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//SQL/ODBC/error-codes"

                                class=''
                            >Error Codes</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//restapi" class='' >REST API</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//control-script" class='' >Control Script</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//plugins" class='' >Plugins</a>
            
        </li>
    
        <li>
            

            <a href="/docs/2.9.0//sqlline" class='' >SQLLine</a>
            
        </li>
    
        <li>
            

            

            

			<button type='button' data-guide-url="/sql-reference/sql-reference-overview" class='group-toggle collapsed '>SQL Reference<img class="state-indicator" src="/assets/images/left-nav-arrow.svg"></button>
             <nav class='nav-group collapsed'>
            
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/ddl"

                                class=''
                            >Data Definition Language (DDL)</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/dml"

                                class=''
                            >Data Manipulation Language (DML)</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/transactions"

                                class=''
                            >Transactions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/operational-commands"

                                class=''
                            >Operational Commands</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/aggregate-functions"

                                class=''
                            >Aggregate functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/numeric-functions"

                                class=''
                            >Numeric Functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/string-functions"

                                class=''
                            >String Functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/date-time-functions"

                                class=''
                            >Data and Time Functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/system-functions"

                                class=''
                            >System Functions</a>
                        
                    </li>
                

                    
                    

                    <li> 
                        
                            <a href="/docs/2.9.0//sql-reference/data-types"

                                class=''
                            >Data Types</a>
                        
                    </li>
                
              
                     
             </nav>   
            
        </li>
    
</nav>
<div class="left-nav__overlay"></div>


    <article data-swiftype-index='true'>
        
            <h1>Querying and Modifying Data</h1>
        
        <div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This page elaborates on how to connect to a cluster and execute a variety of SQL queries using the ODBC driver.</p>
</div>
<div class="paragraph">
<p>At the implementation layer, the ODBC driver uses SQL Fields queries to retrieve data from the cluster.
This means that from ODBC side you can access only those fields that are <a href="/docs/2.9.0/SQL/sql-api#configuring-queryable-fields">defined in the cluster configuration</a>.</p>
</div>
<div class="paragraph">
<p>Moreover, the ODBC driver supports DML (Data Modification Layer), which means that you can modify your data using an ODBC connection.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Refer to the <a href="https://github.com/apache/ignite/tree/master/modules/platforms/cpp/examples/odbc-example">ODBC example</a> that incorporates complete logic and exemplary queries described below.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-cluster">Configuring the Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As the first step, you need to set up a configuration that will be used by the cluster nodes.
The configuration should include caches configurations as well with properly defined <code>QueryEntities</code> properties.
<code>QueryEntities</code> are essential for the cases when your application (or the ODBC driver in our scenario) is going to query and modify the data using SQL statements.
Alternatively you can create tables using DDL.</p>
</div>
<code-tabs><code-tab data-tab='DDL'><div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="cpp"><span class="n">SQLHENV</span> <span class="n">env</span><span class="p">;</span>

<span class="c1">// Allocate an environment handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_ENV</span><span class="p">,</span> <span class="n">SQL_NULL_HANDLE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">env</span><span class="p">);</span>

<span class="c1">// Use ODBC ver 3</span>
<span class="n">SQLSetEnvAttr</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">SQL_ATTR_ODBC_VERSION</span><span class="p">,</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">SQL_OV_ODBC3</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">SQLHDBC</span> <span class="n">dbc</span><span class="p">;</span>

<span class="c1">// Allocate a connection handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_DBC</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dbc</span><span class="p">);</span>

<span class="c1">// Prepare the connection string</span>
<span class="n">SQLCHAR</span> <span class="n">connectStr</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"DSN=My Ignite DSN"</span><span class="p">;</span>

<span class="c1">// Connecting to the Cluster.</span>
<span class="n">SQLDriverConnect</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">connectStr</span><span class="p">,</span> <span class="n">SQL_NTS</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SQL_DRIVER_COMPLETE</span><span class="p">);</span>

<span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

<span class="c1">// Allocate a statement handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query1</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"CREATE TABLE Person ( "</span>
    <span class="s">"id LONG PRIMARY KEY, "</span>
    <span class="s">"firstName VARCHAR, "</span>
    <span class="s">"lastName VARCHAR, "</span>
    <span class="s">"salary FLOAT) "</span>
    <span class="s">"WITH </span><span class="se">\"</span><span class="s">template=partitioned</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>

<span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query1</span><span class="p">,</span> <span class="n">SQL_NTS</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query2</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"CREATE TABLE Organization ( "</span>
    <span class="s">"id LONG PRIMARY KEY, "</span>
    <span class="s">"name VARCHAR) "</span>
    <span class="s">"WITH </span><span class="se">\"</span><span class="s">template=partitioned</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>

<span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query2</span><span class="p">,</span> <span class="n">SQL_NTS</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query3</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"CREATE INDEX idx_organization_name ON Organization (name)"</span><span class="p">;</span>

<span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query3</span><span class="p">,</span> <span class="n">SQL_NTS</span><span class="p">);</span></code></pre>
</div>
</div></code-tab><code-tab data-tab='Spring XML'><div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.IgniteConfiguration"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"cacheConfiguration"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.CacheConfiguration"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Person"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"cacheMode"</span> <span class="na">value=</span><span class="s">"PARTITIONED"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"atomicityMode"</span> <span class="na">value=</span><span class="s">"TRANSACTIONAL"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"writeSynchronizationMode"</span> <span class="na">value=</span><span class="s">"FULL_SYNC"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"queryEntities"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;list&gt;</span>
                        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.cache.QueryEntity"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"keyType"</span> <span class="na">value=</span><span class="s">"java.lang.Long"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"keyFieldName"</span> <span class="na">value=</span><span class="s">"id"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"valueType"</span> <span class="na">value=</span><span class="s">"Person"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fields"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;map&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"id"</span> <span class="na">value=</span><span class="s">"java.lang.Long"</span><span class="nt">/&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"firstName"</span> <span class="na">value=</span><span class="s">"java.lang.String"</span><span class="nt">/&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"lastName"</span> <span class="na">value=</span><span class="s">"java.lang.String"</span><span class="nt">/&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"salary"</span> <span class="na">value=</span><span class="s">"java.lang.Double"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;/map&gt;</span>
                            <span class="nt">&lt;/property&gt;</span>
                        <span class="nt">&lt;/bean&gt;</span>
                    <span class="nt">&lt;/list&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.CacheConfiguration"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Organization"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"cacheMode"</span> <span class="na">value=</span><span class="s">"PARTITIONED"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"atomicityMode"</span> <span class="na">value=</span><span class="s">"TRANSACTIONAL"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"writeSynchronizationMode"</span> <span class="na">value=</span><span class="s">"FULL_SYNC"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"queryEntities"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;list&gt;</span>
                        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.cache.QueryEntity"</span><span class="nt">&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"keyType"</span> <span class="na">value=</span><span class="s">"java.lang.Long"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"keyFieldName"</span> <span class="na">value=</span><span class="s">"id"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"valueType"</span> <span class="na">value=</span><span class="s">"Organization"</span><span class="nt">/&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"fields"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;map&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"id"</span> <span class="na">value=</span><span class="s">"java.lang.Long"</span><span class="nt">/&gt;</span>
                                    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"java.lang.String"</span><span class="nt">/&gt;</span>
                                <span class="nt">&lt;/map&gt;</span>
                            <span class="nt">&lt;/property&gt;</span>
                            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"indexes"</span><span class="nt">&gt;</span>
                                <span class="nt">&lt;list&gt;</span>
                                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.cache.QueryIndex"</span><span class="nt">&gt;</span>
                                        <span class="nt">&lt;constructor-arg</span> <span class="na">value=</span><span class="s">"name"</span><span class="nt">/&gt;</span>
                                    <span class="nt">&lt;/bean&gt;</span>
                                <span class="nt">&lt;/list&gt;</span>
                            <span class="nt">&lt;/property&gt;</span>
                        <span class="nt">&lt;/bean&gt;</span>
                    <span class="nt">&lt;/list&gt;</span>
                <span class="nt">&lt;/property&gt;</span>
            <span class="nt">&lt;/bean&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span></code></pre>
</div>
</div></code-tab></code-tabs>
<div class="paragraph">
<p>As you can see, we defined two caches that will contain the data of <code>Person</code> and <code>Organization</code> types.
For both types, we listed specific fields and indexes that will be read or updated using SQL.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="connecting-to-the-cluster">Connecting to the Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the cluster is configured and started, we can connect to it from the ODBC driver side. To do this, you need to prepare a valid connection string and pass it as a parameter to the ODBC driver at the connection time. Refer to the <a href="/docs/2.9.0/SQL/ODBC/connection-string-dsn">Connection String</a> page for more details.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can also use a <a href="/docs/2.9.0/SQL/ODBC/connection-string-dsn#configuring-dsn">pre-configured DSN</a> for connection purposes as shown in the example below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">SQLHENV</span> <span class="n">env</span><span class="p">;</span>

<span class="c1">// Allocate an environment handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_ENV</span><span class="p">,</span> <span class="n">SQL_NULL_HANDLE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">env</span><span class="p">);</span>

<span class="c1">// Use ODBC ver 3</span>
<span class="n">SQLSetEnvAttr</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">SQL_ATTR_ODBC_VERSION</span><span class="p">,</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">SQL_OV_ODBC3</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">SQLHDBC</span> <span class="n">dbc</span><span class="p">;</span>

<span class="c1">// Allocate a connection handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_DBC</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dbc</span><span class="p">);</span>

<span class="c1">// Prepare the connection string</span>
<span class="n">SQLCHAR</span> <span class="n">connectStr</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"DSN=My Ignite DSN"</span><span class="p">;</span>

<span class="c1">// Connecting to Ignite Cluster.</span>
<span class="n">SQLRETURN</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">SQLDriverConnect</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">connectStr</span><span class="p">,</span> <span class="n">SQL_NTS</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">SQL_DRIVER_COMPLETE</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">SQL_SUCCEEDED</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
<span class="p">{</span>
  <span class="n">SQLCHAR</span> <span class="n">sqlstate</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
  <span class="n">SQLINTEGER</span> <span class="n">nativeCode</span><span class="p">;</span>

  <span class="n">SQLCHAR</span> <span class="n">errMsg</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
  <span class="n">SQLSMALLINT</span> <span class="n">errMsgLen</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">errMsg</span><span class="p">));</span>

  <span class="n">SQLGetDiagRec</span><span class="p">(</span><span class="n">SQL_HANDLE_DBC</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sqlstate</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nativeCode</span><span class="p">,</span> <span class="n">errMsg</span><span class="p">,</span> <span class="n">errMsgLen</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">errMsgLen</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Failed to connect to Ignite: "</span>
            <span class="o">&lt;&lt;</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">sqlstate</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span>
            <span class="o">&lt;&lt;</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">errMsg</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span>
            <span class="o">&lt;&lt;</span> <span class="s">"Native error code: "</span> <span class="o">&lt;&lt;</span> <span class="n">nativeCode</span>
            <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

  <span class="c1">// Releasing allocated handles.</span>
  <span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_DBC</span><span class="p">,</span> <span class="n">dbc</span><span class="p">);</span>
  <span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_ENV</span><span class="p">,</span> <span class="n">env</span><span class="p">);</span>

  <span class="k">return</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="querying-data">Querying Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After everything is up and running, we&#8217;re ready to execute <code>SQL SELECT</code> queries using the <code>ODBC API</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

<span class="c1">// Allocate a statement handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"SELECT firstName, lastName, salary, Organization.name FROM Person "</span>
  <span class="s">"INNER JOIN </span><span class="se">\"</span><span class="s">Organization</span><span class="se">\"</span><span class="s">.Organization ON Person.orgId = Organization.id"</span><span class="p">;</span>
<span class="n">SQLSMALLINT</span> <span class="n">queryLen</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">queryLen</span><span class="p">));</span>

<span class="n">SQLRETURN</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">queryLen</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">SQL_SUCCEEDED</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
<span class="p">{</span>
  <span class="n">SQLCHAR</span> <span class="n">sqlstate</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
  <span class="n">SQLINTEGER</span> <span class="n">nativeCode</span><span class="p">;</span>

  <span class="n">SQLCHAR</span> <span class="n">errMsg</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
  <span class="n">SQLSMALLINT</span> <span class="n">errMsgLen</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">errMsg</span><span class="p">));</span>

  <span class="n">SQLGetDiagRec</span><span class="p">(</span><span class="n">SQL_HANDLE_DBC</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sqlstate</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nativeCode</span><span class="p">,</span> <span class="n">errMsg</span><span class="p">,</span> <span class="n">errMsgLen</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">errMsgLen</span><span class="p">);</span>

  <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="s">"Failed to perfrom SQL query: "</span>
            <span class="o">&lt;&lt;</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">sqlstate</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">": "</span>
            <span class="o">&lt;&lt;</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">errMsg</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span>
            <span class="o">&lt;&lt;</span> <span class="s">"Native error code: "</span> <span class="o">&lt;&lt;</span> <span class="n">nativeCode</span>
            <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="c1">// Printing the result set.</span>
  <span class="k">struct</span> <span class="nc">OdbcStringBuffer</span>
  <span class="p">{</span>
    <span class="n">SQLCHAR</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
    <span class="n">SQLLEN</span> <span class="n">resLen</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">// Getting a number of columns in the result set.</span>
  <span class="n">SQLSMALLINT</span> <span class="n">columnsCnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">SQLNumResultCols</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">columnsCnt</span><span class="p">);</span>

  <span class="c1">// Allocating buffers for columns.</span>
  <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">OdbcStringBuffer</span><span class="o">&gt;</span> <span class="n">columns</span><span class="p">(</span><span class="n">columnsCnt</span><span class="p">);</span>

  <span class="c1">// Binding colums. For simplicity we are going to use only</span>
  <span class="c1">// string buffers here.</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">SQLSMALLINT</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">columnsCnt</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
    <span class="n">SQLBindCol</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SQL_C_CHAR</span><span class="p">,</span> <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">buffer</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">resLen</span><span class="p">);</span>

  <span class="c1">// Fetching and printing data in a loop.</span>
  <span class="n">ret</span> <span class="o">=</span> <span class="n">SQLFetch</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">SQL_SUCCEEDED</span><span class="p">(</span><span class="n">ret</span><span class="p">))</span>
  <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">columns</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
      <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">setw</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">left</span> <span class="o">&lt;&lt;</span> <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">buffer</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">SQLFetch</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Releasing statement handle.</span>
<span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<h3 id="columns-binding" class="discrete">Columns binding</h3>
<div class="paragraph">
<p>In the example above, we bind all columns to the SQL_C_CHAR columns. This means that all values are going to be converted to strings upon fetching. This is done for the sake of simplicity. Value conversion upon fetching can be pretty slow; so your default decision should be to fetch the value the same way as it is stored.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inserting-data">Inserting Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To insert new data into the cluster, <code>SQL INSERT</code> statements can be used from the ODBC side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

<span class="c1">// Allocate a statement handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">"INSERT INTO Person (id, orgId, firstName, lastName, resume, salary) "</span>
	<span class="s">"VALUES (?, ?, ?, ?, ?, ?)"</span><span class="p">;</span>

<span class="n">SQLPrepare</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query</span><span class="p">)));</span>

<span class="c1">// Binding columns.</span>
<span class="kt">int64_t</span> <span class="n">key</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int64_t</span> <span class="n">orgId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
<span class="n">SQLLEN</span> <span class="n">nameLen</span> <span class="o">=</span> <span class="n">SQL_NTS</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">salary</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span> <span class="n">SQL_BIGINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span> <span class="n">SQL_BIGINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">orgId</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_CHAR</span><span class="p">,</span> <span class="n">SQL_VARCHAR</span><span class="p">,</span>	<span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nameLen</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_DOUBLE</span><span class="p">,</span> <span class="n">SQL_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">salary</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// Filling cache.</span>
<span class="n">key</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">orgId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"John"</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
<span class="n">salary</span> <span class="o">=</span> <span class="mf">2200.0</span><span class="p">;</span>

<span class="n">SQLExecute</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>
<span class="n">SQLMoreResults</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>

<span class="o">++</span><span class="n">key</span><span class="p">;</span>
<span class="n">orgId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"Jane"</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
<span class="n">salary</span> <span class="o">=</span> <span class="mf">1300.0</span><span class="p">;</span>

<span class="n">SQLExecute</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>
<span class="n">SQLMoreResults</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>

<span class="o">++</span><span class="n">key</span><span class="p">;</span>
<span class="n">orgId</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"Richard"</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
<span class="n">salary</span> <span class="o">=</span> <span class="mf">900.0</span><span class="p">;</span>

<span class="n">SQLExecute</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>
<span class="n">SQLMoreResults</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>

<span class="o">++</span><span class="n">key</span><span class="p">;</span>
<span class="n">orgId</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"Mary"</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
<span class="n">salary</span> <span class="o">=</span> <span class="mf">2400.0</span><span class="p">;</span>

<span class="n">SQLExecute</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>

<span class="c1">// Releasing statement handle.</span>
<span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we are going to insert additional organizations without the usage of prepared statements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

<span class="c1">// Allocate a statement handle</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query1</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"INSERT INTO </span><span class="se">\"</span><span class="s">Organization</span><span class="se">\"</span><span class="s">.Organization (id, name) VALUES (1L, 'Some company')"</span><span class="p">;</span>

<span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query1</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query1</span><span class="p">)));</span>

<span class="n">SQLFreeStmt</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">SQL_CLOSE</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query2</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"INSERT INTO </span><span class="se">\"</span><span class="s">Organization</span><span class="se">\"</span><span class="s">.Organization (id, name) VALUES (2L, 'Some other company')"</span><span class="p">;</span>

  <span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query2</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query2</span><span class="p">)));</span>

<span class="c1">// Releasing statement handle.</span>
<span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<h3 id="error-checking" class="discrete">Error Checking</h3>
<div class="paragraph">
<p>For simplicity the example code above does not check for an error return code. You will want to do error checking in production.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="updating-data">Updating Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s now update the salary for some of the persons stored in the cluster using SQL <code>UPDATE</code> statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="kt">void</span> <span class="nf">AdjustSalary</span><span class="p">(</span><span class="n">SQLHDBC</span> <span class="n">dbc</span><span class="p">,</span> <span class="kt">int64_t</span> <span class="n">key</span><span class="p">,</span> <span class="kt">double</span> <span class="n">salary</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

  <span class="c1">// Allocate a statement handle</span>
  <span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

  <span class="n">SQLCHAR</span> <span class="n">query</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"UPDATE Person SET salary=? WHERE id=?"</span><span class="p">;</span>

  <span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span>
      <span class="n">SQL_C_DOUBLE</span><span class="p">,</span> <span class="n">SQL_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">salary</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span>
      <span class="n">SQL_BIGINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query</span><span class="p">)));</span>

  <span class="c1">// Releasing statement handle.</span>
  <span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">...</span>
<span class="n">AdjustSalary</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">1200.0</span><span class="p">);</span>
<span class="n">AdjustSalary</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2500.0</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deleting-data">Deleting Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, let&#8217;s remove a few records with the help of SQL <code>DELETE</code> statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="kt">void</span> <span class="nf">DeletePerson</span><span class="p">(</span><span class="n">SQLHDBC</span> <span class="n">dbc</span><span class="p">,</span> <span class="kt">int64_t</span> <span class="n">key</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

  <span class="c1">// Allocate a statement handle</span>
  <span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

  <span class="n">SQLCHAR</span> <span class="n">query</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"DELETE FROM Person WHERE id=?"</span><span class="p">;</span>

  <span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span> <span class="n">SQL_BIGINT</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

  <span class="n">SQLExecDirect</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query</span><span class="p">)));</span>

  <span class="c1">// Releasing statement handle.</span>
  <span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">...</span>
<span class="n">DeletePerson</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">DeletePerson</span><span class="p">(</span><span class="n">dbc</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="batching-with-arrays-of-parameters">Batching With Arrays of Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ODBC driver supports batching with <a href="https://docs.microsoft.com/en-us/sql/odbc/reference/develop-app/using-arrays-of-parameters">arrays of parameters</a> for DML statements.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s try to insert the same records we did in the example above but now with a single <code>SQLExecute</code> call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">SQLHSTMT</span> <span class="n">stmt</span><span class="p">;</span>

<span class="c1">// Allocating a statement handle.</span>
<span class="n">SQLAllocHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">dbc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">stmt</span><span class="p">);</span>

<span class="n">SQLCHAR</span> <span class="n">query</span><span class="p">[]</span> <span class="o">=</span>
	<span class="s">"INSERT INTO Person (id, orgId, firstName, lastName, resume, salary) "</span>
	<span class="s">"VALUES (?, ?, ?, ?, ?, ?)"</span><span class="p">;</span>

<span class="n">SQLPrepare</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">SQLSMALLINT</span><span class="o">&gt;</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">query</span><span class="p">)));</span>

<span class="c1">// Binding columns.</span>
<span class="kt">int64_t</span> <span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">int64_t</span> <span class="n">orgId</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="n">SQLLEN</span> <span class="n">nameLen</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">double</span> <span class="n">salary</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span> <span class="n">SQL_BIGINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_SLONG</span><span class="p">,</span> <span class="n">SQL_BIGINT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">orgId</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_CHAR</span><span class="p">,</span> <span class="n">SQL_VARCHAR</span><span class="p">,</span>	<span class="mi">1024</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">nameLen</span><span class="p">);</span>
<span class="n">SQLBindParameter</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">SQL_PARAM_INPUT</span><span class="p">,</span> <span class="n">SQL_C_DOUBLE</span><span class="p">,</span> <span class="n">SQL_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">salary</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// Filling cache.</span>
<span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">orgId</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">"John"</span><span class="p">,</span> <span class="mi">1023</span><span class="p">);</span>
<span class="n">salary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2200.0</span><span class="p">;</span>
<span class="n">nameLen</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">SQL_NTS</span><span class="p">;</span>

<span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">orgId</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="mi">1024</span><span class="p">,</span> <span class="s">"Jane"</span><span class="p">,</span> <span class="mi">1023</span><span class="p">);</span>
<span class="n">salary</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1300.0</span><span class="p">;</span>
<span class="n">nameLen</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">SQL_NTS</span><span class="p">;</span>

<span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">orgId</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"Richard"</span><span class="p">,</span> <span class="mi">1023</span><span class="p">);</span>
<span class="n">salary</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">900.0</span><span class="p">;</span>
<span class="n">nameLen</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">SQL_NTS</span><span class="p">;</span>

<span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">orgId</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">strncpy</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="s">"Mary"</span><span class="p">,</span> <span class="mi">1023</span><span class="p">);</span>
<span class="n">salary</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2400.0</span><span class="p">;</span>
<span class="n">nameLen</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">SQL_NTS</span><span class="p">;</span>

<span class="c1">// Asking the driver to store the total number of processed argument sets</span>
<span class="c1">// in the following variable.</span>
<span class="n">SQLULEN</span> <span class="n">setsProcessed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">SQLSetStmtAttr</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">SQL_ATTR_PARAMS_PROCESSED_PTR</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">setsProcessed</span><span class="p">,</span> <span class="n">SQL_IS_POINTER</span><span class="p">);</span>

<span class="c1">// Setting the size of the arguments array. This is 4 in our case.</span>
<span class="n">SQLSetStmtAttr</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">SQL_ATTR_PARAMSET_SIZE</span><span class="p">,</span> <span class="k">reinterpret_cast</span><span class="o">&lt;</span><span class="n">SQLPOINTER</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// Executing the statement.</span>
<span class="n">SQLExecute</span><span class="p">(</span><span class="n">stmt</span><span class="p">);</span>

<span class="c1">// Releasing the statement handle.</span>
<span class="n">SQLFreeHandle</span><span class="p">(</span><span class="n">SQL_HANDLE_STMT</span><span class="p">,</span> <span class="n">stmt</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This type of batching is currently supported for <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, and <code>MERGE</code> statements and does not work for <code>SELECTs</code>. The data-at-execution capability is not supported with Arrays of Parameters batching either.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="streaming">Streaming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ODBC driver allows streaming data in bulk using the <code>SET</code> command. See the <code>SET</code> <a href="/docs/2.9.0/sql-reference/operational-commands#set-streaming">command documentation</a> for more information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In streaming mode, the array of parameters and data-at-execution parameters are not supported.
</td>
</tr>
</table>
</div>
</div>
</div>
    </article>
    <nav class="right-nav" data-swiftype-index='false'>
    <ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#configuring-the-cluster">Configuring the Cluster</a></li>
<li><a href="#connecting-to-the-cluster">Connecting to the Cluster</a></li>
<li><a href="#querying-data">Querying Data</a></li>
<li><a href="#inserting-data">Inserting Data</a></li>
<li><a href="#updating-data">Updating Data</a></li>
<li><a href="#deleting-data">Deleting Data</a></li>
<li><a href="#batching-with-arrays-of-parameters">Batching With Arrays of Parameters</a></li>
<li><a href="#streaming">Streaming</a></li>
</ul>
          
      
<footer>
</footer>

</nav>
    
</section>
<script type='module' src='/assets/js/code-copy-to-clipboard.js' async crossorigin></script>

    <script>
    // inits deep anchors -- needs to be done here because of https://www.bryanbraun.com/anchorjs/#dont-run-it-too-late 
    anchors.add('.page-docs h1, .page-docs h2, .page-docs h3:not(.discrete), .page-docs h4, .page-docs h5');
    anchors.options = {
        placement: 'right',
        visible: 'always'
    };
    </script>
    <!-- load google fonts async -->
    <script type="text/javascript">
    WebFontConfig = {
      google: { families: [ 'Open+Sans:300,400,600,700&display=swap' ] }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })(); </script>
    <script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script>
      docsearch({
        // Your apiKey and indexName will be given to you once
        // we create your config
        apiKey: '25626fae796133dc1e734c6bcaaeac3c',
        indexName: 'docsearch',
        //appId: '<APP_ID>', // Should be only included if you are running DocSearch on your own.
        // Replace inputSelector with a CSS selector
        // matching your search input
        inputSelector: '#search-input',
        // Set debug to true to inspect the dropdown
        debug: true,
      });
    </script>
<script type='module' src='/assets/js/index.js?1598500265' async crossorigin></script>
<script type='module' src='/assets/js/versioning.js?1598500265' async crossorigin></script>
</body>

</html>
